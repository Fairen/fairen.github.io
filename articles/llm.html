<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comment fonctionnent les LLM - Version Compl√®te</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-in { animation: slideIn 0.3s ease-out; }
        
        /* Palette de couleurs coh√©rente avec le portfolio */
        .bg-portfolio-primary { background-color: #1a1a1a; }
        .bg-portfolio-secondary { background-color: #2a2a2a; }
        .bg-portfolio-card { background-color: #242424; }
        .text-portfolio-primary { color: #ffffff; }
        .text-portfolio-secondary { color: #a0a0a0; }
        .text-portfolio-accent { color: #ff6b35; }
        .text-portfolio-pink { color: #e91e63; }
        .text-portfolio-purple { color: #8e44ad; }
        .text-portfolio-violet { color: #9c27b0; }
        .border-portfolio-accent { border-color: #ff6b35; }
        .border-portfolio-pink { border-color: #e91e63; }
        .border-portfolio-purple { border-color: #8e44ad; }
        .border-portfolio-violet { border-color: #9c27b0; }
        .bg-portfolio-accent { background-color: #ff6b35; }
        .bg-portfolio-pink { background-color: #e91e63; }
        .bg-portfolio-purple { background-color: #8e44ad; }
        .bg-portfolio-violet { background-color: #9c27b0; }
        
        /* Classes Tailwind personnalis√©es pour la palette */
        .bg-slate-800\/50 { background-color: rgba(36, 36, 36, 0.8); }
        .bg-slate-700 { background-color: #2a2a2a; }
        .text-cyan-400 { color: #ff6b35; }
        .text-slate-400 { color: #a0a0a0; }
        .text-slate-300 { color: #ffffff; }
        .border-2 { border-width: 2px; }
        
        /* Arri√®re-plan avec effet gradient comme le portfolio */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(255, 107, 53, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(142, 68, 173, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 40% 20%, rgba(233, 30, 99, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        .content-container {
            position: relative;
            z-index: 1;
        }
        
        /* Styles responsifs pour mobile */
        @media (max-width: 768px) {
            .mobile-stack {
                flex-direction: column !important;
            }
            
            .mobile-text-sm {
                font-size: 0.875rem !important;
            }
            
            .mobile-p-2 {
                padding: 0.5rem !important;
            }
            
            .mobile-p-4 {
                padding: 1rem !important;
            }
            
            .mobile-gap-2 {
                gap: 0.5rem !important;
            }
            
            .mobile-hidden {
                display: none !important;
            }
            
            .mobile-grid-cols-1 {
                grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
            }
            
            .mobile-grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
            }
            
            .mobile-grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
            }
            
            .mobile-overflow-x-auto {
                overflow-x: auto !important;
            }
            
            .mobile-min-w-full {
                min-width: 100% !important;
            }
            
            /* Am√©lioration des zones de touch */
            button {
                min-height: 44px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Meilleure lisibilit√© des textes */
            .mobile-text-base {
                font-size: 1rem !important;
                line-height: 1.5 !important;
            }
            
            /* Espacement optimis√© */
            .mobile-mb-4 {
                margin-bottom: 1rem !important;
            }
            
            .mobile-mb-2 {
                margin-bottom: 0.5rem !important;
            }
            
            /* Optimisation des interactions tactiles */
            * {
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            
            input, textarea {
                -webkit-user-select: text;
                user-select: text;
            }
            
            /* Am√©lioration du scroll sur mobile */
            body {
                -webkit-overflow-scrolling: touch;
            }
        }
        
        @media (max-width: 480px) {
            .mobile-sm-p-2 {
                padding: 0.5rem !important;
            }
            
            .mobile-sm-text-xs {
                font-size: 0.75rem !important;
            }
            
            .mobile-sm-gap-1 {
                gap: 0.25rem !important;
            }
        }
    </style>
</head>
<body class="bg-portfolio-primary text-portfolio-primary min-h-screen">
    <div id="app" class="content-container p-3 sm:p-4 md:p-8"></div>

    <script>
        var state = {
            activeSection: 'intro',
            lang: 'fr',
            inputText: 'Le chat est mont√© sur le'
        };

        var translations = {
            fr: {
                title: "Comment fonctionnent les LLM ?",
                subtitle: "Exploration interactive des Large Language Models"
            },
            en: {
                title: "How do LLMs work?",
                subtitle: "Interactive exploration of Large Language Models"
            }
        };

        var debounceTimer = null;
        var lastFocusedElement = null;
        var lastCursorPosition = 0;

        function setActiveSection(section) {
            state.activeSection = section;
            render();
            
            // Scroll vers le haut de la page avec une animation fluide
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function toggleLanguage() {
            state.lang = state.lang === 'fr' ? 'en' : 'fr';
            state.inputText = state.lang === 'fr' ? 'Le chat est mont√© sur le' : 'The cat climbed on the';
            render();
        }

        function updateInputText(value) {
            var activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT') {
                lastFocusedElement = activeElement.id || 'tokenInput';
                lastCursorPosition = activeElement.selectionStart || 0;
            }

            state.inputText = value;

            var tokenDisplay = document.getElementById('tokenDisplay');
            if (tokenDisplay) {
                var words = value.split(' ');
                var html = '';
                for (var i = 0; i < words.length; i++) {
                    if (words[i]) {
                        html += '<span class="px-3 py-1 rounded text-sm" style="background-color: rgba(255, 107, 53, 0.3); border: 1px solid rgba(255, 107, 53, 0.5);">' + words[i] + '</span>';
                    }
                }
                tokenDisplay.innerHTML = html;
            }

            if (debounceTimer) {
                clearTimeout(debounceTimer);
            }

            debounceTimer = setTimeout(function() {
                render();
            }, 500);
        }

        function restoreFocus() {
            setTimeout(function() {
                var input = document.getElementById('tokenInput');
                if (input && lastFocusedElement === 'tokenInput') {
                    input.focus();
                    if (lastCursorPosition !== undefined) {
                        input.setSelectionRange(lastCursorPosition, lastCursorPosition);
                    }
                }
            }, 10);
        }

        function renderHeader() {
            var t = translations[state.lang];
            var html = '<div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2 sm:gap-0">';
            html += '<div class="flex-1">';
            html += '<h1 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-2 bg-clip-text text-transparent mobile-text-base" style="background: linear-gradient(135deg, #ff6b35, #e91e63, #9c27b0); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">' + t.title + '</h1>';
            html += '<p class="text-portfolio-secondary text-xs sm:text-sm md:text-base mobile-text-sm">' + t.subtitle + '</p>';
            html += '</div>';
            html += '<button onclick="toggleLanguage()" class="flex items-center gap-2 px-3 sm:px-4 py-2 bg-portfolio-card hover:bg-portfolio-secondary rounded-lg transition-all border text-sm mobile-text-sm" style="border-color: rgba(255, 255, 255, 0.1); min-height: 44px;">';
            html += '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m5 8 6 6"/><path d="m4 14 6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="m22 22-5-10-5 10"/><path d="M14 18h6"/></svg>';
            html += '<span class="font-bold">' + state.lang.toUpperCase() + '</span>';
            html += '</button></div>';
            return html;
        }

        function renderNav() {
            var lang = state.lang;
            var sections = [
                {id: 'intro', label: lang === 'fr' ? 'Introduction' : 'Introduction', icon: 'üåü'},
                {id: 'tokens', label: lang === 'fr' ? 'Tokens & Pr√©diction' : 'Tokens & Prediction', icon: '‚ö°'},
                {id: 'embeddings', label: lang === 'fr' ? 'Embeddings & Vecteurs' : 'Embeddings & Vectors', icon: 'üíª'},
                {id: 'attention', label: lang === 'fr' ? "M√©canisme d'Attention" : 'Attention Mechanism', icon: 'üß†'},
                {id: 'architecture', label: 'Architecture Transformer', icon: 'üèóÔ∏è'},
                {id: 'training', label: lang === 'fr' ? 'Entra√Ænement (3 Phases)' : 'Training (3 Phases)', icon: 'üìà'},
                {id: 'limits', label: lang === 'fr' ? 'Limitations & √âmergences' : 'Limitations & Emergent Abilities', icon: '‚ö†Ô∏è'}
            ];

            var html = '<div class="flex gap-1 sm:gap-2 mb-6 sm:mb-8 flex-wrap mobile-gap-2">';
            for (var i = 0; i < sections.length; i++) {
                var s = sections[i];
                var active = state.activeSection === s.id ? 'bg-portfolio-accent shadow-lg' : 'bg-portfolio-card hover:bg-portfolio-secondary';
                var shadowStyle = state.activeSection === s.id ? 'box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);' : '';
                html += '<button onclick="setActiveSection(\'' + s.id + '\')" class="flex items-center gap-1 sm:gap-2 px-2 sm:px-3 md:px-4 py-2 rounded-lg transition-all text-xs sm:text-sm md:text-base ' + active + ' mobile-text-sm" style="' + shadowStyle + ' min-height: 44px;">';
                html += '<span class="text-sm sm:text-base">' + s.icon + '</span>';
                html += '<span class="hidden sm:inline text-xs sm:text-sm md:text-base mobile-text-sm">' + s.label + '</span>';
                html += '</button>';
            }
            html += '</div>';
            return html;
        }

        function renderIntroductionSection() {
            var lang = state.lang;
            
            var html = '<div class="space-y-6 animate-in">';
            
            html += '<div class="bg-gradient-to-br from-blue-900/50 via-purple-900/50 to-slate-900/50 backdrop-blur rounded-xl p-6 md:p-10 border border-blue-500/30 shadow-2xl">';
            html += '<div class="text-center mb-8">';
            html += '<div class="text-6xl mb-4">ü§ñ</div>';
            html += '<h2 class="text-3xl md:text-4xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-300">';
            html += lang === 'fr' ? 'Bienvenue dans le monde des LLM' : 'Welcome to the World of LLMs';
            html += '</h2>';
            html += '<p class="text-lg md:text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed">';
            html += lang === 'fr' ? 
                "D√©couvrez les m√©canismes fascinants derri√®re les Large Language Models - ces intelligences artificielles r√©volutionnaires qui transforment notre fa√ßon d'interagir avec la technologie. Un voyage interactif et d√©taill√© du simple token au raisonnement √©mergent complexe." :
                "Discover the fascinating mechanisms behind Large Language Models - these revolutionary artificial intelligences that are transforming how we interact with technology. An interactive and detailed journey from simple tokens to complex emergent reasoning.";
            html += '</p></div></div>';
            
            html += '<div class="bg-slate-800/50 backdrop-blur rounded-xl p-6 border border-slate-700">';
            html += '<h3 class="text-2xl font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-blue-400">üí°</span>';
            html += lang === 'fr' ? "Qu'est-ce qu'un LLM exactement ?" : 'What exactly is an LLM?';
            html += '</h3>';
            html += '<div class="space-y-4 text-slate-300">';
            html += '<p class="text-base leading-relaxed">';
            html += lang === 'fr' ? 
                "Un <strong>Large Language Model</strong> (Mod√®le de Langage de Grande Taille) est un r√©seau de neurones artificiels massif, constitu√© de milliards de param√®tres interconnect√©s. Ces mod√®les sont entra√Æn√©s sur d'immenses corpus de textes provenant d'Internet, de livres, d'articles scientifiques et de conversations. Leur mission fondamentale ? <strong>Apprendre √† pr√©dire le mot ou token suivant</strong> dans n'importe quelle s√©quence de texte." :
                "A <strong>Large Language Model</strong> is a massive artificial neural network, composed of billions of interconnected parameters. These models are trained on immense text corpora from the Internet, books, scientific articles, and conversations. Their fundamental mission? <strong>Learning to predict the next word or token</strong> in any text sequence.";
            html += '</p>';
            
            html += '<div class="bg-blue-900/30 border border-blue-500/30 rounded-lg p-4">';
            html += '<p class="text-sm font-bold mb-2">üéØ ';
            html += lang === 'fr' ? 'Exemple d√©taill√©' : 'Detailed example';
            html += '</p>';
            html += '<div class="font-mono text-sm bg-slate-900/50 p-3 rounded space-y-2">';
            html += '<div class="text-cyan-400">' + (lang === 'fr' ? 'Vous √©crivez' : 'You write') + ': <span class="text-white">"' + (lang === 'fr' ? 'Le soleil brille dans le' : 'The sun shines in the') + '"</span></div>';
            html += '<div class="text-green-400">' + (lang === 'fr' ? 'Le LLM analyse et pr√©dit' : 'The LLM analyzes and predicts') + ':</div>';
            html += '<div class="text-white ml-2 sm:ml-4">‚Ä¢ "' + (lang === 'fr' ? 'ciel' : 'sky') + '" (78.3%) - ' + (lang === 'fr' ? 'contexte astronomique' : 'astronomical context') + '</div>';
            html += '<div class="text-white ml-2 sm:ml-4">‚Ä¢ "' + (lang === 'fr' ? 'jardin' : 'garden') + '" (12.1%) - ' + (lang === 'fr' ? 'contexte horticole' : 'horticultural context') + '</div>';
            html += '<div class="text-white ml-2 sm:ml-4">‚Ä¢ "' + (lang === 'fr' ? 'paysage' : 'landscape') + '" (6.8%) - ' + (lang === 'fr' ? 'contexte artistique' : 'artistic context') + '</div>';
            html += '<div class="text-white ml-2 sm:ml-4">‚Ä¢ ' + (lang === 'fr' ? 'Autres possibilit√©s' : 'Other possibilities') + ' (2.8%)</div>';
            html += '</div></div>';
            
            html += '<p class="text-base leading-relaxed">';
            html += lang === 'fr' ? 
                "Cette t√¢che de pr√©diction, apparemment simple, r√©v√®le une complexit√© extraordinaire. Pour pr√©dire avec pr√©cision, le mod√®le doit d√©velopper une compr√©hension profonde de : la <strong>syntaxe</strong> (r√®gles grammaticales), la <strong>s√©mantique</strong> (sens des mots et concepts), le <strong>contexte</strong> (situation et intention), la <strong>pragmatique</strong> (usage en situation r√©elle), et m√™me les <strong>connaissances factuelles</strong> sur le monde. Cette capacit√© de pr√©diction sophistiqu√©e engendre naturellement toutes les autres comp√©tences remarquables : r√©daction cr√©ative, traduction multilingue, programmation, r√©solution de probl√®mes, raisonnement logique et bien plus encore." :
                "This prediction task, seemingly simple, reveals extraordinary complexity. To predict accurately, the model must develop deep understanding of: <strong>syntax</strong> (grammatical rules), <strong>semantics</strong> (word meanings and concepts), <strong>context</strong> (situation and intention), <strong>pragmatics</strong> (real-world usage), and even <strong>factual knowledge</strong> about the world. This sophisticated prediction capability naturally gives rise to all other remarkable abilities: creative writing, multilingual translation, programming, problem-solving, logical reasoning, and much more.";
            html += '</p></div></div>';
            
            html += '<div class="bg-slate-800/50 backdrop-blur rounded-xl p-6 border border-slate-700">';
            html += '<h3 class="text-2xl font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-purple-400">üìä</span>';
            html += lang === 'fr' ? "L'√©chelle qui change tout : Une r√©volution quantitative" : 'Scale changes everything: A quantitative revolution';
            html += '</h3>';
            html += '<p class="text-slate-300 mb-6 text-sm md:text-base">';
            html += lang === 'fr' ? 
                "Les LLM modernes repr√©sentent un saut quantitatif sans pr√©c√©dent dans l'histoire de l'informatique. Cette √©chelle massive n'est pas qu'une prouesse technique - elle est la cl√© de leurs capacit√©s √©mergentes extraordinaires." :
                "Modern LLMs represent an unprecedented quantitative leap in computing history. This massive scale isn't just a technical feat - it's the key to their extraordinary emergent capabilities.";
            html += '</p>';
            html += '<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">';
            
            var stats = lang === 'fr' ? [
                {icon: 'üß†', number: '1.8 Trillion', label: 'Param√®tres (GPT-4)', desc: "Chaque param√®tre = une 'synapse' ajustable", detail: 'vs 86 milliards de neurones dans le cerveau humain'},
                {icon: 'üìö', number: '13 Trillion', label: 'Tokens d\'entra√Ænement', desc: '~10 millions de livres de 300 pages', detail: '√âquivalent √† 500 ans de lecture humaine (24h/24)'},
                {icon: 'üí∞', number: '~150M $', label: "Co√ªt d'entra√Ænement GPT-4", desc: 'Mois de calcul sur milliers de GPU H100', detail: 'Plus cher que certains programmes spatiaux'}
            ] : [
                {icon: 'üß†', number: '1.8 Trillion', label: 'Parameters (GPT-4)', desc: "Each parameter = an adjustable 'synapse'", detail: 'vs 86 billion neurons in human brain'},
                {icon: 'üìö', number: '13 Trillion', label: 'Training tokens', desc: '~10 million 300-page books', detail: 'Equivalent to 500 years of human reading (24/7)'},
                {icon: 'üí∞', number: '~$150M', label: 'GPT-4 training cost', desc: 'Months of compute on thousands of H100 GPUs', detail: 'More expensive than some space programs'}
            ];
            
            for (var i = 0; i < stats.length; i++) {
                html += '<div class="bg-gradient-to-br from-purple-900/30 to-blue-900/30 border border-purple-500/30 rounded-lg p-4 text-center hover:scale-105 transition-transform">';
                html += '<div class="text-4xl mb-3">' + stats[i].icon + '</div>';
                html += '<div class="text-2xl font-bold text-purple-300 mb-2">' + stats[i].number + '</div>';
                html += '<div class="text-sm font-semibold text-slate-200 mb-2">' + stats[i].label + '</div>';
                html += '<div class="text-xs text-slate-400 mb-2">' + stats[i].desc + '</div>';
                html += '<div class="text-xs text-slate-500 italic">' + stats[i].detail + '</div>';
                html += '</div>';
            }
            html += '</div>';
            
            html += '<div class="bg-gradient-to-r from-purple-900/40 to-blue-900/40 border border-purple-500/30 rounded-lg p-6">';
            html += '<h4 class="text-lg font-bold mb-3 text-center text-purple-300">';
            html += lang === 'fr' ? '‚ú® Les Lois d\'√âchelle : Pourquoi "Plus Grand" = "Plus Intelligent"' : '‚ú® Scaling Laws: Why "Bigger" = "Smarter"';
            html += '</h4>';
            html += '<div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-slate-300">';
            html += '<div>';
            html += '<p class="font-bold text-cyan-400 mb-2">' + (lang === 'fr' ? 'üìà Capacit√©s √âmergentes' : 'üìà Emergent Capabilities') + '</p>';
            html += '<ul class="space-y-1 text-xs">';
            html += '<li>‚Ä¢ ' + (lang === 'fr' ? 'Raisonnement logique complexe' : 'Complex logical reasoning') + '</li>';
            html += '<li>‚Ä¢ ' + (lang === 'fr' ? 'Programmation multi-langages' : 'Multi-language programming') + '</li>';
            html += '<li>‚Ä¢ ' + (lang === 'fr' ? 'Cr√©ativit√© et analogies' : 'Creativity and analogies') + '</li>';
            html += '<li>‚Ä¢ ' + (lang === 'fr' ? 'Compr√©hension nuanc√©e du contexte' : 'Nuanced context understanding') + '</li>';
            html += '</ul>';
            html += '</div>';
            html += '<div>';
            html += '<p class="font-bold text-orange-400 mb-2">' + (lang === 'fr' ? 'üéØ Pr√©dictibilit√©' : 'üéØ Predictability') + '</p>';
            html += '<p class="text-xs">';
            html += lang === 'fr' ? 
                'Les performances suivent des lois math√©matiques pr√©cises : doubler les param√®tres am√©liore syst√©matiquement les capacit√©s selon des courbes pr√©dictibles.' :
                'Performance follows precise mathematical laws: doubling parameters systematically improves capabilities along predictable curves.';
            html += '</p>';
            html += '</div>';
            html += '</div>';
            html += '<div class="mt-4 text-center">';
            html += '<p class="text-sm text-slate-300"><strong>‚ú® ';
            html += lang === 'fr' ? 'Principe fondamental' : 'Fundamental principle';
            html += ':</strong> ';
            html += lang === 'fr' ? 
                "L'intelligence n'est pas programm√©e directement, elle <strong>√©merge</strong> de l'√©chelle massive des donn√©es et des param√®tres." :
                "Intelligence isn't directly programmed, it <strong>emerges</strong> from the massive scale of data and parameters.";
            html += '</p>';
            html += '</div></div></div>';
            
            html += '<div class="bg-slate-800/50 backdrop-blur rounded-xl p-6 border border-slate-700">';
            html += '<h3 class="text-2xl font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-cyan-400">üó∫Ô∏è</span>';
            html += lang === 'fr' ? 'Votre parcours de d√©couverte' : 'Your discovery journey';
            html += '</h3>';
            html += '<p class="text-slate-300 mb-6">';
            html += lang === 'fr' ? 
                "Cette exploration interactive vous guidera √† travers les 6 concepts fondamentaux des LLM. Cliquez sur chaque section dans le menu ci-dessus pour approfondir :" :
                "This interactive exploration will guide you through the 6 fundamental concepts of LLMs. Click on each section in the menu above to dive deeper:";
            html += '</p>';
            
            var journey = lang === 'fr' ? [
                {icon: '‚ö°', title: '1. Tokens & Pr√©diction', desc: "Comment le texte est d√©coup√© en morceaux et comment le mod√®le devine le mot suivant", time: '5 min', color: 'from-yellow-500 to-orange-500'},
                {icon: 'üíª', title: '2. Embeddings & Vecteurs', desc: "Comment chaque mot devient un vecteur de 12,288 nombres capturant son 'sens'", time: '5 min', color: 'from-cyan-500 to-blue-500'},
                {icon: 'üß†', title: "3. M√©canisme d'Attention", desc: "Comment le mod√®le 'regarde' tous les mots pour comprendre le contexte", time: '4 min', color: 'from-purple-500 to-pink-500'},
                {icon: 'üèóÔ∏è', title: '4. Architecture Transformer', desc: "L'empilement de 120 couches qui transforme le texte en pr√©dictions", time: '4 min', color: 'from-green-500 to-emerald-500'},
                {icon: 'üìà', title: '5. Entra√Ænement (3 Phases)', desc: "Comment on enseigne au mod√®le : pre-training, fine-tuning, RLHF", time: '5 min', color: 'from-orange-500 to-red-500'},
                {icon: '‚ö†Ô∏è', title: '6. Limitations & √âmergences', desc: "Ce que les LLM font bien, leurs faiblesses, et leurs capacit√©s surprenantes", time: '4 min', color: 'from-red-500 to-pink-500'}
            ] : [
                {icon: '‚ö°', title: '1. Tokens & Prediction', desc: "How text is split into pieces and how the model guesses the next word", time: '5 min', color: 'from-yellow-500 to-orange-500'},
                {icon: 'üíª', title: '2. Embeddings & Vectors', desc: "How each word becomes a 12,288-number vector capturing its 'meaning'", time: '5 min', color: 'from-cyan-500 to-blue-500'},
                {icon: 'üß†', title: '3. Attention Mechanism', desc: "How the model 'looks at' all words to understand context", time: '4 min', color: 'from-purple-500 to-pink-500'},
                {icon: 'üèóÔ∏è', title: '4. Transformer Architecture', desc: "The stack of 120 layers that transforms text into predictions", time: '4 min', color: 'from-green-500 to-emerald-500'},
                {icon: 'üìà', title: '5. Training (3 Phases)', desc: "How we teach the model: pre-training, fine-tuning, RLHF", time: '5 min', color: 'from-orange-500 to-red-500'},
                {icon: '‚ö†Ô∏è', title: '6. Limitations & Emergent Abilities', desc: "What LLMs do well, their weaknesses, and their surprising capabilities", time: '4 min', color: 'from-red-500 to-pink-500'}
            ];
            
            html += '<div class="space-y-3">';
            for (var i = 0; i < journey.length; i++) {
                var sectionId = ['tokens', 'embeddings', 'attention', 'architecture', 'training', 'limits'][i];
                html += '<button onclick="setActiveSection(\'' + sectionId + '\')" class="w-full text-left bg-slate-900/50 hover:bg-slate-900 border border-slate-600 hover:border-slate-500 rounded-lg p-4 transition-all group">';
                html += '<div class="flex items-start gap-4">';
                html += '<div class="text-3xl group-hover:scale-110 transition-transform">' + journey[i].icon + '</div>';
                html += '<div class="flex-1">';
                html += '<div class="flex items-center justify-between mb-1">';
                html += '<h4 class="font-bold text-white group-hover:text-cyan-300 transition-colors">' + journey[i].title + '</h4>';
                html += '<span class="text-xs bg-slate-700 px-2 py-1 rounded text-slate-300">' + journey[i].time + '</span>';
                html += '</div>';
                html += '<p class="text-sm text-slate-400">' + journey[i].desc + '</p>';
                html += '<div class="mt-2 h-1 bg-slate-700 rounded-full overflow-hidden">';
                html += '<div class="h-full bg-gradient-to-r ' + journey[i].color + ' rounded-full" style="width: 0%; transition: width 0.3s;"></div>';
                html += '</div>';
                html += '</div></div></button>';
            }
            html += '</div></div>';
            
            html += '<div class="bg-gradient-to-r from-blue-900/50 to-purple-900/50 backdrop-blur rounded-xl p-6 border border-blue-500/30 text-center">';
            html += '<p class="text-lg mb-4 text-slate-200">';
            html += lang === 'fr' ? 
                "üöÄ Pr√™t √† comprendre comment ChatGPT, Claude et les autres fonctionnent r√©ellement ?" :
                "üöÄ Ready to understand how ChatGPT, Claude and others really work?";
            html += '</p>';
            html += '<button onclick="setActiveSection(\'tokens\')" class="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 px-8 py-3 rounded-lg font-bold text-white shadow-lg hover:shadow-xl transition-all transform hover:scale-105">';
            html += lang === 'fr' ? 'üéØ Commencer l\'exploration' : 'üéØ Start the exploration';
            html += ' ‚Üí</button>';
            html += '</div>';
            
            html += '</div>';
            return html;
        }

        function renderTokensSection() {
            var lang = state.lang;
            var tokens = lang === 'fr' ? 
                [{t: 'toit', p: 35, c: 'bg-blue-500'}, {t: 'canap√©', p: 25, c: 'bg-green-500'}, {t: 'arbre', p: 20, c: 'bg-yellow-500'}, {t: 'mur', p: 10, c: 'bg-orange-500'}, {t: 'lit', p: 10, c: 'bg-red-500'}] :
                [{t: 'roof', p: 35, c: 'bg-blue-500'}, {t: 'sofa', p: 25, c: 'bg-green-500'}, {t: 'tree', p: 20, c: 'bg-yellow-500'}, {t: 'wall', p: 10, c: 'bg-orange-500'}, {t: 'bed', p: 10, c: 'bg-red-500'}];

            var html = '<div class="space-y-6 animate-in"><div class="bg-slate-800/50 backdrop-blur rounded-xl p-4 md:p-6 border border-slate-700">';
            html += '<h2 class="text-xl md:text-2xl font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-yellow-400">‚ö°</span>';
            html += lang === 'fr' ? '1. Tokenisation et Pr√©diction : Le Langage des LLM' : '1. Tokenization and Prediction: The Language of LLMs';
            html += '</h2>';

            html += '<p class="text-slate-300 mb-6 text-sm md:text-base">';
            html += lang === 'fr' ? 
                "Les LLM ne comprennent pas le texte comme nous. Ils d√©coupent d'abord tout en <strong>tokens</strong> - des morceaux de mots qui sont leur unit√© de base. C'est comme l'alphabet pour les humains, mais plus flexible." :
                "LLMs don't understand text like we do. They first break everything into <strong>tokens</strong> - word pieces that are their basic unit. It's like the alphabet for humans, but more flexible.";
            html += '</p>';

            html += '<div class="bg-purple-900/30 border border-purple-500/30 rounded-lg p-4 mb-6">';
            html += '<p class="text-sm font-bold mb-2">üîç ';
            html += lang === 'fr' ? "Qu'est-ce qu'un token exactement ?" : 'What exactly is a token?';
            html += '</p>';
            html += '<p class="text-xs md:text-sm text-slate-300 mb-3">';
            html += lang === 'fr' ?
                "Un token est une unit√© de texte qui peut √™tre : un mot entier, une partie de mot, un caract√®re, ou m√™me un espace. Le mod√®le apprend √† d√©couper intelligemment le texte selon la fr√©quence d'apparition des s√©quences de caract√®res." :
                "A token is a unit of text that can be: a whole word, part of a word, a character, or even a space. The model learns to intelligently split text based on character sequence frequency.";
            html += '</p>';
            html += '<div class="bg-slate-800/50 rounded p-3 text-xs">';
            html += '<strong>' + (lang === 'fr' ? 'R√®gle g√©n√©rale :' : 'General rule:') + '</strong><br>';
            html += lang === 'fr' ?
                '‚Ä¢ Mots courants ‚Üí 1 token ("chat", "the", "et")<br>‚Ä¢ Mots rares ‚Üí plusieurs tokens ("anticonstitutionnellement")<br>‚Ä¢ 1 token ‚âà 4 caract√®res en moyenne (anglais)<br>‚Ä¢ 1 token ‚âà 0.75 mots en moyenne' :
                '‚Ä¢ Common words ‚Üí 1 token ("cat", "the", "and")<br>‚Ä¢ Rare words ‚Üí multiple tokens ("unconstitutionally")<br>‚Ä¢ 1 token ‚âà 4 characters on average (English)<br>‚Ä¢ 1 token ‚âà 0.75 words on average';
            html += '</div></div>';
            
            html += '<div class="mb-6">';
            html += '<label class="block text-sm font-medium mb-2">';
            html += lang === 'fr' ? "Texte d'entr√©e (essayez diff√©rents mots) :" : 'Input text (try different words):';
            html += '</label>';
            html += '<input id="tokenInput" type="text" value="' + state.inputText + '" oninput="updateInputText(this.value)" class="w-full bg-slate-700 rounded-lg px-4 py-2 border border-slate-600 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all">';
            html += '<div class="mt-2 flex flex-wrap gap-2">';
            html += '<span class="text-xs text-slate-400">' + (lang === 'fr' ? 'Essayez :' : 'Try:') + '</span>';
            var examples = lang === 'fr' ? 
                ['Le soleil brille', 'Intelligence artificielle', 'Bonjour le monde', 'ChatGPT est incroyable'] :
                ['The sun shines', 'Artificial intelligence', 'Hello world', 'ChatGPT is amazing'];
            for (var i = 0; i < examples.length; i++) {
                html += '<button onclick="updateInputText(\'' + examples[i].replace(/'/g, "\\'") + '\')" class="text-xs bg-slate-700 hover:bg-slate-600 px-2 py-1 rounded transition-colors">' + examples[i] + '</button>';
            }
            html += '</div></div>';

            html += '<div class="bg-slate-900/50 rounded-lg p-4 mb-4">';
            html += '<p class="text-sm text-slate-400 mb-2">';
            html += lang === 'fr' ? 'Tokens (morceaux de mots) :' : 'Tokens (word pieces):';
            html += '</p><div id="tokenDisplay" class="flex flex-wrap gap-2 min-h-[2rem]">';
            var words = state.inputText.split(' ');
            for (var i = 0; i < words.length; i++) {
                if (words[i]) {
                    html += '<span class="bg-blue-600/30 border border-blue-500/50 px-3 py-1 rounded text-sm">' + words[i] + '</span>';
                }
            }
            html += '</div>';
            html += '<p class="text-xs text-slate-400 mt-3">';
            html += lang === 'fr' ?
                '<strong>Info:</strong> Cette d√©monstration simplifie la tokenisation (1 mot = 1 token). En r√©alit√©, certains mots sont d√©coup√©s en sous-unit√©s plus petites.' :
                '<strong>Info:</strong> This demo simplifies tokenization (1 word = 1 token). In reality, some words are split into smaller sub-units.';
            html += '</p></div>';

            html += '<div class="bg-blue-900/30 border border-blue-500/30 rounded-lg p-4 mb-6">';
            html += '<p class="text-sm font-bold mb-2">üìù ';
            html += lang === 'fr' ? 'Exemples d√©taill√©s de tokenisation (GPT-4)' : 'Detailed tokenization examples (GPT-4)';
            html += '</p>';
            html += '<div class="space-y-3 mt-3">';
            
            var examples = lang === 'fr' ? [
                {text: 'chat', tokens: ['chat'], count: 1, note: 'Mot simple et courant ‚Üí 1 token'},
                {text: 'incroyable', tokens: ['incroyable'], count: 1, note: 'Mot courant ‚Üí 1 token'},
                {text: 'incroyablement', tokens: ['incroyable', 'ment'], count: 2, note: 'Suffixe s√©par√© car tr√®s fr√©quent'},
                {text: 'anticonstitutionnellement', tokens: ['anti', 'constitu', 'tionnel', 'lement'], count: 4, note: 'Mot rare ‚Üí d√©coup√© en parties'},
                {text: 'ChatGPT', tokens: ['Chat', 'GPT'], count: 2, note: 'Mots compos√©s s√©par√©s'},
                {text: "l'intelligence", tokens: ['l', "'", 'intelligence'], count: 3, note: 'Article et apostrophe s√©par√©s'},
                {text: '2024', tokens: ['202', '4'], count: 2, note: 'Chiffres souvent d√©coup√©s'},
                {text: 'üòÄ', tokens: ['üòÄ'], count: 1, note: 'Emojis = tokens sp√©ciaux'}
            ] : [
                {text: 'cat', tokens: ['cat'], count: 1, note: 'Simple common word ‚Üí 1 token'},
                {text: 'incredible', tokens: ['incredible'], count: 1, note: 'Common word ‚Üí 1 token'},
                {text: 'incredibly', tokens: ['incredibly'], count: 1, note: 'Common word with suffix ‚Üí 1 token'},
                {text: 'unconstitutionally', tokens: ['un', 'const', 'itution', 'ally'], count: 4, note: 'Rare word ‚Üí split into parts'},
                {text: 'ChatGPT', tokens: ['Chat', 'GPT'], count: 2, note: 'Compound words separated'},
                {text: "it's", tokens: ['it', "'s"], count: 2, note: 'Contractions split'},
                {text: '2024', tokens: ['202', '4'], count: 2, note: 'Numbers often split'},
                {text: 'üòÄ', tokens: ['üòÄ'], count: 1, note: 'Emojis = special tokens'}
            ];

            for (var i = 0; i < examples.length; i++) {
                html += '<div class="bg-slate-800/50 rounded p-3">';
                html += '<div class="flex items-center justify-between mb-2">';
                html += '<span class="font-mono text-cyan-400">"' + examples[i].text + '"</span>';
                html += '<span class="text-xs bg-blue-600 px-2 py-1 rounded">' + examples[i].count + ' token' + (examples[i].count > 1 ? 's' : '') + '</span>';
                html += '</div>';
                html += '<div class="flex flex-wrap gap-1 mb-2">';
                for (var j = 0; j < examples[i].tokens.length; j++) {
                    html += '<span class="text-xs bg-purple-600/30 border border-purple-500/50 px-2 py-1 rounded font-mono">' + examples[i].tokens[j] + '</span>';
                }
                html += '</div>';
                html += '<p class="text-xs text-slate-400">' + examples[i].note + '</p>';
                html += '</div>';
            }
            html += '</div></div>';

            html += '<div class="bg-slate-900/50 rounded-lg p-4 mb-6">';
            html += '<p class="text-sm font-bold mb-3">üéØ ';
            html += lang === 'fr' ? 'Comment le vocabulaire de tokens est cr√©√©' : 'How the token vocabulary is created';
            html += '</p>';
            html += '<p class="text-xs text-slate-300 mb-3">';
            html += lang === 'fr' ?
                "Les LLM modernes utilisent l'algorithme <strong>BPE (Byte-Pair Encoding)</strong> ou des variantes comme <strong>WordPiece</strong>. Le processus :" :
                "Modern LLMs use the <strong>BPE (Byte-Pair Encoding)</strong> algorithm or variants like <strong>WordPiece</strong>. The process:";
            html += '</p>';
            html += '<div class="space-y-2 text-xs">';
            var steps = lang === 'fr' ? [
                '<strong>√âtape 1 :</strong> Commencer avec tous les caract√®res individuels (a, b, c, ...)',
                '<strong>√âtape 2 :</strong> Analyser des milliards de textes pour trouver les paires fr√©quentes',
                '<strong>√âtape 3 :</strong> Fusionner les paires les plus fr√©quentes (ex: "t" + "h" ‚Üí "th")',
                '<strong>√âtape 4 :</strong> R√©p√©ter jusqu\'√† avoir ~50,000-100,000 tokens',
                '<strong>R√©sultat :</strong> Vocabulaire √©quilibr√© entre mots complets et sous-mots'
            ] : [
                '<strong>Step 1:</strong> Start with all individual characters (a, b, c, ...)',
                '<strong>Step 2:</strong> Analyze billions of texts to find frequent pairs',
                '<strong>Step 3:</strong> Merge most frequent pairs (e.g., "t" + "h" ‚Üí "th")',
                '<strong>Step 4:</strong> Repeat until ~50,000-100,000 tokens',
                '<strong>Result:</strong> Balanced vocabulary between whole words and subwords'
            ];
            for (var i = 0; i < steps.length; i++) {
                html += '<div class="bg-slate-800/50 rounded p-2">' + steps[i] + '</div>';
            }
            html += '</div></div>';

            html += '<div><p class="text-sm text-slate-400 mb-3">';
            html += lang === 'fr' ? 'Probabilit√©s du prochain token :' : 'Next token probabilities:';
            html += '</p>';
            html += '<p class="text-xs text-slate-300 mb-3">';
            html += lang === 'fr' ?
                "Apr√®s avoir tokenis√© l'entr√©e, le LLM calcule quelle suite est la plus probable. C'est le c≈ìur du fonctionnement : <strong>pr√©dire le token suivant</strong> parmi les ~100,000 possibles." :
                "After tokenizing the input, the LLM calculates which continuation is most likely. This is the core operation: <strong>predict the next token</strong> among ~100,000 possibilities.";
            html += '</p>';
            html += '<div class="space-y-2">';
            for (var i = 0; i < tokens.length; i++) {
                html += '<div class="flex items-center gap-3">';
                html += '<span class="w-16 sm:w-20 text-right font-mono text-xs sm:text-sm mobile-text-sm">' + tokens[i].t + '</span>';
                html += '<div class="flex-1 bg-slate-700 rounded-full h-8 overflow-hidden">';
                html += '<div class="' + tokens[i].c + ' h-full flex items-center justify-end pr-3 transition-all duration-500" style="width: ' + tokens[i].p + '%">';
                html += '<span class="text-xs md:text-sm font-bold">' + tokens[i].p + '%</span>';
                html += '</div></div></div>';
            }
            html += '</div>';
            html += '<p class="text-xs text-slate-400 mt-3">';
            html += lang === 'fr' ?
                "üí° Ces probabilit√©s viennent de milliards d'exemples vus pendant l'entra√Ænement. Si \"chat\" et \"toit\" apparaissent souvent ensemble dans les donn√©es, le mod√®le donnera une forte probabilit√© √† \"toit\"." :
                "üí° These probabilities come from billions of examples seen during training. If 'cat' and 'roof' often appear together in the data, the model will give a high probability to 'roof'.";
            html += '</p></div>';

            html += '<div class="mt-6 bg-slate-900/50 rounded-lg p-4">';
            html += '<p class="text-sm font-bold mb-3">üîÑ ';
            html += lang === 'fr' ? 'Le processus complet de g√©n√©ration' : 'The complete generation process';
            html += '</p>';
            html += '<div class="space-y-3">';
            var process = lang === 'fr' ? [
                {step: '1. Tokenisation', desc: '"Le chat" ‚Üí [Token_1234, Token_5678]', color: 'bg-blue-600'},
                {step: '2. Embedding', desc: 'Chaque token ‚Üí vecteur de 12,288 nombres', color: 'bg-cyan-600'},
                {step: '3. Transformer (120 couches)', desc: 'Analyse du contexte avec attention', color: 'bg-purple-600'},
                {step: '4. Pr√©diction', desc: 'Probabilit√©s sur 100,000 tokens possibles', color: 'bg-green-600'},
                {step: '5. Sampling', desc: 'Choix du token (avec temp√©rature)', color: 'bg-yellow-600'},
                {step: '6. D√©tokenisation', desc: 'Token ‚Üí texte visible ("toit")', color: 'bg-orange-600'},
                {step: '7. R√©p√©tition', desc: 'Le token g√©n√©r√© devient l\'entr√©e suivante', color: 'bg-red-600'}
            ] : [
                {step: '1. Tokenization', desc: '"The cat" ‚Üí [Token_1234, Token_5678]', color: 'bg-blue-600'},
                {step: '2. Embedding', desc: 'Each token ‚Üí 12,288-number vector', color: 'bg-cyan-600'},
                {step: '3. Transformer (120 layers)', desc: 'Context analysis with attention', color: 'bg-purple-600'},
                {step: '4. Prediction', desc: 'Probabilities over 100,000 possible tokens', color: 'bg-green-600'},
                {step: '5. Sampling', desc: 'Token selection (with temperature)', color: 'bg-yellow-600'},
                {step: '6. Detokenization', desc: 'Token ‚Üí visible text ("roof")', color: 'bg-orange-600'},
                {step: '7. Repetition', desc: 'Generated token becomes next input', color: 'bg-red-600'}
            ];
            for (var i = 0; i < process.length; i++) {
                html += '<div class="flex items-start gap-3">';
                html += '<div class="' + process[i].color + ' w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0">' + (i + 1) + '</div>';
                html += '<div class="flex-1">';
                html += '<div class="font-bold text-sm">' + process[i].step + '</div>';
                html += '<div class="text-xs text-slate-300">' + process[i].desc + '</div>';
                html += '</div></div>';
            }
            html += '</div></div>';

            html += '<div class="mt-6 bg-yellow-900/30 border border-yellow-500/30 rounded-lg p-4">';
            html += '<p class="text-sm"><strong>‚ö†Ô∏è ';
            html += lang === 'fr' ? 'Pourquoi la tokenisation est cruciale' : 'Why tokenization is crucial';
            html += ':</strong></p>';
            html += '<ul class="text-xs mt-2 space-y-1 text-slate-300">';
            var reasons = lang === 'fr' ? [
                '<strong>Efficacit√© :</strong> Vocabulaire de 100k tokens vs millions de mots possibles',
                '<strong>Multilingue :</strong> Peut encoder toutes les langues avec le m√™me vocabulaire',
                '<strong>Mots rares :</strong> Peut d√©composer des mots jamais vus en parties connues',
                '<strong>Limite de contexte :</strong> GPT-4 = 128k tokens ‚âà 96k mots ‚âà 300 pages'
            ] : [
                '<strong>Efficiency:</strong> 100k token vocabulary vs millions of possible words',
                '<strong>Multilingual:</strong> Can encode all languages with the same vocabulary',
                '<strong>Rare words:</strong> Can decompose never-seen words into known parts',
                '<strong>Context limit:</strong> GPT-4 = 128k tokens ‚âà 96k words ‚âà 300 pages'
            ];
            for (var i = 0; i < reasons.length; i++) {
                html += '<li>‚Ä¢ ' + reasons[i] + '</li>';
            }
            html += '</ul></div>';

            html += '<div class="mt-6 bg-green-900/30 border border-green-500/30 rounded-lg p-4">';
            html += '<p class="text-sm"><strong>üí° ';
            html += lang === 'fr' ? 'En r√©sum√©' : 'In summary';
            html += ':</strong></p>';
            html += '<p class="text-xs mt-2 text-slate-300">';
            html += lang === 'fr' ?
                "La tokenisation est l'interface entre le texte humain et les math√©matiques du LLM. Sans elle, impossible de traiter du texte efficacement. Chaque token devient un point d'entr√©e dans l'espace vectoriel de 12,288 dimensions o√π se passe toute la magie de la compr√©hension et de la g√©n√©ration." :
                "Tokenization is the interface between human text and LLM mathematics. Without it, efficient text processing is impossible. Each token becomes an entry point into the 12,288-dimensional vector space where all the magic of understanding and generation happens.";
            html += '</p></div>';

            html += '</div></div>';
            return html;
        }

        function renderEmbeddingsSection() {
            var lang = state.lang;
            var words = lang === 'fr' ?
                [{w: 'roi', v: [0.2, 0.8, 0.1, -0.3, 0.5], s: 100, interp: '‚Üí Masculin (0.2), tr√®s royal (0.8), vivant (0.1), neutre pouvoir (-0.3), neutre √¢ge (0.5)'},
                 {w: 'reine', v: [0.3, 0.7, 0.1, -0.2, 0.4], s: 95, interp: '‚Üí F√©minin (0.3), tr√®s royal (0.7), vivant (0.1), neutre pouvoir (-0.2), neutre √¢ge (0.4)'},
                 {w: 'homme', v: [0.1, 0.9, -0.2, 0.5, 0.3], s: 78, interp: '‚Üí Masculin (0.1), pas royal (0.9), tr√®s vivant (-0.2), fort pouvoir (0.5), neutre √¢ge (0.3)'},
                 {w: 'femme', v: [0.2, 0.8, -0.2, 0.6, 0.2], s: 82, interp: '‚Üí F√©minin (0.2), pas royal (0.8), tr√®s vivant (-0.2), fort pouvoir (0.6), neutre √¢ge (0.2)'},
                 {w: 'prince', v: [0.25, 0.75, 0.15, -0.25, 0.45], s: 92, interp: '‚Üí Masculin (0.25), tr√®s royal (0.75), vivant (0.15), faible pouvoir (-0.25), jeune (0.45)'}] :
                [{w: 'king', v: [0.2, 0.8, 0.1, -0.3, 0.5], s: 100, interp: '‚Üí Masculine (0.2), very royal (0.8), living (0.1), neutral power (-0.3), neutral age (0.5)'},
                 {w: 'queen', v: [0.3, 0.7, 0.1, -0.2, 0.4], s: 95, interp: '‚Üí Feminine (0.3), very royal (0.7), living (0.1), neutral power (-0.2), neutral age (0.4)'},
                 {w: 'man', v: [0.1, 0.9, -0.2, 0.5, 0.3], s: 78, interp: '‚Üí Masculine (0.1), not royal (0.9), very living (-0.2), strong power (0.5), neutral age (0.3)'},
                 {w: 'woman', v: [0.2, 0.8, -0.2, 0.6, 0.2], s: 82, interp: '‚Üí Feminine (0.2), not royal (0.8), very living (-0.2), strong power (0.6), neutral age (0.2)'},
                 {w: 'prince', v: [0.25, 0.75, 0.15, -0.25, 0.45], s: 92, interp: '‚Üí Masculine (0.25), very royal (0.75), living (0.15), less power (-0.25), young (0.45)'}];

            var html = '<div class="space-y-6 animate-in"><div class="bg-slate-800/50 backdrop-blur rounded-xl p-4 md:p-6 border border-slate-700">';
            html += '<h2 class="text-xl md:text-2xl font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-cyan-400">üíª</span>';
            html += lang === 'fr' ? '2. Embeddings : Transformer les mots en vecteurs' : '2. Embeddings: Words to Vectors';
            html += '</h2>';

            html += '<p class="text-slate-300 mb-6 text-sm md:text-base">';
            html += lang === 'fr' ? "Chaque token devient un vecteur de 12,288 nombres (GPT-4) qui capture son 'sens' math√©matique. Chaque dimension encode un aspect s√©mantique diff√©rent." : "Each token becomes a 12,288-number vector (GPT-4) that captures its mathematical 'meaning'. Each dimension encodes a different semantic aspect.";
            html += '</p>';

            html += '<div class="bg-blue-900/30 border border-blue-500/30 rounded-lg p-4 mb-6">';
            html += '<p class="text-sm font-bold mb-2">üîç ';
            html += lang === 'fr' ? 'Que repr√©sente chaque dimension ?' : 'What does each dimension represent?';
            html += '</p>';
            html += '<p class="text-xs md:text-sm text-slate-300 mb-3">';
            html += lang === 'fr' ? "Les 12,288 dimensions capturent diff√©rents aspects du sens. Voici 5 dimensions simplifi√©es pour illustration :" : "The 12,288 dimensions capture different aspects of meaning. Here are 5 simplified dimensions for illustration:";
            html += '</p>';
            html += '<div class="grid grid-cols-1 md:grid-cols-5 gap-2 text-xs">';
            var dims = [
                {n: lang === 'fr' ? 'Genre' : 'Gender', c: 'text-purple-400', d: '-1=' + (lang === 'fr' ? 'masc' : 'masc') + ', +1=' + (lang === 'fr' ? 'f√©m' : 'fem')},
                {n: lang === 'fr' ? 'Royaut√©' : 'Royalty', c: 'text-blue-400', d: '0=' + (lang === 'fr' ? 'commun' : 'common') + ', +1=' + (lang === 'fr' ? 'royal' : 'royal')},
                {n: lang === 'fr' ? 'Anim√©' : 'Animate', c: 'text-green-400', d: '-1=' + (lang === 'fr' ? 'objet' : 'object') + ', +1=' + (lang === 'fr' ? 'vivant' : 'living')},
                {n: lang === 'fr' ? 'Pouvoir' : 'Power', c: 'text-yellow-400', d: '-1=' + (lang === 'fr' ? 'faible' : 'weak') + ', +1=' + (lang === 'fr' ? 'fort' : 'strong')},
                {n: '√Çge', c: 'text-red-400', d: '-1=' + (lang === 'fr' ? 'jeune' : 'young') + ', +1=' + (lang === 'fr' ? 'vieux' : 'old')}
            ];
            for (var i = 0; i < dims.length; i++) {
                html += '<div class="bg-slate-800/50 rounded p-2">';
                html += '<div class="font-bold ' + dims[i].c + '">Dim ' + (i+1) + '</div>';
                html += '<div class="text-slate-300">' + dims[i].n + '</div>';
                html += '<div class="text-slate-400 text-xs">' + dims[i].d + '</div>';
                html += '</div>';
            }
            html += '</div></div>';

            html += '<div class="bg-slate-900/50 rounded-lg p-4 mb-4">';
            html += '<p class="text-sm text-slate-400 mb-3">';
            html += lang === 'fr' ? 'Vecteurs (5 dimensions simplifi√©es sur 12,288):' : 'Vectors (5 simplified dimensions out of 12,288):';
            html += '</p>';

            html += '<div class="flex gap-1 mb-2 ml-0 sm:ml-24">';
            var dimNames = ['Genre', lang === 'fr' ? 'Royaut√©' : 'Royalty', lang === 'fr' ? 'Anim√©' : 'Animate', lang === 'fr' ? 'Pouvoir' : 'Power', '√Çge'];
            var dimColors = ['text-portfolio-accent', 'text-portfolio-pink', 'text-portfolio-purple', 'text-portfolio-violet', 'text-portfolio-secondary'];
            for (var i = 0; i < dimNames.length; i++) {
                html += '<div class="flex-1 text-center text-xs sm:text-sm ' + dimColors[i] + ' font-bold mobile-text-sm">' + dimNames[i] + '</div>';
            }
            html += '</div>';

            html += '<div class="space-y-4">';
            var borderColors = ['border-portfolio-accent', 'border-portfolio-pink', 'border-portfolio-purple', 'border-portfolio-violet', 'border-gray-500'];
            var bgColors = ['bg-portfolio-accent', 'bg-portfolio-pink', 'bg-portfolio-purple', 'bg-portfolio-violet', 'bg-gray-500'];
            
            for (var i = 0; i < words.length; i++) {
                html += '<div class="rounded-lg p-3 sm:p-4 mobile-p-2" style="background-color: rgba(36, 36, 36, 0.8);">';
                html += '<div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-3 gap-2">';
                html += '<span class="font-bold text-base sm:text-lg mobile-text-base" style="color: #ff6b35;">' + words[i].w + '</span>';
                html += '<span class="text-xs px-2 py-1 rounded mobile-text-sm" style="color: #a0a0a0; background-color: #2a2a2a;">';
                html += (lang === 'fr' ? 'Similarit√© avec' : 'Similarity to') + ' "' + words[0].w + '": ' + words[i].s + '%';
                html += '</span></div>';
                
                html += '<div class="grid grid-cols-3 sm:grid-cols-5 gap-2 sm:gap-3 mb-3 mobile-grid-cols-3">';
                for (var j = 0; j < words[i].v.length; j++) {
                    var val = words[i].v[j];
                    var absVal = Math.abs(val);
                    var height = absVal * 50; // Hauteur r√©duite pour mobile
                    var isPositive = val >= 0;
                    
                    // Couleurs selon la palette du portfolio
                    var colors = ['#ff6b35', '#e91e63', '#8e44ad', '#9c27b0', '#6b7280'];
                    var borderColor = colors[j];
                    var bgColor = colors[j];
                    
                    html += '<div class="text-center">';
                    html += '<div class="text-xs font-bold mb-2 ' + dimColors[j] + ' mobile-text-sm">' + dimNames[j] + '</div>';
                    html += '<div class="relative rounded h-16 sm:h-20 overflow-hidden border-2" style="background-color: #2a2a2a; border-color: ' + borderColor + ';">';
                    
                    // Ligne centrale (z√©ro)
                    html += '<div class="absolute w-full h-0.5 top-1/2 transform -translate-y-1/2" style="background-color: #6b7280;"></div>';
                    
                    // Barre de valeur
                    if (isPositive) {
                        // Valeur positive : barre du centre vers le haut
                        html += '<div class="absolute w-full bottom-1/2 transition-all duration-500" style="background-color: ' + bgColor + '; height: ' + height + 'px;"></div>';
                    } else {
                        // Valeur n√©gative : barre du centre vers le bas
                        html += '<div class="absolute w-full top-1/2 transition-all duration-500" style="background-color: ' + bgColor + '; height: ' + height + 'px;"></div>';
                    }
                    
                    html += '</div>';
                    html += '<div class="text-xs font-mono font-bold mt-1" style="color: ' + (isPositive ? '#ff6b35' : '#e91e63') + ';">' + val.toFixed(1) + '</div>';
                    html += '</div>';
                }
                html += '</div>';
                
                html += '<div class="text-xs text-slate-400 bg-slate-700/50 rounded p-2">';
                html += '<strong>' + (lang === 'fr' ? 'Interpr√©tation' : 'Interpretation') + ':</strong> ' + words[i].interp;
                html += '</div>';
                html += '</div>';
            }
            html += '</div></div>';

            html += '<div class="bg-slate-900/50 rounded-lg p-4 mb-4">';
            html += '<p class="text-sm font-bold mb-2">üìê ';
            html += lang === 'fr' ? 'Calcul de similarit√© cosinus' : 'Cosine similarity calculation';
            html += '</p>';
            html += '<p class="text-xs mb-3" style="color: #ffffff;">';
            html += lang === 'fr' ? "La similarit√© entre deux vecteurs se calcule avec le produit scalaire normalis√© (cosinus de l'angle) :" : "Similarity between two vectors is calculated with normalized dot product (cosine of angle):";
            html += '</p>';
            html += '<div class="rounded p-3 font-mono text-xs space-y-2" style="background-color: rgba(36, 36, 36, 0.8);">';
            html += '<div style="color: #ff6b35;">similarity(' + words[0].w + ', ' + words[1].w + ') = (A ¬∑ B) / (||A|| √ó ||B||)</div>';
            html += '<div style="color: #ffffff;">= (0.2√ó0.3 + 0.8√ó0.7 + 0.1√ó0.1 + (-0.3)√ó(-0.2) + 0.5√ó0.4) / (‚àö... √ó ‚àö...)</div>';
            html += '<div style="color: #ffffff;">= (0.06 + 0.56 + 0.01 + 0.06 + 0.20) / (1.02 √ó 0.95)</div>';
            html += '<div style="color: #e91e63;">= 0.89 / 0.97 ‚âà 0.92 ' + (lang === 'fr' ? '‚Üí 92% de similarit√©' : '‚Üí 92% similarity') + '</div>';
            html += '</div>';
            html += '<p class="text-xs mt-2" style="color: #a0a0a0;">';
            html += lang === 'fr' ? "Plus l'angle entre deux vecteurs est petit, plus les mots sont s√©mantiquement proches." : "The smaller the angle between two vectors, the more semantically close the words are.";
            html += '</p></div>';

            html += '<div class="rounded-lg p-3 sm:p-4 mb-4 mobile-p-2" style="background-color: rgba(26, 26, 26, 0.5);">';
            html += '<p class="text-xs sm:text-sm font-bold mb-3 mobile-text-sm">üó∫Ô∏è ';
            html += lang === 'fr' ? 'Visualisation 2D (projection des 12,288 dimensions)' : '2D Visualization (projection of 12,288 dimensions)';
            html += '</p>';
            html += '<div class="rounded h-48 sm:h-64 relative overflow-hidden" style="background-color: #242424;">';
            html += '<div class="absolute top-1/2 left-0 w-full h-0.5" style="background-color: #6b7280;"></div>';
            html += '<div class="absolute left-1/2 top-0 w-0.5 h-full" style="background-color: #6b7280;"></div>';
            html += '<div class="absolute bottom-1 sm:bottom-2 right-1 sm:right-2 text-xs mobile-text-sm" style="color: #a0a0a0;">' + (lang === 'fr' ? 'Genre ‚Üí' : 'Gender ‚Üí') + '</div>';
            html += '<div class="absolute top-1 sm:top-2 left-1 sm:left-2 text-xs mobile-text-sm transform -rotate-90 origin-left" style="color: #a0a0a0;">' + (lang === 'fr' ? '‚Üê Royaut√©' : '‚Üê Royalty') + '</div>';
            
            var portfolioColors = ['#ff6b35', '#e91e63', '#8e44ad', '#9c27b0', '#ff6b35'];
            var points = [
                {word: words[0].w, x: 52, y: 20, color: portfolioColors[0]},
                {word: words[1].w, x: 58, y: 25, color: portfolioColors[1]},
                {word: words[2].w, x: 48, y: 55, color: portfolioColors[2]},
                {word: words[3].w, x: 54, y: 58, color: portfolioColors[3]},
                {word: words[4].w, x: 55, y: 22, color: portfolioColors[4]}
            ];
            for (var i = 0; i < points.length; i++) {
                html += '<div class="absolute transform -translate-x-1/2 -translate-y-1/2" style="left: ' + points[i].x + '%; top: ' + points[i].y + '%">';
                html += '<div class="w-2 sm:w-3 h-2 sm:h-3 rounded-full shadow-lg" style="background-color: ' + points[i].color + ';"></div>';
                html += '<div class="text-xs font-bold mt-1 whitespace-nowrap mobile-text-sm" style="color: #ffffff;">' + points[i].word + '</div>';
                html += '</div>';
            }
            html += '<svg class="absolute inset-0 w-full h-full pointer-events-none">';
            html += '<line x1="52%" y1="20%" x2="58%" y2="25%" stroke="#a0a0a0" stroke-width="1" stroke-dasharray="2,2"/>';
            html += '<line x1="48%" y1="55%" x2="54%" y2="58%" stroke="#a0a0a0" stroke-width="1" stroke-dasharray="2,2"/>';
            html += '</svg>';
            html += '</div>';
            html += '<p class="text-xs mt-2" style="color: #a0a0a0;">';
            html += lang === 'fr' ? "Les mots s√©mantiquement proches sont regroup√©s dans l'espace vectoriel. '" + words[0].w + "' et '" + words[1].w + "' sont tr√®s proches, tout comme '" + words[2].w + "' et '" + words[3].w + "'." : "Semantically close words are grouped in vector space. '" + words[0].w + "' and '" + words[1].w + "' are very close, as are '" + words[2].w + "' and '" + words[3].w + "'.";
            html += '</p></div>';

            html += '<div class="rounded-lg p-4" style="background-color: rgba(255, 107, 53, 0.3); border: 1px solid rgba(255, 107, 53, 0.3);">';
            html += '<p class="text-sm"><strong>üßÆ ';
            html += lang === 'fr' ? 'Alg√®bre vectorielle magique' : 'Vector algebra magic';
            html += ':</strong></p>';
            html += '<div class="space-y-3 mt-3">';
            html += '<div>';
            html += '<div class="text-sm font-mono p-3 rounded" style="background-color: rgba(26, 26, 26, 0.5);">';
            html += words[0].w + ' - ' + words[2].w + ' + ' + words[3].w + ' ‚âà ' + words[1].w;
            html += '</div>';
            html += '<div class="text-xs mt-2 ml-1 sm:ml-2" style="color: #ffffff;">';
            html += '[0.2, 0.8, 0.1, -0.3, 0.5] - [0.1, 0.9, -0.2, 0.5, 0.3] + [0.2, 0.8, -0.2, 0.6, 0.2]<br>';
            html += '= [0.3, 0.7, 0.1, -0.2, 0.4] ‚âà ' + (lang === 'fr' ? 'vecteur de' : 'vector of') + ' "' + words[1].w + '"';
            html += '</div></div>';
            html += '<div class="text-xs p-3 rounded" style="color: #ffffff; background-color: rgba(26, 26, 26, 0.5);">';
            html += '<strong>' + (lang === 'fr' ? 'Interpr√©tation :' : 'Interpretation:') + '</strong><br>';
            html += lang === 'fr' ? "On retire l'aspect 'masculin' du roi (+0.1 genre), on ajoute l'aspect 'f√©minin' de femme (+0.1 genre), et on garde l'aspect 'royaut√©' (0.7-0.8). Le r√©sultat pointe vers 'reine' !" : "We remove the 'masculine' aspect from king (+0.1 gender), add the 'feminine' aspect of woman (+0.1 gender), and keep the 'royalty' aspect (0.7-0.8). The result points to 'queen'!";
            html += '</div></div></div>';

            html += '<div class="rounded-lg p-4 mt-4" style="background-color: rgba(255, 193, 7, 0.3); border: 1px solid rgba(255, 193, 7, 0.3);">';
            html += '<p class="text-sm"><strong>‚ö†Ô∏è ' + (lang === 'fr' ? 'Important :' : 'Important:') + '</strong></p>';
            html += '<p class="text-xs mt-2" style="color: #ffffff;">';
            html += lang === 'fr' ? "Ces 5 dimensions sont une simplification p√©dagogique. En r√©alit√©, les 12,288 dimensions de GPT-4 n'ont pas d'interpr√©tation humaine claire - elles √©mergent de l'entra√Ænement et capturent des patterns linguistiques complexes et abstraits que nous ne pouvons pas toujours expliquer." : "These 5 dimensions are a pedagogical simplification. In reality, GPT-4's 12,288 dimensions don't have clear human interpretation - they emerge from training and capture complex, abstract linguistic patterns we can't always explain.";
            html += '</p></div>';

            // Nouveau sch√©ma de transformation
            html += '<div class="rounded-lg p-4 sm:p-6 mt-6 mobile-p-4" style="background-color: rgba(36, 36, 36, 0.8);">';
            html += '<h3 class="text-base sm:text-lg font-bold mb-4 mobile-text-base" style="color: #9c27b0;">' + 
                    (lang === 'fr' ? 'üîÑ Processus de Transformation Compl√®te' : 'üîÑ Complete Transformation Process') + '</h3>';
            
            html += '<div class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 mobile-gap-2">';
            
            // √âtape 1: Tokenisation
            html += '<div class="space-y-2 sm:space-y-3">';
            html += '<h4 class="font-bold text-center text-sm sm:text-base mobile-text-base" style="color: #ff6b35;">1. ' + (lang === 'fr' ? 'Tokenisation' : 'Tokenization') + '</h4>';
            html += '<div class="rounded-lg p-2 sm:p-3 mobile-p-2" style="background-color: rgba(255, 107, 53, 0.3); border: 1px solid #ff6b35;">';
            html += '<div class="text-center text-xs sm:text-sm font-mono mb-2 mobile-text-sm">"' + words[0].w + ' ' + words[1].w + '"</div>';
            html += '<div class="text-center text-xs mb-2 mobile-text-sm" style="color: #a0a0a0;">‚Üì</div>';
            html += '<div class="grid grid-cols-2 gap-1 sm:gap-2">';
            html += '<div class="rounded p-1 sm:p-2 text-center text-xs mobile-text-sm" style="background-color: rgba(255, 107, 53, 0.5);">[' + words[0].w + ']</div>';
            html += '<div class="rounded p-1 sm:p-2 text-center text-xs mobile-text-sm" style="background-color: rgba(255, 107, 53, 0.5);">[' + words[1].w + ']</div>';
            html += '</div>';
            html += '</div></div>';
            
            // √âtape 2: Embedding
            html += '<div class="space-y-2 sm:space-y-3">';
            html += '<h4 class="font-bold text-center text-sm sm:text-base mobile-text-base" style="color: #ff6b35;">2. ' + (lang === 'fr' ? 'Vectorisation' : 'Vectorization') + '</h4>';
            html += '<div class="rounded-lg p-2 sm:p-3 mobile-p-2" style="background-color: rgba(156, 39, 176, 0.3); border: 1px solid #9c27b0;">';
            for (var w = 0; w < 2; w++) {
                html += '<div class="mb-2 sm:mb-3">';
                html += '<div class="text-xs font-bold mb-1 sm:mb-2 text-center mobile-text-sm">' + words[w].w + '</div>';
                html += '<div class="grid grid-cols-3 sm:grid-cols-5 gap-1 mobile-grid-cols-3">';
                for (var d = 0; d < 5; d++) {
                    var val = words[w].v[d];
                    var colorIntensity = Math.abs(val) * 50 + 30;
                    var bgColor = val >= 0 ? '#ff6b35' : '#e91e63';
                    html += '<div class="border rounded text-xs text-center py-1" style="background-color: ' + bgColor + '; opacity: ' + (colorIntensity/100) + ';">';
                    html += val.toFixed(1);
                    html += '</div>';
                }
                html += '</div></div>';
            }
            html += '</div></div>';
            
            // √âtape 3: Calcul de similarit√©
            html += '<div class="space-y-2 sm:space-y-3">';
            html += '<h4 class="font-bold text-center text-sm sm:text-base mobile-text-base" style="color: #ff6b35;">3. ' + (lang === 'fr' ? 'Calcul Similarit√©' : 'Similarity Calculation') + '</h4>';
            html += '<div class="rounded-lg p-2 sm:p-3 mobile-p-2" style="background-color: rgba(233, 30, 99, 0.3); border: 1px solid #e91e63;">';
            html += '<div class="text-center mb-2 sm:mb-3">';
            html += '<div class="text-xs sm:text-sm font-mono mobile-text-sm">' + words[0].w + ' ¬∑ ' + words[1].w + '</div>';
            html += '<div class="text-xs my-1 sm:my-2 mobile-text-sm" style="color: #a0a0a0;">cosine similarity</div>';
            html += '<div class="text-base sm:text-lg font-bold mobile-text-base" style="color: #e91e63;">' + words[1].s + '%</div>';
            html += '</div>';
            
            // Visualisation de l'angle
            html += '<div class="relative rounded h-16 sm:h-20 mx-auto" style="width: 60px; background-color: #2a2a2a;">';
            html += '<svg class="absolute inset-0 w-full h-full" viewBox="0 0 80 80">';
            html += '<line x1="40" y1="60" x2="70" y2="30" stroke="#e91e63" stroke-width="2"/>';
            html += '<line x1="40" y1="60" x2="70" y2="50" stroke="#8e44ad" stroke-width="2"/>';
            html += '<path d="M 50 60 A 10 10 0 0 0 55 55" stroke="#a0a0a0" stroke-width="1" fill="none"/>';
            html += '<text x="42" y="75" font-size="8" fill="#a0a0a0">Œ∏</text>';
            html += '</svg>';
            html += '</div>';
            html += '<div class="text-xs text-center mt-1 mobile-text-sm" style="color: #a0a0a0;">';
            html += lang === 'fr' ? 'Angle = ' + (90 - words[1].s).toFixed(0) + '¬∞' : 'Angle = ' + (90 - words[1].s).toFixed(0) + '¬∞';
            html += '</div>';
            html += '</div></div>';
            
            html += '</div>';
            
            // R√©sum√© du processus
            html += '<div class="mt-4 sm:mt-6 rounded-lg p-3 sm:p-4 mobile-p-2" style="background: linear-gradient(to right, rgba(255, 107, 53, 0.2), rgba(156, 39, 176, 0.2)); border: 1px solid rgba(255, 107, 53, 0.3);">';
            html += '<h4 class="font-bold mb-2 text-sm sm:text-base mobile-text-base" style="color: #ff6b35;">üéØ ' + (lang === 'fr' ? 'R√©sum√© du Processus' : 'Process Summary') + '</h4>';
            html += '<ol class="text-xs sm:text-sm space-y-1 sm:space-y-2 mobile-text-sm" style="color: #ffffff;">';
            html += '<li><strong>1.</strong> ' + (lang === 'fr' ? 'Le texte est d√©coup√© en tokens (mots/sous-mots)' : 'Text is split into tokens (words/sub-words)') + '</li>';
            html += '<li><strong>2.</strong> ' + (lang === 'fr' ? 'Chaque token devient un vecteur de 12,288 dimensions' : 'Each token becomes a 12,288-dimensional vector') + '</li>';
            html += '<li><strong>3.</strong> ' + (lang === 'fr' ? 'Les vecteurs capturent le sens s√©mantique et syntaxique' : 'Vectors capture semantic and syntactic meaning') + '</li>';
            html += '<li><strong>4.</strong> ' + (lang === 'fr' ? 'La similarit√© entre concepts se mesure par l\'angle vectoriel' : 'Similarity between concepts is measured by vector angle') + '</li>';
            html += '<li><strong>5.</strong> ' + (lang === 'fr' ? 'Ces relations permettent l\'alg√®bre s√©mantique (roi - homme + femme = reine)' : 'These relationships enable semantic algebra (king - man + woman = queen)') + '</li>';
            html += '</ol></div>';
            
            html += '</div>';

            html += '</div></div>';
            return html;
        }

        function renderAttentionSection() {
            var lang = state.lang;
            var example = lang === 'fr' ? [
                {word: 'Le', attention: [0.20, 0.55, 0.10, 0.05, 0.05, 0.03, 0.02]},
                {word: 'chat', attention: [0.08, 0.65, 0.12, 0.05, 0.05, 0.03, 0.02]},
                {word: 'noir', attention: [0.05, 0.55, 0.30, 0.05, 0.03, 0.01, 0.01]},
                {word: 'a', attention: [0.08, 0.12, 0.08, 0.20, 0.45, 0.05, 0.02]},
                {word: 'mang√©', attention: [0.05, 0.30, 0.08, 0.15, 0.25, 0.08, 0.09]},
                {word: 'la', attention: [0.08, 0.05, 0.03, 0.05, 0.10, 0.15, 0.54]},
                {word: 'souris', attention: [0.08, 0.25, 0.05, 0.10, 0.40, 0.10, 0.02]}
            ] : [
                {word: 'The', attention: [0.25, 0.08, 0.55, 0.05, 0.05, 0.02]},
                {word: 'black', attention: [0.05, 0.30, 0.55, 0.05, 0.03, 0.02]},
                {word: 'cat', attention: [0.08, 0.12, 0.65, 0.10, 0.03, 0.02]},
                {word: 'ate', attention: [0.08, 0.10, 0.35, 0.25, 0.12, 0.10]},
                {word: 'the', attention: [0.05, 0.05, 0.08, 0.10, 0.20, 0.52]},
                {word: 'mouse', attention: [0.05, 0.08, 0.20, 0.45, 0.15, 0.07]}
            ];

            var html = '<div class="space-y-6 animate-in"><div class="backdrop-blur rounded-xl p-4 md:p-6 border" style="background-color: rgba(36, 36, 36, 0.8); border-color: rgba(255, 255, 255, 0.1);">';
            html += '<h2 class="text-xl md:text-2xl font-bold mb-4 flex items-center gap-2">';
            html += '<span style="color: #9c27b0;">üß†</span>';
            html += lang === 'fr' ? "3. M√©canisme d'Attention (Self-Attention) : Le C≈ìur de l'Intelligence" : "3. Attention Mechanism (Self-Attention): The Heart of Intelligence";
            html += '</h2>';

            html += '<p class="mb-6 text-sm md:text-base" style="color: #ffffff;">';
            html += lang === 'fr' ? 
                "Le m√©canisme d'attention est l'innovation r√©volutionnaire qui permet aux LLM de comprendre le contexte et les relations complexes entre les mots. C'est litt√©ralement la capacit√© du mod√®le √† <strong>'faire attention'</strong> aux parties pertinentes du texte pour comprendre le sens global. Imaginez votre propre attention quand vous lisez - vous ne traitez pas chaque mot de mani√®re isol√©e, mais vous reliez les concepts entre eux." : 
                "The attention mechanism is the revolutionary innovation that allows LLMs to understand context and complex relationships between words. It's literally the model's ability to <strong>'pay attention'</strong> to relevant parts of the text to understand the global meaning. Imagine your own attention when reading - you don't process each word in isolation, but connect concepts together.";
            html += '</p>';

            // Nouvelle section : Explication conceptuelle d√©taill√©e
            html += '<div class="rounded-lg p-6 mb-6" style="background-color: rgba(156, 39, 176, 0.3); border: 1px solid rgba(156, 39, 176, 0.3);">';
            html += '<h3 class="text-lg font-bold mb-4 flex items-center gap-2">';
            html += '<span style="color: #ff6b35;">üîç</span>';
            html += lang === 'fr' ? 'Comment fonctionne concr√®tement l\'attention ?' : 'How does attention actually work?';
            html += '</h3>';
            html += '<div class="space-y-4 text-sm md:text-base">';
            
            html += '<div class="rounded-lg p-4" style="background-color: rgba(36, 36, 36, 0.8);">';
            html += '<p class="font-bold mb-2" style="color: #ffc107;">üéØ ';
            html += lang === 'fr' ? '√âtape 1 : Transformation en Query, Key et Value' : 'Step 1: Transform into Query, Key and Value';
            html += '</p>';
            html += '<p style="color: #ffffff;">';
            html += lang === 'fr' ? 
                "Chaque mot (embedding) est transform√© en 3 vecteurs diff√©rents via des matrices apprises :<br>‚Ä¢ <strong>Query (Q)</strong> : \"Que cherche ce mot ?\"<br>‚Ä¢ <strong>Key (K)</strong> : \"De quoi parle ce mot ?\"<br>‚Ä¢ <strong>Value (V)</strong> : \"Quelle information ce mot apporte-t-il ?\"" :
                "Each word (embedding) is transformed into 3 different vectors via learned matrices:<br>‚Ä¢ <strong>Query (Q)</strong>: \"What is this word looking for?\"<br>‚Ä¢ <strong>Key (K)</strong>: \"What is this word about?\"<br>‚Ä¢ <strong>Value (V)</strong>: \"What information does this word provide?\"";
            html += '</p>';
            html += '</div>';

            html += '<div class="bg-slate-800/50 rounded-lg p-4">';
            html += '<p class="font-bold text-blue-400 mb-2">‚ö° ';
            html += lang === 'fr' ? '√âtape 2 : Calcul des scores d\'attention' : 'Step 2: Calculate attention scores';
            html += '</p>';
            html += '<p class="text-slate-300">';
            html += lang === 'fr' ? 
                "Pour chaque mot, on calcule sa compatibilit√© avec tous les autres mots :<br>‚Ä¢ Score = Query du mot actuel ‚ö¨ Key de chaque autre mot<br>‚Ä¢ Plus le score est √©lev√©, plus l'attention est forte<br>‚Ä¢ Ces scores sont normalis√©s avec <strong>softmax</strong> pour obtenir des probabilit√©s" :
                "For each word, we calculate its compatibility with all other words:<br>‚Ä¢ Score = Current word's Query ‚ö¨ Key of each other word<br>‚Ä¢ Higher score = stronger attention<br>‚Ä¢ These scores are normalized with <strong>softmax</strong> to get probabilities";
            html += '</p>';
            html += '</div>';

            html += '<div class="bg-slate-800/50 rounded-lg p-4">';
            html += '<p class="font-bold text-green-400 mb-2">üîÑ ';
            html += lang === 'fr' ? '√âtape 3 : Agr√©gation pond√©r√©e' : 'Step 3: Weighted aggregation';
            html += '</p>';
            html += '<p class="text-slate-300">';
            html += lang === 'fr' ? 
                "Le nouveau repr√©sentation du mot = combinaison pond√©r√©e des Values :<br>‚Ä¢ Nouveau vecteur = Œ£ (score_attention √ó Value de chaque mot)<br>‚Ä¢ Le mot \"int√®gre\" l'information de tous les autres mots selon leur pertinence<br>‚Ä¢ R√©sultat : une repr√©sentation enrichie par le contexte complet" :
                "The new word representation = weighted combination of Values:<br>‚Ä¢ New vector = Œ£ (attention_score √ó Value of each word)<br>‚Ä¢ The word \"integrates\" information from all other words based on relevance<br>‚Ä¢ Result: a representation enriched by complete context";
            html += '</p>';
            html += '</div>';
            html += '</div></div>';

            // Section multi-t√™tes d'attention
            html += '<div class="bg-slate-800/50 backdrop-blur rounded-xl p-6 border border-slate-700 mb-6">';
            html += '<h3 class="text-lg font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-orange-400">üé≠</span>';
            html += lang === 'fr' ? 'Multi-Head Attention : Plusieurs perspectives simultan√©es' : 'Multi-Head Attention: Multiple simultaneous perspectives';
            html += '</h3>';
            html += '<p class="text-slate-300 mb-4 text-sm md:text-base">';
            html += lang === 'fr' ? 
                "Les LLM modernes utilisent 96 \"t√™tes d'attention\" en parall√®le (GPT-4). Chaque t√™te se sp√©cialise dans un type de relation diff√©rent :" :
                "Modern LLMs use 96 \"attention heads\" in parallel (GPT-4). Each head specializes in a different type of relationship:";
            html += '</p>';
            
            var heads = lang === 'fr' ? [
                {name: 'T√™te Syntaxique', desc: 'Relations grammaticales (sujet-verbe, nom-adjectif)', color: 'bg-red-500'},
                {name: 'T√™te S√©mantique', desc: 'Relations de sens (synonymes, antonymes)', color: 'bg-blue-500'},
                {name: 'T√™te Cor√©f√©rence', desc: 'R√©solution des pronoms et r√©f√©rences', color: 'bg-green-500'},
                {name: 'T√™te Temporelle', desc: 'Relations de chronologie et causalit√©', color: 'bg-yellow-500'},
                {name: 'T√™te Th√©matique', desc: 'Coh√©rence du sujet principal', color: 'bg-purple-500'},
                {name: '... 91 autres', desc: 'Chaque t√™te d√©couvre ses propres patterns', color: 'bg-gray-500'}
            ] : [
                {name: 'Syntactic Head', desc: 'Grammatical relations (subject-verb, noun-adjective)', color: 'bg-red-500'},
                {name: 'Semantic Head', desc: 'Meaning relations (synonyms, antonyms)', color: 'bg-blue-500'},
                {name: 'Coreference Head', desc: 'Pronoun and reference resolution', color: 'bg-green-500'},
                {name: 'Temporal Head', desc: 'Chronology and causality relations', color: 'bg-yellow-500'},
                {name: 'Thematic Head', desc: 'Main topic coherence', color: 'bg-purple-500'},
                {name: '... 91 others', desc: 'Each head discovers its own patterns', color: 'bg-gray-500'}
            ];

            html += '<div class="grid grid-cols-1 md:grid-cols-2 gap-3">';
            for (var i = 0; i < heads.length; i++) {
                html += '<div class="flex items-center gap-3 bg-slate-900/50 rounded-lg p-3">';
                html += '<div class="w-4 h-4 rounded-full ' + heads[i].color + '"></div>';
                html += '<div>';
                html += '<div class="font-bold text-white text-sm">' + heads[i].name + '</div>';
                html += '<div class="text-xs text-slate-400">' + heads[i].desc + '</div>';
                html += '</div></div>';
            }
            html += '</div></div>';

            // Exemple interactif am√©lior√©
            html += '<div class="bg-slate-900/50 rounded-lg p-4 sm:p-6">';
            html += '<h3 class="text-base sm:text-lg font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-pink-400">üìä</span>';
            html += lang === 'fr' ? 'Visualisation interactive : Qui fait attention √† qui ?' : 'Interactive visualization: Who attends to whom?';
            html += '</h3>';
            html += '<p class="text-xs sm:text-sm text-slate-400 mb-4">';
            html += lang === 'fr' ? 'Phrase exemple : "Le chat noir a mang√© la souris"' : 'Example sentence: "The black cat ate the mouse"';
            html += '</p>';

            // Version mobile (vertical)
            html += '<div class="block sm:hidden space-y-6">';
            for (var i = 0; i < example.length; i++) {
                html += '<div class="bg-slate-800/50 rounded-lg p-4 border border-orange-500/20">';
                html += '<div class="text-center mb-4">';
                html += '<span class="inline-block px-3 py-1 bg-gradient-to-r from-orange-500 to-pink-500 rounded-full text-white font-bold text-sm">' + example[i].word + '</span>';
                html += '<div class="text-xs text-slate-400 mt-1">' + (lang === 'fr' ? 'pr√™te attention √† :' : 'attends to:') + '</div>';
                html += '</div>';
                html += '<div class="grid grid-cols-3 gap-2">';
                for (var j = 0; j < example[i].attention.length; j++) {
                    var intensity = example[i].attention[j];
                    var bgColor = intensity > 0.5 ? 'bg-gradient-to-t from-purple-600 to-pink-500' : 
                                  intensity > 0.3 ? 'bg-gradient-to-t from-purple-700 to-pink-600' : 
                                  'bg-gradient-to-t from-purple-800 to-pink-700';
                    html += '<div class="text-center">';
                    html += '<div class="text-xs font-medium mb-1 text-orange-300">' + example[j].word + '</div>';
                    html += '<div class="bg-slate-700 rounded h-12 overflow-hidden mx-auto w-8">';
                    html += '<div class="' + bgColor + ' w-full transition-all duration-300" style="height: ' + (intensity * 100) + '%"></div>';
                    html += '</div>';
                    html += '<div class="text-xs mt-1 text-slate-400 font-bold">' + Math.round(intensity * 100) + '%</div>';
                    html += '</div>';
                }
                html += '</div></div>';
            }
            html += '</div>';

            // Version desktop (horizontale)
            html += '<div class="hidden sm:block space-y-4">';
            for (var i = 0; i < example.length; i++) {
                html += '<div>';
                html += '<div class="flex items-center gap-4 mb-2">';
                html += '<span class="w-24 text-right font-bold text-orange-400">' + example[i].word + '</span>';
                html += '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-pink-400"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>';
                html += '<span class="text-sm text-slate-400">' + (lang === 'fr' ? 'pr√™te attention √† :' : 'attends to:') + '</span>';
                html += '</div>';
                html += '<div class="flex gap-1 ml-32">';
                for (var j = 0; j < example[i].attention.length; j++) {
                    html += '<div class="flex-1">';
                    html += '<div class="text-xs text-center mb-1 text-orange-300">' + example[j].word + '</div>';
                    html += '<div class="bg-slate-700 rounded h-16 overflow-hidden">';
                    html += '<div class="bg-gradient-to-t from-purple-600 to-pink-500 w-full transition-all duration-300" style="height: ' + (example[i].attention[j] * 100) + '%"></div>';
                    html += '</div>';
                    html += '<div class="text-xs text-center mt-1 text-slate-400">' + Math.round(example[i].attention[j] * 100) + '%</div>';
                    html += '</div>';
                }
                html += '</div></div>';
            }
            html += '</div></div>';

            // Explication d√©taill√©e des patterns observ√©s
            html += '<div class="mt-6 space-y-4">';
            html += '<div class="bg-purple-900/30 border border-purple-500/30 rounded-lg p-4">';
            html += '<p class="text-sm font-bold mb-2">üí° ';
            html += lang === 'fr' ? 'Analyse des patterns d\'attention observ√©s :' : 'Analysis of observed attention patterns:';
            html += '</p>';
            html += '<div class="space-y-2 text-xs md:text-sm text-slate-300">';
            html += '<p><strong>‚Ä¢ "Le" ‚Üí "chat" (55%)</strong> : ';
            html += lang === 'fr' ? 'L\'article d√©terminant se connecte prioritairement au nom qu\'il introduit' : 'The determiner article connects primarily to the noun it introduces';
            html += '</p>';
            html += '<p><strong>‚Ä¢ "chat" ‚Üí "chat" (65%)</strong> : ';
            html += lang === 'fr' ? 'Auto-attention forte pour consolider l\'identit√© du sujet principal' : 'Strong self-attention to consolidate the main subject identity';
            html += '</p>';
            html += '<p><strong>‚Ä¢ "a" ‚Üí "mang√©" (45%)</strong> : ';
            html += lang === 'fr' ? 'L\'auxiliaire "avoir" se lie fortement au participe pass√©' : 'The auxiliary "avoir" binds strongly to the past participle';
            html += '</p>';
            html += '<p><strong>‚Ä¢ "mang√©" ‚Üí "chat" (30%)</strong> : ';
            html += lang === 'fr' ? 'Le verbe regarde vers son sujet pour l\'accord et la coh√©rence' : 'The verb looks to its subject for agreement and coherence';
            html += '</p>';
            html += '<p><strong>‚Ä¢ "la" ‚Üí "souris" (54%)</strong> : ';
            html += lang === 'fr' ? 'L\'article f√©minin se connecte au nom qu\'il d√©termine' : 'The feminine article connects to the noun it determines';
            html += '</p>';
            html += '<p><strong>‚Ä¢ "souris" ‚Üí "mang√©" (40%)</strong> : ';
            html += lang === 'fr' ? 'Compr√©hension que la souris est l\'objet direct de l\'action' : 'Understanding that the mouse is the direct object of the action';
            html += '</p>';
            html += '</div></div>';

            // Section sur les limites et d√©fis
            html += '<div class="bg-orange-900/30 border border-orange-500/30 rounded-lg p-4">';
            html += '<p class="text-sm font-bold mb-2">‚ö†Ô∏è ';
            html += lang === 'fr' ? 'D√©fis et limites de l\'attention :' : 'Challenges and limitations of attention:';
            html += '</p>';
            html += '<div class="space-y-2 text-xs md:text-sm text-slate-300">';
            html += '<p><strong>‚Ä¢ Complexit√© quadratique</strong> : ';
            html += lang === 'fr' ? 'Co√ªt computationnel cro√Æt comme n¬≤ avec la longueur du texte' : 'Computational cost grows as n¬≤ with text length';
            html += '</p>';
            html += '<p><strong>‚Ä¢ Attention dispers√©e</strong> : ';
            html += lang === 'fr' ? 'Dans de longs textes, l\'attention peut se diluer' : 'In long texts, attention can become diluted';
            html += '</p>';
            html += '<p><strong>‚Ä¢ Biais positionnels</strong> : ';
            html += lang === 'fr' ? 'Tendance √† favoriser les mots r√©cents ou en d√©but de phrase' : 'Tendency to favor recent words or sentence beginnings';
            html += '</p>';
            html += '</div></div>';
            html += '</div>';

            html += '</div>';
            return html;
        }

        function renderArchitectureSection() {
            var lang = state.lang;
            var layers = lang === 'fr' ? [
                {name: 'Couche d\'Embedding', desc: 'Conversion mots ‚Üí vecteurs de 12,288 dimensions', detail: 'Chaque token devient un point dans un espace vectoriel gigantesque'},
                {name: 'Encodage Positionnel', desc: 'Ajout d\'informations sur la position des mots', detail: 'Permet au mod√®le de distinguer "chat mange souris" de "souris mange chat"'},
                {name: 'Couche Attention 1', desc: '96 t√™tes analysent simultan√©ment les relations', detail: 'Chaque t√™te se sp√©cialise dans un type de relation diff√©rent'},
                {name: 'R√©seau Feed-Forward 1', desc: 'Traitement des patterns (expansion 4x vers 49,152 dims)', detail: 'Activation de "neurones" sp√©cialis√©s dans certains concepts'},
                {name: 'Couche Attention 2', desc: '96 t√™tes - analyse plus abstraite', detail: 'Combine les insights de la couche pr√©c√©dente'},
                {name: 'R√©seau Feed-Forward 2', desc: 'Traitement de patterns plus complexes', detail: 'Reconnaissance de structures linguistiques de haut niveau'},
                {name: '... R√©p√©t√© x118', desc: 'Jusqu\'√† 120 couches au total (GPT-4)', detail: 'Chaque couche ajoute une abstraction suppl√©mentaire'},
                {name: 'Normalisation Finale', desc: 'Pr√©paration pour la sortie', detail: 'Stabilise les activations avant la pr√©diction'},
                {name: 'T√™te de Sortie', desc: 'Probabilit√©s sur ~100k tokens possibles', detail: 'Transformation en distribution de probabilit√© sur le vocabulaire'}
            ] : [
                {name: 'Embedding Layer', desc: 'Words ‚Üí 12,288-dimensional vectors', detail: 'Each token becomes a point in a gigantic vector space'},
                {name: 'Positional Encoding', desc: 'Add word position information', detail: 'Allows model to distinguish "cat eats mouse" from "mouse eats cat"'},
                {name: 'Attention Layer 1', desc: '96 heads simultaneously analyze relationships', detail: 'Each head specializes in a different type of relationship'},
                {name: 'Feed-Forward Network 1', desc: 'Pattern processing (4x expansion to 49,152 dims)', detail: 'Activation of "neurons" specialized in certain concepts'},
                {name: 'Attention Layer 2', desc: '96 heads - more abstract analysis', detail: 'Combines insights from previous layer'},
                {name: 'Feed-Forward Network 2', desc: 'More complex pattern processing', detail: 'Recognition of high-level linguistic structures'},
                {name: '... Repeated x118', desc: 'Up to 120 layers total (GPT-4)', detail: 'Each layer adds an additional abstraction'},
                {name: 'Final Normalization', desc: 'Preparation for output', detail: 'Stabilizes activations before prediction'},
                {name: 'Output Head', desc: 'Probabilities over ~100k possible tokens', detail: 'Transformation into probability distribution over vocabulary'}
            ];

            var models = lang === 'fr' ? [
                {model: 'GPT-4', params: '~1.8T', layers: '120+', context: '128k', training: '13T tokens', strength: 'Raisonnement, analyse complexe'},
                {model: 'Claude 3.5 Sonnet', params: 'Non divulgu√©', layers: '~100', context: '200k', training: 'Non divulgu√©', strength: 'Conversations longues, s√©curit√©'},
                {model: 'LLaMA 3.1 405B', params: '405B', layers: '126', context: '128k', training: '15T tokens', strength: 'Open source, efficacit√©'},
                {model: 'Gemini 1.5 Pro', params: 'Non divulgu√©', layers: '~120', context: '1M', training: 'Non divulgu√©', strength: 'Contexte massif, multimodal'}
            ] : [
                {model: 'GPT-4', params: '~1.8T', layers: '120+', context: '128k', training: '13T tokens', strength: 'Reasoning, complex analysis'},
                {model: 'Claude 3.5 Sonnet', params: 'Undisclosed', layers: '~100', context: '200k', training: 'Undisclosed', strength: 'Long conversations, safety'},
                {model: 'LLaMA 3.1 405B', params: '405B', layers: '126', context: '128k', training: '15T tokens', strength: 'Open source, efficiency'},
                {model: 'Gemini 1.5 Pro', params: 'Undisclosed', layers: '~120', context: '1M', training: 'Undisclosed', strength: 'Massive context, multimodal'}
            ];

            var html = '<div class="space-y-6 animate-in"><div class="bg-slate-800/50 backdrop-blur rounded-xl p-4 md:p-6 border border-slate-700">';
            html += '<h2 class="text-xl md:text-2xl font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-green-400">üèóÔ∏è</span>';
            html += lang === 'fr' ? '4. Architecture Transformer : L\'Empilement Magique' : '4. Transformer Architecture: The Magic Stack';
            html += '</h2>';

            html += '<p class="text-slate-300 mb-6 text-sm md:text-base">';
            html += lang === 'fr' ? 
                "L'architecture Transformer est le c≈ìur r√©volutionnaire des LLM modernes. Imaginez un gratte-ciel de 120 √©tages o√π chaque √©tage sp√©cialis√© transforme progressivement le texte brut en compr√©hension profonde. Chaque couche ajoute une abstraction suppl√©mentaire, passant de la syntaxe de base aux concepts complexes." : 
                "The Transformer architecture is the revolutionary heart of modern LLMs. Imagine a 120-story skyscraper where each specialized floor progressively transforms raw text into deep understanding. Each layer adds an additional abstraction, moving from basic syntax to complex concepts.";
            html += '</p>';

            // Nouvelle section explicative conceptuelle
            html += '<div class="bg-green-900/30 border border-green-500/30 rounded-lg p-6 mb-6">';
            html += '<h3 class="text-lg font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-cyan-400">üß±</span>';
            html += lang === 'fr' ? 'Le principe de l\'empilement progressif' : 'The principle of progressive stacking';
            html += '</h3>';
            html += '<p class="text-slate-300 mb-4 text-sm md:text-base">';
            html += lang === 'fr' ? 
                "Chaque couche Transformer fonctionne comme un filtre intelligent qui enrichit la repr√©sentation du texte. C'est un processus hi√©rarchique de compr√©hension :" :
                "Each Transformer layer works like an intelligent filter that enriches the text representation. It's a hierarchical understanding process:";
            html += '</p>';
            
            var hierarchy = lang === 'fr' ? [
                {level: 'Couches 1-20', focus: 'Syntaxe et grammaire', desc: 'Reconnaissance des structures grammaticales de base', examples: ['Sujet-verbe-objet', 'Accords grammaticaux', 'Types de mots']},
                {level: 'Couches 21-60', focus: 'S√©mantique locale', desc: 'Compr√©hension du sens des groupes de mots', examples: ['Expressions idiomatiques', 'M√©taphores simples', 'Relations causales']},
                {level: 'Couches 61-100', focus: 'Coh√©rence globale', desc: 'Vision d\'ensemble du texte et contexte', examples: ['Th√®me principal', 'Transitions logiques', 'R√©f√©rences crois√©es']},
                {level: 'Couches 101-120', focus: 'Raisonnement abstrait', desc: 'Inf√©rences complexes et g√©n√©ralisation', examples: ['Analogies sophistiqu√©es', 'Implications logiques', 'Cr√©ativit√© conceptuelle']}
            ] : [
                {level: 'Layers 1-20', focus: 'Syntax and grammar', desc: 'Recognition of basic grammatical structures', examples: ['Subject-verb-object', 'Grammatical agreements', 'Word types']},
                {level: 'Layers 21-60', focus: 'Local semantics', desc: 'Understanding meaning of word groups', examples: ['Idiomatic expressions', 'Simple metaphors', 'Causal relations']},
                {level: 'Layers 61-100', focus: 'Global coherence', desc: 'Overall text vision and context', examples: ['Main theme', 'Logical transitions', 'Cross-references']},
                {level: 'Layers 101-120', focus: 'Abstract reasoning', desc: 'Complex inferences and generalization', examples: ['Sophisticated analogies', 'Logical implications', 'Conceptual creativity']}
            ];

            html += '<div class="space-y-3">';
            for (var i = 0; i < hierarchy.length; i++) {
                var colors = ['from-red-500 to-orange-500', 'from-blue-500 to-purple-500', 'from-green-500 to-teal-500', 'from-purple-500 to-pink-500'];
                html += '<div class="bg-slate-800/50 rounded-lg p-4 border-l-4 border-gradient-to-b ' + colors[i] + '">';
                html += '<div class="flex items-start gap-4">';
                html += '<div class="bg-gradient-to-r ' + colors[i] + ' text-white px-3 py-1 rounded-full text-xs font-bold">' + hierarchy[i].level + '</div>';
                html += '<div class="flex-1">';
                html += '<h4 class="font-bold text-white mb-1">' + hierarchy[i].focus + '</h4>';
                html += '<p class="text-xs text-slate-300 mb-2">' + hierarchy[i].desc + '</p>';
                html += '<div class="flex flex-wrap gap-1">';
                for (var j = 0; j < hierarchy[i].examples.length; j++) {
                    html += '<span class="text-xs bg-slate-700 px-2 py-1 rounded text-slate-400">' + hierarchy[i].examples[j] + '</span>';
                }
                html += '</div></div></div></div>';
            }
            html += '</div></div>';

            // Visualisation de l'architecture
            html += '<div class="bg-slate-900/50 rounded-lg p-6">';
            html += '<h3 class="text-lg font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-yellow-400">üèóÔ∏è</span>';
            html += lang === 'fr' ? 'Anatomie d\'une couche Transformer' : 'Anatomy of a Transformer layer';
            html += '</h3>';
            html += '<div class="flex flex-col gap-3">';
            for (var i = 0; i < layers.length; i++) {
                var gradients = [
                    'from-purple-600 to-blue-600',
                    'from-blue-600 to-cyan-600', 
                    'from-cyan-600 to-green-600',
                    'from-green-600 to-yellow-600',
                    'from-yellow-600 to-orange-600',
                    'from-orange-600 to-red-600',
                    'from-red-600 to-pink-600',
                    'from-pink-600 to-purple-600',
                    'from-purple-600 to-indigo-600'
                ];
                var gradient = gradients[i % gradients.length];
                
                html += '<div class="group hover:scale-105 transition-all duration-300">';
                html += '<div class="bg-gradient-to-r ' + gradient + ' rounded-lg p-4 shadow-lg">';
                html += '<div class="flex items-center justify-between">';
                html += '<div class="flex-1">';
                html += '<div class="font-bold text-lg text-white">' + layers[i].name + '</div>';
                html += '<div class="text-sm text-slate-100 mb-2">' + layers[i].desc + '</div>';
                html += '<div class="text-xs text-slate-200 opacity-80">' + layers[i].detail + '</div>';
                html += '</div>';
                html += '<div class="text-3xl opacity-50">‚öôÔ∏è</div>';
                html += '</div></div>';
                if (i < layers.length - 1) {
                    html += '<div class="flex justify-center py-1">';
                    html += '<div class="text-slate-500 text-xl">‚Üì</div>';
                    html += '</div>';
                }
                html += '</div>';
            }
            html += '</div></div>';

            // M√©triques d√©taill√©es
            html += '<div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">';
            html += '<div class="bg-green-900/30 border border-green-500/30 rounded-lg p-4">';
            html += '<h4 class="text-sm font-bold mb-3 flex items-center gap-2">';
            html += '<span class="text-green-400">üìä</span>';
            html += lang === 'fr' ? 'M√©triques cl√©s (GPT-4)' : 'Key metrics (GPT-4)';
            html += '</h4>';
            html += '<div class="space-y-2 text-xs">';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Param√®tres totaux' : 'Total parameters') + ':</span>';
            html += '<span class="font-bold text-green-400">~1.8T</span>';
            html += '</div>';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Couches empil√©es' : 'Stacked layers') + ':</span>';
            html += '<span class="font-bold text-blue-400">120+</span>';
            html += '</div>';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'T√™tes d\'attention/couche' : 'Attention heads/layer') + ':</span>';
            html += '<span class="font-bold text-purple-400">96</span>';
            html += '</div>';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Dimensions embeddings' : 'Embedding dimensions') + ':</span>';
            html += '<span class="font-bold text-cyan-400">12,288</span>';
            html += '</div>';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Taille vocabulaire' : 'Vocabulary size') + ':</span>';
            html += '<span class="font-bold text-orange-400">~100k</span>';
            html += '</div>';
            html += '</div></div>';

            html += '<div class="bg-blue-900/30 border border-blue-500/30 rounded-lg p-4">';
            html += '<h4 class="text-sm font-bold mb-3 flex items-center gap-2">';
            html += '<span class="text-blue-400">‚ö°</span>';
            html += lang === 'fr' ? 'Performance & co√ªts' : 'Performance & costs';
            html += '</h4>';
            html += '<div class="space-y-2 text-xs">';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Vitesse g√©n√©ration' : 'Generation speed') + ':</span>';
            html += '<span class="font-bold text-green-400">20-50 tok/s</span>';
            html += '</div>';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Calcul par token' : 'Compute per token') + ':</span>';
            html += '<span class="font-bold text-yellow-400">~1 petaflop</span>';
            html += '</div>';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Co√ªt formation' : 'Training cost') + ':</span>';
            html += '<span class="font-bold text-red-400">~$150M</span>';
            html += '</div>';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Co√ªt/1k tokens' : 'Cost/1k tokens') + ':</span>';
            html += '<span class="font-bold text-orange-400">$0.01-0.03</span>';
            html += '</div>';
            html += '</div></div>';

            html += '<div class="bg-purple-900/30 border border-purple-500/30 rounded-lg p-4">';
            html += '<h4 class="text-sm font-bold mb-3 flex items-center gap-2">';
            html += '<span class="text-purple-400">üöÄ</span>';
            html += lang === 'fr' ? 'Capacit√©s contextuelles' : 'Contextual capabilities';
            html += '</h4>';
            html += '<div class="space-y-2 text-xs">';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Fen√™tre de contexte' : 'Context window') + ':</span>';
            html += '<span class="font-bold text-cyan-400">128k tokens</span>';
            html += '</div>';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? '√âquivalent pages' : 'Equivalent pages') + ':</span>';
            html += '<span class="font-bold text-green-400">~300 pages</span>';
            html += '</div>';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Langues support√©es' : 'Supported languages') + ':</span>';
            html += '<span class="font-bold text-yellow-400">100+</span>';
            html += '</div>';
            html += '<div class="flex justify-between">';
            html += '<span class="text-slate-400">' + (lang === 'fr' ? 'Domaines d\'expertise' : 'Expertise domains') + ':</span>';
            html += '<span class="font-bold text-pink-400">' + (lang === 'fr' ? 'Illimit√©s' : 'Unlimited') + '</span>';
            html += '</div>';
            html += '</div></div>';
            html += '</div>';

            // Comparaison des mod√®les am√©lior√©e
            html += '<div class="mt-6 bg-slate-900/50 rounded-lg p-6">';
            html += '<h4 class="text-lg font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-orange-400">üîÑ</span>';
            html += lang === 'fr' ? 'Panorama des g√©ants actuels' : 'Current giants landscape';
            html += '</h4>';
            html += '<div class="overflow-x-auto">';
            html += '<table class="w-full text-sm">';
            html += '<thead><tr class="border-b border-slate-700 text-left">';
            html += '<th class="py-3 px-2 font-bold text-slate-300">' + (lang === 'fr' ? 'Mod√®le' : 'Model') + '</th>';
            html += '<th class="py-3 px-2 font-bold text-slate-300">' + (lang === 'fr' ? 'Param√®tres' : 'Parameters') + '</th>';
            html += '<th class="py-3 px-2 font-bold text-slate-300">' + (lang === 'fr' ? 'Couches' : 'Layers') + '</th>';
            html += '<th class="py-3 px-2 font-bold text-slate-300">' + (lang === 'fr' ? 'Contexte' : 'Context') + '</th>';
            html += '<th class="py-3 px-2 font-bold text-slate-300">' + (lang === 'fr' ? 'Entra√Ænement' : 'Training') + '</th>';
            html += '<th class="py-3 px-2 font-bold text-slate-300">' + (lang === 'fr' ? 'Points forts' : 'Strengths') + '</th>';
            html += '</tr></thead><tbody>';
            for (var i = 0; i < models.length; i++) {
                html += '<tr class="border-b border-slate-800 hover:bg-slate-800/30 transition-colors">';
                html += '<td class="py-3 px-2 font-bold text-cyan-400">' + models[i].model + '</td>';
                html += '<td class="py-3 px-2 text-green-400">' + models[i].params + '</td>';
                html += '<td class="py-3 px-2 text-blue-400">' + models[i].layers + '</td>';
                html += '<td class="py-3 px-2 text-purple-400">' + models[i].context + '</td>';
                html += '<td class="py-3 px-2 text-yellow-400">' + models[i].training + '</td>';
                html += '<td class="py-3 px-2 text-slate-300 text-xs">' + models[i].strength + '</td>';
                html += '</tr>';
            }
            html += '</tbody></table></div></div>';

            html += '</div></div>';
            return html;
        }

        function renderTrainingSection() {
            var lang = state.lang;
            var phases = lang === 'fr' ? [
                {
                    phase: 'Phase 1: Pre-training (Apprentissage Fondamental)',
                    duration: '3-6 mois intensifs',
                    data: '10-15 trillions de tokens',
                    task: 'Pr√©dire le mot suivant sur Internet entier',
                    cost: '$50-100M (GPU + √©lectricit√©)',
                    example: 'Texte brut: "Paris est la capitale de..." ‚Üí Le mod√®le apprend: "France" (et 13 trillion d\'autres pr√©dictions)',
                    detail: 'Le mod√®le "lit" l\'√©quivalent de 10 millions de livres, d√©veloppant une compr√©hension statistique du langage',
                    gpu: '10,000-25,000 GPU A100/H100',
                    power: '~50 MW (ville de 50,000 habitants)'
                },
                {
                    phase: 'Phase 2: Supervised Fine-Tuning (SFT - Politesse)',
                    duration: '2-4 semaines cibl√©es',
                    data: '~100,000 exemples de haute qualit√©',
                    task: 'Apprendre √† suivre les instructions humaines',
                    cost: '$1-5M (raffinement precision)',
                    example: 'Q: "Explique la photosynth√®se simplement" ‚Üí R√©ponse r√©dig√©e et valid√©e par des experts humains',
                    detail: 'Transformation d\'un "pr√©dicteur de texte" en "assistant conversationnel"',
                    gpu: '100-1,000 GPU A100',
                    power: '~1-5 MW'
                },
                {
                    phase: 'Phase 3: RLHF (Reinforcement Learning from Human Feedback)',
                    duration: '2-8 semaines d\'optimisation',
                    data: '~10,000-50,000 comparaisons humaines',
                    task: 'Optimiser selon les pr√©f√©rences humaines',
                    cost: '$2-10M (+ co√ªt annotateurs)',
                    example: 'Mod√®le g√©n√®re 4 r√©ponses ‚Üí Humains classent la meilleure ‚Üí Mod√®le ajuste ses probabilit√©s',
                    detail: 'Alignement sur les valeurs humaines : v√©racit√©, utilit√©, s√©curit√©',
                    gpu: '500-2,000 GPU A100',
                    power: '~2-8 MW'
                }
            ] : [
                {
                    phase: 'Phase 1: Pre-training (Fundamental Learning)',
                    duration: '3-6 intensive months',
                    data: '10-15 trillion tokens',
                    task: 'Predict next word on entire Internet',
                    cost: '$50-100M (GPU + electricity)',
                    example: 'Raw text: "Paris is the capital of..." ‚Üí Model learns: "France" (and 13 trillion other predictions)',
                    detail: 'Model "reads" equivalent of 10 million books, developing statistical language understanding',
                    gpu: '10,000-25,000 A100/H100 GPUs',
                    power: '~50 MW (city of 50,000 inhabitants)'
                },
                {
                    phase: 'Phase 2: Supervised Fine-Tuning (SFT - Politeness)',
                    duration: '2-4 targeted weeks',
                    data: '~100,000 high-quality examples',
                    task: 'Learn to follow human instructions',
                    cost: '$1-5M (precision refinement)',
                    example: 'Q: "Explain photosynthesis simply" ‚Üí Response written and validated by human experts',
                    detail: 'Transformation from "text predictor" to "conversational assistant"',
                    gpu: '100-1,000 A100 GPUs',
                    power: '~1-5 MW'
                },
                {
                    phase: 'Phase 3: RLHF (Reinforcement Learning from Human Feedback)',
                    duration: '2-8 optimization weeks',
                    data: '~10,000-50,000 human comparisons',
                    task: 'Optimize according to human preferences',
                    cost: '$2-10M (+ annotator costs)',
                    example: 'Model generates 4 responses ‚Üí Humans rank the best ‚Üí Model adjusts its probabilities',
                    detail: 'Alignment with human values: truthfulness, helpfulness, safety',
                    gpu: '500-2,000 A100 GPUs',
                    power: '~2-8 MW'
                }
            ];

            var html = '<div class="space-y-6 animate-in"><div class="bg-slate-800/50 backdrop-blur rounded-xl p-4 md:p-6 border border-slate-700">';
            html += '<h2 class="text-xl md:text-2xl font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-orange-400">üìà</span>';
            html += lang === 'fr' ? "5. Entra√Ænement : La M√©tamorphose en 3 Actes" : "5. Training: The 3-Act Metamorphosis";
            html += '</h2>';

            html += '<p class="text-slate-300 mb-6 text-sm md:text-base">';
            html += lang === 'fr' ? 
                "Former un LLM, c'est comme √©lever un enfant prodige en acc√©l√©r√©. Le processus suit 3 phases distinctes qui transforment progressivement un r√©seau de neurones vierge en assistant intelligent. Chaque phase a son r√¥le, ses co√ªts astronomiques et ses d√©fis techniques uniques." :
                "Training an LLM is like raising a child prodigy in fast-forward. The process follows 3 distinct phases that progressively transform a blank neural network into an intelligent assistant. Each phase has its role, astronomical costs, and unique technical challenges.";
            html += '</p>';

            // Timeline visuelle
            html += '<div class="rounded-lg p-4 sm:p-6 mb-6 mobile-p-4" style="background: linear-gradient(to right, rgba(255, 107, 53, 0.3), rgba(233, 30, 99, 0.3)); border: 1px solid rgba(255, 107, 53, 0.3);">';
            html += '<h3 class="text-base sm:text-lg font-bold mb-4 flex items-center gap-2 mobile-text-base">';
            html += '<span style="color: #ffc107;">‚è±Ô∏è</span>';
            html += lang === 'fr' ? 'Timeline compl√®te : 6-12 mois pour cr√©er une IA' : 'Complete timeline: 6-12 months to create an AI';
            html += '</h3>';
            
            // Version mobile (verticale) et desktop (horizontale)
            html += '<div class="block sm:hidden">'; // Version mobile verticale
            var mobileSteps = [
                {name: lang === 'fr' ? 'D√©but' : 'Start', desc: lang === 'fr' ? 'R√©seau vierge' : 'Blank network', color: '#ff6b35'},
                {name: 'Pre-training', desc: '3-6 ' + (lang === 'fr' ? 'mois' : 'months'), color: '#e91e63'},
                {name: 'SFT', desc: '2-4 ' + (lang === 'fr' ? 'semaines' : 'weeks'), color: '#8e44ad'},
                {name: 'RLHF', desc: '2-8 ' + (lang === 'fr' ? 'semaines' : 'weeks'), color: '#9c27b0'},
                {name: lang === 'fr' ? 'Production' : 'Production', desc: 'ChatGPT!', color: '#ff6b35'}
            ];
            
            for (var i = 0; i < mobileSteps.length; i++) {
                html += '<div class="flex items-center mb-3">';
                html += '<div class="w-4 h-4 rounded-full mr-3 flex-shrink-0" style="background-color: ' + mobileSteps[i].color + ';"></div>';
                html += '<div class="flex-1">';
                html += '<div class="font-bold text-sm" style="color: ' + mobileSteps[i].color + ';">' + mobileSteps[i].name + '</div>';
                html += '<div class="text-xs" style="color: #a0a0a0;">' + mobileSteps[i].desc + '</div>';
                html += '</div></div>';
                if (i < mobileSteps.length - 1) {
                    html += '<div class="w-0.5 h-4 ml-2 mb-2" style="background-color: ' + mobileSteps[i].color + '; opacity: 0.5;"></div>';
                }
            }
            html += '</div>';
            
            // Version desktop (horizontale)
            html += '<div class="hidden sm:flex items-center justify-between text-sm">';
            html += '<div class="text-center">';
            html += '<div class="w-4 h-4 rounded-full mx-auto mb-2" style="background: linear-gradient(to right, #ff6b35, #e91e63);"></div>';
            html += '<div class="font-bold" style="color: #ff6b35;">' + (lang === 'fr' ? 'D√©but' : 'Start') + '</div>';
            html += '<div class="text-xs" style="color: #a0a0a0;">' + (lang === 'fr' ? 'R√©seau vierge' : 'Blank network') + '</div>';
            html += '</div>';
            html += '<div class="flex-1 h-1 mx-4" style="background: linear-gradient(to right, #ff6b35, #e91e63);"></div>';
            html += '<div class="text-center">';
            html += '<div class="w-4 h-4 rounded-full mx-auto mb-2" style="background: linear-gradient(to right, #e91e63, #8e44ad);"></div>';
            html += '<div class="font-bold" style="color: #e91e63;">' + (lang === 'fr' ? 'Pre-training' : 'Pre-training') + '</div>';
            html += '<div class="text-xs" style="color: #a0a0a0;">3-6 ' + (lang === 'fr' ? 'mois' : 'months') + '</div>';
            html += '</div>';
            html += '<div class="flex-1 h-1 mx-4" style="background: linear-gradient(to right, #8e44ad, #9c27b0);"></div>';
            html += '<div class="text-center">';
            html += '<div class="w-4 h-4 rounded-full mx-auto mb-2" style="background: linear-gradient(to right, #9c27b0, #ff6b35);"></div>';
            html += '<div class="font-bold" style="color: #8e44ad;">SFT</div>';
            html += '<div class="text-xs" style="color: #a0a0a0;">2-4 ' + (lang === 'fr' ? 'semaines' : 'weeks') + '</div>';
            html += '</div>';
            html += '<div class="flex-1 h-1 mx-4" style="background: linear-gradient(to right, #ff6b35, #e91e63);"></div>';
            html += '<div class="text-center">';
            html += '<div class="w-4 h-4 rounded-full mx-auto mb-2" style="background: linear-gradient(to right, #e91e63, #9c27b0);"></div>';
            html += '<div class="font-bold" style="color: #9c27b0;">RLHF</div>';
            html += '<div class="text-xs" style="color: #a0a0a0;">2-8 ' + (lang === 'fr' ? 'semaines' : 'weeks') + '</div>';
            html += '</div>';
            html += '<div class="flex-1 h-1 mx-4" style="background: linear-gradient(to right, #9c27b0, #ff6b35);"></div>';
            html += '<div class="text-center">';
            html += '<div class="w-4 h-4 rounded-full mx-auto mb-2" style="background: linear-gradient(to right, #ff6b35, #e91e63);"></div>';
            html += '<div class="font-bold" style="color: #ff6b35;">' + (lang === 'fr' ? 'Production' : 'Production') + '</div>';
            html += '<div class="text-xs" style="color: #a0a0a0;">ChatGPT!</div>';
            html += '</div>';
            html += '</div></div>';

            // Phases d√©taill√©es
            html += '<div class="space-y-6">';
            for (var i = 0; i < phases.length; i++) {
                var colors = [
                    {bg: 'from-blue-900/30 to-purple-900/30', border: 'border-blue-500/30', accent: 'text-blue-400'},
                    {bg: 'from-green-900/30 to-teal-900/30', border: 'border-green-500/30', accent: 'text-green-400'},
                    {bg: 'from-orange-900/30 to-red-900/30', border: 'border-orange-500/30', accent: 'text-orange-400'}
                ];
                var color = colors[i];

                html += '<div class="bg-gradient-to-br ' + color.bg + ' ' + color.border + ' border rounded-xl p-6">';
                html += '<div class="flex items-start gap-4 mb-4">';
                html += '<div class="w-10 h-10 bg-gradient-to-br from-orange-500 to-red-500 rounded-full flex items-center justify-center font-bold text-white text-lg">' + (i + 1) + '</div>';
                html += '<div class="flex-1">';
                html += '<h3 class="text-xl font-bold ' + color.accent + ' mb-2">' + phases[i].phase + '</h3>';
                html += '<p class="text-slate-300 text-sm mb-4">' + phases[i].detail + '</p>';
                html += '</div></div>';

                // M√©triques en grille
                html += '<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">';
                var metrics = [
                    {label: lang === 'fr' ? 'Dur√©e' : 'Duration', value: phases[i].duration, icon: '‚è±Ô∏è'},
                    {label: lang === 'fr' ? 'Donn√©es' : 'Data', value: phases[i].data, icon: 'üìä'},
                    {label: lang === 'fr' ? 'GPU' : 'GPUs', value: phases[i].gpu, icon: 'üñ•Ô∏è'},
                    {label: lang === 'fr' ? 'Co√ªt' : 'Cost', value: phases[i].cost, icon: 'üí∞'}
                ];

                for (var j = 0; j < metrics.length; j++) {
                    html += '<div class="bg-slate-800/50 rounded-lg p-3 text-center">';
                    html += '<div class="text-lg mb-1">' + metrics[j].icon + '</div>';
                    html += '<div class="text-xs text-slate-400 mb-1">' + metrics[j].label + '</div>';
                    html += '<div class="text-sm font-bold text-white">' + metrics[j].value + '</div>';
                    html += '</div>';
                }
                html += '</div>';

                // T√¢che et exemple
                html += '<div class="space-y-3">';
                html += '<div class="bg-slate-800/50 rounded-lg p-4 border-l-4 ' + color.border.replace('border-', 'border-l-') + '">';
                html += '<div class="font-bold text-sm ' + color.accent + ' mb-2">';
                html += 'üéØ ' + (lang === 'fr' ? 'T√¢che principale' : 'Main task') + ' : ' + phases[i].task;
                html += '</div>';
                html += '<div class="text-xs text-slate-300">' + phases[i].example + '</div>';
                html += '</div>';

                // D√©tails techniques
                html += '<div class="bg-slate-900/50 rounded-lg p-4">';
                html += '<div class="flex items-center gap-2 mb-2">';
                html += '<span class="text-yellow-400">‚ö°</span>';
                html += '<span class="font-bold text-sm">' + (lang === 'fr' ? 'Consommation √©lectrique' : 'Power consumption') + ' : ' + phases[i].power + '</span>';
                html += '</div>';
                html += '<div class="text-xs text-slate-400">';
                if (i === 0) {
                    html += lang === 'fr' ? 
                        '√âquivaut √† la consommation d\'une ville moyenne pendant toute la dur√©e d\'entra√Ænement' :
                        'Equivalent to a medium city\'s consumption throughout training duration';
                } else if (i === 1) {
                    html += lang === 'fr' ? 
                        'Phase plus courte mais n√©cessitant des donn√©es de tr√®s haute qualit√©' :
                        'Shorter phase but requiring very high quality data';
                } else {
                    html += lang === 'fr' ? 
                        'Optimisation fine n√©cessitant des milliers d\'annotateurs humains qualifi√©s' :
                        'Fine optimization requiring thousands of qualified human annotators';
                }
                html += '</div></div>';
                html += '</div>';
                html += '</div>';
            }
            html += '</div>';

            // Synth√®se finale avec comparaisons
            html += '<div class="mt-8 space-y-4">';
            html += '<div class="bg-gradient-to-r from-orange-900/40 to-red-900/40 border border-orange-500/30 rounded-lg p-6">';
            html += '<h3 class="text-lg font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-orange-400">üíé</span>';
            html += lang === 'fr' ? 'Le co√ªt astronomique de l\'intelligence artificielle' : 'The astronomical cost of artificial intelligence';
            html += '</h3>';
            html += '<div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">';
            
            var comparisons = lang === 'fr' ? [
                {title: 'Co√ªt total GPT-4', amount: '~$150M', comparison: 'Plus cher qu\'un film blockbuster'},
                {title: 'Consommation √©lectrique', amount: '~50 GWh', comparison: '√âquivaut √† 15,000 foyers/an'},
                {title: 'Donn√©es d\'entra√Ænement', amount: '13 Trillion tokens', comparison: '500 ans de lecture humaine'}
            ] : [
                {title: 'GPT-4 total cost', amount: '~$150M', comparison: 'More expensive than a blockbuster movie'},
                {title: 'Power consumption', amount: '~50 GWh', comparison: 'Equivalent to 15,000 homes/year'},
                {title: 'Training data', amount: '13 Trillion tokens', comparison: '500 years of human reading'}
            ];

            for (var i = 0; i < comparisons.length; i++) {
                html += '<div class="text-center">';
                html += '<div class="text-2xl font-bold text-orange-300 mb-1">' + comparisons[i].amount + '</div>';
                html += '<div class="font-bold text-white mb-1">' + comparisons[i].title + '</div>';
                html += '<div class="text-xs text-slate-400">' + comparisons[i].comparison + '</div>';
                html += '</div>';
            }
            html += '</div>';

            html += '<div class="mt-4 text-center">';
            html += '<p class="text-sm text-slate-300 italic">';
            html += lang === 'fr' ? 
                "üí° Et pourtant, une fois entra√Æn√©, GPT-4 peut r√©pondre √† vos questions pour quelques centimes..." :
                "üí° And yet, once trained, GPT-4 can answer your questions for a few cents...";
            html += '</p></div></div>';
            
            // Analogie finale
            html += '<div class="bg-gradient-to-r from-purple-900/30 to-blue-900/30 border border-purple-500/30 rounded-lg p-6">';
            html += '<h4 class="text-lg font-bold mb-3 flex items-center gap-2">';
            html += '<span class="text-purple-400">üé≠</span>';
            html += lang === 'fr' ? 'Analogie : Former un LLM comme √©lever un g√©nie' : 'Analogy: Training an LLM like raising a genius';
            html += '</h4>';
            html += '<div class="space-y-3 text-sm text-slate-300">';
            html += '<p><strong>' + (lang === 'fr' ? 'Pre-training' : 'Pre-training') + '</strong> = ';
            html += lang === 'fr' ? 
                'L\'enfant lit tous les livres de toutes les biblioth√®ques du monde (apprentissage g√©n√©ral)' :
                'Child reads every book from every library in the world (general learning)';
            html += '</p>';
            html += '<p><strong>SFT</strong> = ';
            html += lang === 'fr' ? 
                'Cours particuliers avec les meilleurs professeurs (apprentissage des bonnes mani√®res)' :
                'Private lessons with the best teachers (learning good manners)';
            html += '</p>';
            html += '<p><strong>RLHF</strong> = ';
            html += lang === 'fr' ? 
                'Feedback constant des parents pour ajuster le comportement (alignement moral)' :
                'Constant feedback from parents to adjust behavior (moral alignment)';
            html += '</p>';
            html += '</div></div>';
            html += '</div>';

            html += '</div></div>';
            return html;
        }

        function renderLimitsSection() {
            var lang = state.lang;

            var html = '<div class="space-y-6 animate-in"><div class="bg-slate-800/50 backdrop-blur rounded-xl p-4 md:p-6 border border-slate-700">';
            html += '<h2 class="text-xl md:text-2xl font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-red-400">‚ö†Ô∏è</span>';
            html += lang === 'fr' ? '6. Limitations & Capacit√©s √âmergentes : L\'√âquilibre du Possible' : '6. Limitations & Emergent Abilities: The Balance of Possibility';
            html += '</h2>';

            html += '<p class="text-slate-300 mb-6 text-sm md:text-base">';
            html += lang === 'fr' ? 
                "Les LLM sont des merveilles technologiques aux capacit√©s stup√©fiantes, mais ils restent des outils imparfaits avec des limitations fondamentales importantes. Comprendre ces limites est crucial pour les utiliser efficacement et de mani√®re responsable." :
                "LLMs are technological marvels with stunning capabilities, but they remain imperfect tools with significant fundamental limitations. Understanding these limits is crucial for using them effectively and responsibly.";
            html += '</p>';

            // Section limitations d√©taill√©es
            html += '<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">';
            
            // Limitations
            html += '<div class="bg-gradient-to-br from-red-900/30 to-orange-900/30 border border-red-500/30 rounded-xl p-6">';
            html += '<h3 class="text-xl font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-red-400">‚ö†Ô∏è</span>';
            html += lang === 'fr' ? 'Limitations Fondamentales' : 'Fundamental Limitations';
            html += '</h3>';

            var limitations = lang === 'fr' ? [
                {
                    title: 'üé≠ Hallucinations & Confabulation',
                    desc: 'Invention de faits plausibles mais faux',
                    example: '"En 1987, Napol√©on a invent√© le t√©l√©phone portable"',
                    why: 'Le mod√®le optimise pour la plausibilit√©, pas la v√©racit√©',
                    severity: 'Critique'
                },
                {
                    title: 'ü§ñ Absence de vraie compr√©hension',
                    desc: 'Manipulation de patterns statistiques, pas de conscience',
                    example: 'Peut expliquer la conscience sans jamais la ressentir',
                    why: 'Architecture bas√©e sur la pr√©diction de tokens',
                    severity: 'Philosophique'
                },
                {
                    title: 'üìÖ Connaissances fig√©es dans le temps',
                    desc: 'Date de coupure des donn√©es d\'entra√Ænement',
                    example: 'GPT-4 ne conna√Æt pas les √©v√©nements apr√®s avril 2023',
                    why: 'Pas de mise √† jour continue des connaissances',
                    severity: 'Pratique'
                },
                {
                    title: '‚öñÔ∏è Biais soci√©taux amplifi√©s',
                    desc: 'Reproduction des biais pr√©sents dans les donn√©es',
                    example: 'Associations st√©r√©otyp√©es professions/genres',
                    why: 'Apprentissage sur du contenu humain imparfait',
                    severity: '√âthique'
                },
                {
                    title: 'üî¢ Faiblesse en calcul num√©rique',
                    desc: 'Erreurs sur des op√©rations math√©matiques complexes',
                    example: 'Peut se tromper sur 847 √ó 293 = ?',
                    why: 'Architecture non optimis√©e pour les calculs pr√©cis',
                    severity: 'Technique'
                }
            ] : [
                {
                    title: 'üé≠ Hallucinations & Confabulation',
                    desc: 'Invention of plausible but false facts',
                    example: '"In 1987, Napoleon invented the mobile phone"',
                    why: 'Model optimizes for plausibility, not truthfulness',
                    severity: 'Critical'
                },
                {
                    title: 'ü§ñ No true understanding',
                    desc: 'Statistical pattern manipulation, no consciousness',
                    example: 'Can explain consciousness without ever feeling it',
                    why: 'Architecture based on token prediction',
                    severity: 'Philosophical'
                },
                {
                    title: 'üìÖ Knowledge frozen in time',
                    desc: 'Training data cutoff date',
                    example: 'GPT-4 doesn\'t know events after April 2023',
                    why: 'No continuous knowledge updates',
                    severity: 'Practical'
                },
                {
                    title: '‚öñÔ∏è Amplified societal biases',
                    desc: 'Reproduction of biases present in data',
                    example: 'Stereotypical profession/gender associations',
                    why: 'Learning on imperfect human content',
                    severity: 'Ethical'
                },
                {
                    title: 'üî¢ Weakness in numerical computation',
                    desc: 'Errors on complex mathematical operations',
                    example: 'May be wrong on 847 √ó 293 = ?',
                    why: 'Architecture not optimized for precise calculations',
                    severity: 'Technical'
                }
            ];

            for (var i = 0; i < limitations.length; i++) {
                var severityColors = {
                    'Critique': 'bg-red-500',
                    'Critical': 'bg-red-500',
                    'Philosophique': 'bg-purple-500',
                    'Philosophical': 'bg-purple-500',
                    'Pratique': 'bg-blue-500',
                    'Practical': 'bg-blue-500',
                    '√âthique': 'bg-orange-500',
                    'Ethical': 'bg-orange-500',
                    'Technique': 'bg-yellow-500',
                    'Technical': 'bg-yellow-500'
                };
                
                html += '<div class="bg-slate-800/50 rounded-lg p-4 mb-4 border-l-4 border-red-500">';
                html += '<div class="flex items-start justify-between mb-2">';
                html += '<h4 class="font-bold text-red-300 text-sm">' + limitations[i].title + '</h4>';
                html += '<span class="text-xs px-2 py-1 rounded ' + severityColors[limitations[i].severity] + ' text-white">' + limitations[i].severity + '</span>';
                html += '</div>';
                html += '<p class="text-xs text-slate-300 mb-2">' + limitations[i].desc + '</p>';
                html += '<div class="text-xs font-mono bg-slate-900/50 p-2 rounded mb-2 text-slate-400">';
                html += limitations[i].example;
                html += '</div>';
                html += '<p class="text-xs text-slate-500"><strong>' + (lang === 'fr' ? 'Pourquoi' : 'Why') + ':</strong> ' + limitations[i].why + '</p>';
                html += '</div>';
            }
            html += '</div>';

            // Capacit√©s √©mergentes
            html += '<div class="bg-gradient-to-br from-green-900/30 to-emerald-900/30 border border-green-500/30 rounded-xl p-6">';
            html += '<h3 class="text-xl font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-green-400">‚ú®</span>';
            html += lang === 'fr' ? 'Capacit√©s √âmergentes Extraordinaires' : 'Extraordinary Emergent Abilities';
            html += '</h3>';

            var abilities = lang === 'fr' ? [
                {
                    title: 'üß† Raisonnement complexe (Chain-of-Thought)',
                    desc: 'D√©composition de probl√®mes en √©tapes logiques',
                    example: 'R√©solution d\'√©nigmes, probl√®mes math√©matiques multi-√©tapes',
                    emergence: 'Apparu vers ~100B param√®tres',
                    impact: 'R√©volutionnaire'
                },
                {
                    title: 'üíª Programmation multi-langages',
                    desc: 'G√©n√©ration, d√©bogage, explication de code',
                    example: 'Traduit Python ‚Üí JavaScript, trouve et corrige bugs',
                    emergence: 'Apparu vers ~10B param√®tres',
                    impact: 'Transformateur'
                },
                {
                    title: 'üåê Traduction & adaptation culturelle',
                    desc: 'Traduction nuanc√©e m√™me pour langues rares',
                    example: 'Adapte l\'humour et r√©f√©rences culturelles',
                    emergence: 'Apparu vers ~1B param√®tres',
                    impact: 'Significatif'
                },
                {
                    title: 'üé® Cr√©ativit√© et analogies sophistiqu√©es',
                    desc: 'Cr√©ation d\'analogies complexes inter-domaines',
                    example: 'Compare la mitochondrie √† une centrale √©lectrique',
                    emergence: 'Apparu vers ~300B param√®tres',
                    impact: 'Surprenant'
                },
                {
                    title: 'üìö Apprentissage contextuel (In-Context Learning)',
                    desc: 'Apprend de nouveaux patterns dans la conversation',
                    example: 'Comprend un nouveau format apr√®s 2-3 exemples',
                    emergence: 'Apparu vers ~10B param√®tres',
                    impact: 'Inattendu'
                }
            ] : [
                {
                    title: 'üß† Complex reasoning (Chain-of-Thought)',
                    desc: 'Breaking down problems into logical steps',
                    example: 'Solving riddles, multi-step math problems',
                    emergence: 'Emerged around ~100B parameters',
                    impact: 'Revolutionary'
                },
                {
                    title: 'üíª Multi-language programming',
                    desc: 'Code generation, debugging, explanation',
                    example: 'Translates Python ‚Üí JavaScript, finds and fixes bugs',
                    emergence: 'Emerged around ~10B parameters',
                    impact: 'Transformative'
                },
                {
                    title: 'üåê Translation & cultural adaptation',
                    desc: 'Nuanced translation even for rare languages',
                    example: 'Adapts humor and cultural references',
                    emergence: 'Emerged around ~1B parameters',
                    impact: 'Significant'
                },
                {
                    title: 'üé® Creativity and sophisticated analogies',
                    desc: 'Creating complex cross-domain analogies',
                    example: 'Compares mitochondria to a power plant',
                    emergence: 'Emerged around ~300B parameters',
                    impact: 'Surprising'
                },
                {
                    title: 'üìö In-Context Learning',
                    desc: 'Learning new patterns in conversation',
                    example: 'Understands new format after 2-3 examples',
                    emergence: 'Emerged around ~10B parameters',
                    impact: 'Unexpected'
                }
            ];

            for (var i = 0; i < abilities.length; i++) {
                var impactColors = {
                    'R√©volutionnaire': 'bg-purple-500',
                    'Revolutionary': 'bg-purple-500',
                    'Transformateur': 'bg-blue-500',
                    'Transformative': 'bg-blue-500',
                    'Significatif': 'bg-green-500',
                    'Significant': 'bg-green-500',
                    'Surprenant': 'bg-orange-500',
                    'Surprising': 'bg-orange-500',
                    'Inattendu': 'bg-yellow-500',
                    'Unexpected': 'bg-yellow-500'
                };
                
                html += '<div class="bg-slate-800/50 rounded-lg p-4 mb-4 border-l-4 border-green-500">';
                html += '<div class="flex items-start justify-between mb-2">';
                html += '<h4 class="font-bold text-green-300 text-sm">' + abilities[i].title + '</h4>';
                html += '<span class="text-xs px-2 py-1 rounded ' + impactColors[abilities[i].impact] + ' text-white">' + abilities[i].impact + '</span>';
                html += '</div>';
                html += '<p class="text-xs text-slate-300 mb-2">' + abilities[i].desc + '</p>';
                html += '<div class="text-xs font-mono bg-slate-900/50 p-2 rounded mb-2 text-green-400">';
                html += abilities[i].example;
                html += '</div>';
                html += '<p class="text-xs text-slate-500"><strong>' + (lang === 'fr' ? '√âmergence' : 'Emergence') + ':</strong> ' + abilities[i].emergence + '</p>';
                html += '</div>';
            }
            html += '</div>';
            html += '</div>';

            // Exemple interactif de raisonnement
            html += '<div class="bg-slate-900/50 rounded-xl p-6 mb-6">';
            html += '<h3 class="text-lg font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-cyan-400">üß©</span>';
            html += lang === 'fr' ? 'D√©monstration : Raisonnement √©mergent en action' : 'Demonstration: Emergent reasoning in action';
            html += '</h3>';
            html += '<div class="bg-slate-800/50 rounded-lg p-4 text-sm font-mono space-y-3">';
            
            if (lang === 'fr') {
                html += '<p class="text-blue-400"><strong>Humain:</strong> "J\'ai 3 pommes. J\'en mange 1. Mon fr√®re m\'en donne 2. Combien j\'en ai maintenant ?"</p>';
                html += '<div class="border-l-4 border-green-500 pl-4 space-y-2">';
                html += '<p class="text-green-400"><strong>GPT-4:</strong> "Je vais r√©soudre ce probl√®me √©tape par √©tape :</p>';
                html += '<p class="text-slate-300 ml-4">üìç <strong>Situation initiale:</strong> 3 pommes</p>';
                html += '<p class="text-slate-300 ml-4">‚ûñ <strong>Action 1:</strong> Je mange 1 pomme ‚Üí 3 - 1 = 2 pommes restantes</p>';
                html += '<p class="text-slate-300 ml-4">‚ûï <strong>Action 2:</strong> Mon fr√®re me donne 2 pommes ‚Üí 2 + 2 = 4 pommes</p>';
                html += '<p class="text-green-400 ml-4">‚úÖ <strong>R√©sultat final:</strong> J\'ai maintenant 4 pommes."</p>';
                html += '</div>';
            } else {
                html += '<p class="text-blue-400"><strong>Human:</strong> "I have 3 apples. I eat 1. My brother gives me 2. How many do I have now?"</p>';
                html += '<div class="border-l-4 border-green-500 pl-4 space-y-2">';
                html += '<p class="text-green-400"><strong>GPT-4:</strong> "I\'ll solve this problem step by step:</p>';
                html += '<p class="text-slate-300 ml-4">üìç <strong>Initial situation:</strong> 3 apples</p>';
                html += '<p class="text-slate-300 ml-4">‚ûñ <strong>Action 1:</strong> I eat 1 apple ‚Üí 3 - 1 = 2 apples remaining</p>';
                html += '<p class="text-slate-300 ml-4">‚ûï <strong>Action 2:</strong> My brother gives me 2 apples ‚Üí 2 + 2 = 4 apples</p>';
                html += '<p class="text-green-400 ml-4">‚úÖ <strong>Final result:</strong> I now have 4 apples."</p>';
                html += '</div>';
            }
            
            html += '</div>';
            html += '<div class="mt-4 bg-cyan-900/30 border border-cyan-500/30 rounded-lg p-3">';
            html += '<p class="text-xs text-slate-300">';
            html += '<strong>üí° ' + (lang === 'fr' ? 'Remarquable' : 'Remarkable') + ':</strong> ';
            html += lang === 'fr' ? 
                'Cette capacit√© de d√©composition logique n\'a jamais √©t√© explicitement programm√©e. Elle a √©merg√© naturellement de l\'entra√Ænement sur des milliards de textes.' :
                'This logical decomposition ability was never explicitly programmed. It emerged naturally from training on billions of texts.';
            html += '</p></div></div>';

            // Philosophie et implications futures
            html += '<div class="bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 rounded-xl p-6">';
            html += '<h3 class="text-lg font-bold mb-4 flex items-center gap-2">';
            html += '<span class="text-purple-400">üîÆ</span>';
            html += lang === 'fr' ? 'Questions Philosophiques & Perspectives d\'Avenir' : 'Philosophical Questions & Future Perspectives';
            html += '</h3>';
            html += '<div class="space-y-4 text-sm text-slate-300">';

            var questions = lang === 'fr' ? [
                {icon: 'ü§î', q: 'Les LLM "comprennent"-ils vraiment ou sont-ils de brillants perroquets stochastiques ?'},
                {icon: 'üß†', q: '√Ä quelle √©chelle l\'intelligence artificielle devient-elle indiscernable de l\'intelligence humaine ?'},
                {icon: '‚öñÔ∏è', q: 'Comment s\'assurer que les LLM respectent nos valeurs dans toute leur diversit√© ?'},
                {icon: 'üåç', q: 'Quel sera l\'impact soci√©tal quand les LLM surpasseront les humains dans la plupart des t√¢ches cognitives ?'},
                {icon: 'üî¨', q: 'Les capacit√©s √©mergentes futures sont-elles pr√©dictibles ou fondamentalement impr√©visibles ?'}
            ] : [
                {icon: 'ü§î', q: 'Do LLMs truly "understand" or are they brilliant stochastic parrots?'},
                {icon: 'üß†', q: 'At what scale does artificial intelligence become indistinguishable from human intelligence?'},
                {icon: '‚öñÔ∏è', q: 'How do we ensure LLMs respect our values in all their diversity?'},
                {icon: 'üåç', q: 'What will be the societal impact when LLMs surpass humans in most cognitive tasks?'},
                {icon: 'üî¨', q: 'Are future emergent capabilities predictable or fundamentally unpredictable?'}
            ];

            for (var i = 0; i < questions.length; i++) {
                html += '<div class="flex items-start gap-3">';
                html += '<span class="text-lg">' + questions[i].icon + '</span>';
                html += '<p class="flex-1 italic">' + questions[i].q + '</p>';
                html += '</div>';
            }

            html += '</div>';
            html += '<div class="mt-6 text-center">';
            html += '<p class="text-sm text-purple-300 italic">';
            html += lang === 'fr' ? 
                '"Les LLM ne sont que le d√©but. Nous assistons aux premiers pas d\'une nouvelle forme d\'intelligence qui transformera profond√©ment notre civilisation."' :
                '"LLMs are just the beginning. We are witnessing the first steps of a new form of intelligence that will profoundly transform our civilization."';
            html += '</p></div></div>';

            html += '</div></div>';
            return html;
        }

        function renderFooter() {
            var lang = state.lang;
            var html = '<div class="mt-8 bg-gradient-to-r from-slate-800/50 to-blue-900/50 rounded-lg p-6 border border-slate-700">';
            html += '<h3 class="font-bold mb-3 text-xl">üéØ ' + (lang === 'fr' ? 'En r√©sum√©' : 'Summary') + ':</h3>';
            html += '<p class="text-sm text-slate-300 leading-relaxed">';
            html += lang === 'fr' ?
                "Un LLM est une gigantesque fonction math√©matique (1.8 trillion de param√®tres pour GPT-4) qui, apr√®s avoir √©t√© entra√Æn√©e sur des milliards de textes pendant des mois et pour ~150M$, peut pr√©dire le mot suivant avec une pr√©cision surprenante. Le m√©canisme d'attention (96 t√™tes par couche) lui permet d'analyser les relations entre tous les mots. L'architecture Transformer empile 120+ couches qui transforment progressivement le texte en vecteurs de 12,288 dimensions. Plus le mod√®le est grand, plus il capture des patterns complexes et d√©veloppe des capacit√©s √©mergentes comme le raisonnement, la programmation et les analogies - sans jamais avoir √©t√© explicitement programm√© pour ces t√¢ches." :
                "An LLM is a massive mathematical function (1.8 trillion parameters for GPT-4) that, after being trained on billions of texts for months at ~$150M, can predict the next word with surprising accuracy. The attention mechanism (96 heads per layer) allows it to analyze relationships between all words. The Transformer architecture stacks 120+ layers that progressively transform text into 12,288-dimensional vectors. The larger the model, the more complex patterns it captures and the more emergent abilities it develops like reasoning, programming, and analogies - without ever being explicitly programmed for these tasks.";
            html += '</p></div>';
            return html;
        }

        function render() {
            var sections = {
                intro: renderIntroductionSection,
                tokens: renderTokensSection,
                embeddings: renderEmbeddingsSection,
                attention: renderAttentionSection,
                architecture: renderArchitectureSection,
                training: renderTrainingSection,
                limits: renderLimitsSection
            };

            var html = '<div class="max-w-6xl mx-auto">';
            html += renderHeader();
            html += renderNav();
            html += sections[state.activeSection]();
            html += renderFooter();
            html += '</div>';

            document.getElementById('app').innerHTML = html;
            
            restoreFocus();
        }

        render();
    </script>
</body>
</html>