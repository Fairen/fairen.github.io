<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Task Manager - Guide Technique Détaillé</title>
    <style>
        :root {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2a2a2a;
            --bg-card: #242424;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --accent: #ff6b35;
            --accent-hover: #ff8c5a;
            --gradient-1: #ff6b35;
            --gradient-2: #e91e63;
            --gradient-3: #9c27b0;
            --dragon-purple: #8e44ad;
            --dragon-pink: #e91e63;
            --dragon-orange: #ff6b35;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(255, 107, 53, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(142, 68, 173, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 40% 20%, rgba(233, 30, 99, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1600px;
            margin: 0 auto;
            background: var(--bg-card);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h1 {
            background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2), var(--gradient-3));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            animation: gradientShift 5s ease infinite;
            background-size: 200% 200%;
        }

        @keyframes gradientShift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        .subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 30px;
            font-size: 1.2em;
        }

        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 30px;
            background: var(--bg-secondary);
            padding: 5px;
            border-radius: 12px;
            flex-wrap: wrap;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab {
            padding: 12px 20px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.3s ease;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .tab:hover {
            background: rgba(255, 107, 53, 0.1);
            color: var(--accent);
        }

        .tab.active {
            background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2));
            color: white;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
        }

        .content-section {
            display: none;
            animation: slideIn 0.4s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .endpoint-card {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border-left: 5px solid var(--accent);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .endpoint-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.2);
            border-left-color: var(--accent-hover);
        }

        .endpoint-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255, 107, 53, 0.1);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .method-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
            color: white;
        }

        .method-post { background: #27ae60; }
        .method-get { background: var(--accent); }
        .method-request { background: var(--gradient-2); }
        .method-response { background: var(--dragon-purple); }
        .method-notification { background: var(--gradient-3); }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .code-block::before {
            content: attr(data-language);
            position: absolute;
            top: 5px;
            right: 10px;
            color: #7f8c8d;
            font-size: 0.8em;
            font-weight: bold;
        }

        .json-key { color: #9cdcfe; }
        .json-string { color: #ce9178; }
        .json-number { color: #b5cea8; }
        .json-boolean { color: #569cd6; }
        .json-comment { color: #6a9955; font-style: italic; }

        .flow-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 30px 0;
            padding: 30px;
            background: var(--bg-secondary);
            border-radius: 15px;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .flow-step {
            flex: 1;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
            z-index: 1;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .flow-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.2);
            border-color: var(--accent);
        }

        .flow-arrow {
            position: absolute;
            top: 50%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            z-index: 0;
        }

        .interactive-demo {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .demo-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .demo-button {
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--accent), var(--gradient-2));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        .demo-button.active {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .demo-output {
            background: #1e1e1e;
            padding: 20px;
            border-radius: 10px;
            min-height: 200px;
            font-family: 'JetBrains Mono', monospace;
            overflow-x: auto;
        }

        .timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline-item {
            display: flex;
            margin-bottom: 30px;
            position: relative;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 30px;
            top: 40px;
            height: calc(100% + 30px);
            width: 2px;
            background: var(--accent);
        }

        .timeline-item:last-child::before {
            display: none;
        }

        .timeline-marker {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            flex-shrink: 0;
            z-index: 1;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
        }

        .timeline-content {
            flex: 1;
            margin-left: 20px;
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .timeline-content:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.2);
            border-color: var(--accent);
        }
        }

        .parameter-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--bg-card);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .parameter-table th {
            background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2));
            color: white;
            padding: 12px;
            text-align: left;
        }

        .parameter-table td {
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .parameter-table tr:hover {
            background: rgba(255, 107, 53, 0.1);
        }

        .type-badge {
            display: inline-block;
            padding: 3px 8px;
            background: rgba(255, 107, 53, 0.1);
            color: var(--accent);
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 600;
            border: 1px solid rgba(255, 107, 53, 0.3);
        }

        .required-badge {
            display: inline-block;
            padding: 3px 8px;
            background: rgba(233, 30, 99, 0.1);
            color: var(--gradient-2);
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 5px;
            border: 1px solid rgba(233, 30, 99, 0.3);
        }

        .example-box {
            background: var(--bg-secondary);
            border: 2px solid var(--accent);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .example-box::before {
            content: "💡 Exemple Concret";
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--bg-secondary);
            padding: 0 10px;
            font-weight: bold;
            color: var(--accent);
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .status-success {
            background: rgba(39, 174, 96, 0.2);
            color: #27ae60;
            border: 1px solid rgba(39, 174, 96, 0.3);
        }

        .status-error {
            background: rgba(233, 30, 99, 0.2);
            color: var(--gradient-2);
            border: 1px solid rgba(233, 30, 99, 0.3);
        }

        .status-pending {
            background: rgba(255, 107, 53, 0.2);
            color: var(--accent);
            border: 1px solid rgba(255, 107, 53, 0.3);
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .flow-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .flow-arrow {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📋 MCP Task Manager <span style="font-size: 0.6em; color: #7f8c8d;">Protocol v1.0</span></h1>
        <p class="subtitle">Exemple complet d'implémentation d'un serveur MCP de gestion de tâches</p>

        <div class="tabs">
            <button class="tab active" onclick="showSection('introduction')">📖 Introduction MCP</button>
            <button class="tab" onclick="showSection('structure')">🏗️ Structure</button>
            <button class="tab" onclick="showSection('lifecycle')">🔄 Cycle de Vie</button>
            <button class="tab" onclick="showSection('endpoints')">📡 Endpoints</button>
            <button class="tab" onclick="showSection('tools')">🔧 Tools</button>
            <button class="tab" onclick="showSection('resources')">📚 Resources</button>
            <button class="tab" onclick="showSection('prompts')">💬 Prompts</button>
            <button class="tab" onclick="showSection('errors')">⚠️ Erreurs</button>
            <button class="tab" onclick="showSection('demo')">🎮 Démo Live</button>
        </div>

        <!-- Section Introduction -->
        <div id="introduction" class="content-section active">
            <h2>Qu'est-ce que le Model Context Protocol (MCP) ?</h2>
            
            <div class="endpoint-card">
                <h3>🌐 Définition et Vision</h3>
                <p>Le <strong>Model Context Protocol (MCP)</strong> est un protocole standardisé créé par Anthropic pour permettre aux modèles d'IA d'interagir de manière sécurisée et contrôlée avec des sources de données externes et des outils.</p>
                
                <div style="margin: 20px 0; padding: 20px; background: rgba(255, 107, 53, 0.1); border-radius: 10px; border-left: 4px solid var(--accent);">
                    <p style="margin: 0; font-style: italic; color: var(--text-primary);">
                        <strong>💡 Analogie :</strong> Imaginez MCP comme un "système de plugins universel" pour l'IA. 
                        Tout comme votre navigateur peut installer des extensions pour accéder à de nouveaux services, 
                        MCP permet aux IA d'étendre leurs capacités en se connectant à des serveurs spécialisés.
                    </p>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>🎯 Pourquoi MCP est Révolutionnaire ?</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
                    <div style="background: var(--bg-primary); padding: 20px; border-radius: 10px; border: 1px solid rgba(255, 255, 255, 0.1);">
                        <h4 style="color: var(--accent); margin-bottom: 10px;">🔒 Sécurité</h4>
                        <p style="margin: 0; font-size: 0.9em;">Contrôle granulaire des permissions et isolation des contextes d'exécution</p>
                    </div>
                    <div style="background: var(--bg-primary); padding: 20px; border-radius: 10px; border: 1px solid rgba(255, 255, 255, 0.1);">
                        <h4 style="color: var(--gradient-2); margin-bottom: 10px;">⚡ Performance</h4>
                        <p style="margin: 0; font-size: 0.9em;">Communication optimisée via JSON-RPC 2.0 avec gestion asynchrone</p>
                    </div>
                    <div style="background: var(--bg-primary); padding: 20px; border-radius: 10px; border: 1px solid rgba(255, 255, 255, 0.1);">
                        <h4 style="color: var(--gradient-3); margin-bottom: 10px;">🔧 Extensibilité</h4>
                        <p style="margin: 0; font-size: 0.9em;">Architecture modulaire permettant d'ajouter facilement de nouvelles capacités</p>
                    </div>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>🏗️ Architecture MCP : Les 3 Piliers</h3>
                <div class="flow-container">
                    <div class="flow-arrow"></div>
                    <div class="flow-step">
                        <div style="font-size: 2em; margin-bottom: 10px;">🔧</div>
                        <h4 style="color: var(--accent);">Tools</h4>
                        <p style="margin: 10px 0 0 0; font-size: 0.9em;">Actions que l'IA peut exécuter</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.8em; color: var(--text-secondary);">Créer, modifier, supprimer</p>
                    </div>
                    <div class="flow-step">
                        <div style="font-size: 2em; margin-bottom: 10px;">📚</div>
                        <h4 style="color: var(--gradient-2);">Resources</h4>
                        <p style="margin: 10px 0 0 0; font-size: 0.9em;">Données que l'IA peut consulter</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.8em; color: var(--text-secondary);">Fichiers, API, bases de données</p>
                    </div>
                    <div class="flow-step">
                        <div style="font-size: 2em; margin-bottom: 10px;">💬</div>
                        <h4 style="color: var(--gradient-3);">Prompts</h4>
                        <p style="margin: 10px 0 0 0; font-size: 0.9em;">Templates de conversation</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.8em; color: var(--text-secondary);">Workflows prédéfinis</p>
                    </div>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>📋 Ce que vous allez découvrir dans ce guide</h3>
                <p>Cette documentation vous présente un <strong>exemple complet et fonctionnel</strong> d'un serveur MCP : un gestionnaire de tâches (Task Manager).</p>
                
                <div style="margin: 20px 0;">
                    <h4 style="color: var(--accent); margin-bottom: 15px;">🗺️ Parcours de Découverte :</h4>
                    <ol style="line-height: 1.8; margin-left: 20px;">
                        <li><strong>Structure</strong> - Architecture générale et concepts fondamentaux</li>
                        <li><strong>Cycle de Vie</strong> - Flux complet d'une session MCP de A à Z</li>
                        <li><strong>Endpoints</strong> - Points d'entrée et protocole de communication</li>
                        <li><strong>Tools</strong> - Actions concrètes sur les tâches (CRUD complet)</li>
                        <li><strong>Resources</strong> - Consultation des données et statistiques</li>
                        <li><strong>Prompts</strong> - Templates pour automatiser les workflows</li>
                        <li><strong>Gestion d'Erreurs</strong> - Codes d'erreur et debugging</li>
                        <li><strong>Démo Interactive</strong> - Testez en temps réel !</li>
                    </ol>
                </div>

                <div class="example-box">
                    <h4 style="color: var(--accent); margin-bottom: 10px;">💻 Exemple Pratique Inclus</h4>
                    <p style="margin-bottom: 10px;">Notre Task Manager permet de :</p>
                    <ul style="margin: 0 0 0 20px; line-height: 1.6;">
                        <li>✅ Créer et gérer des tâches avec priorités</li>
                        <li>📊 Consulter des statistiques en temps réel</li>
                        <li>🔄 Automatiser des workflows (revues, planning)</li>
                        <li>👥 Gérer les assignations et équipes</li>
                        <li>📈 Suivre les métriques de performance</li>
                    </ul>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>🚀 Cas d'Usage MCP dans le Monde Réel</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                    <div style="background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(233, 30, 99, 0.1)); padding: 15px; border-radius: 8px; border: 1px solid rgba(255, 107, 53, 0.3);">
                        <h5 style="margin: 0 0 8px 0; color: var(--accent);">🏢 Entreprise</h5>
                        <p style="margin: 0; font-size: 0.85em;">ERP, CRM, outils métier, bases de données internes</p>
                    </div>
                    <div style="background: linear-gradient(135deg, rgba(233, 30, 99, 0.1), rgba(156, 39, 176, 0.1)); padding: 15px; border-radius: 8px; border: 1px solid rgba(233, 30, 99, 0.3);">
                        <h5 style="margin: 0 0 8px 0; color: var(--gradient-2);">🔬 Recherche</h5>
                        <p style="margin: 0; font-size: 0.85em;">APIs scientifiques, datasets, outils d'analyse</p>
                    </div>
                    <div style="background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(142, 68, 173, 0.1)); padding: 15px; border-radius: 8px; border: 1px solid rgba(156, 39, 176, 0.3);">
                        <h5 style="margin: 0 0 8px 0; color: var(--gradient-3);">🎨 Créatif</h5>
                        <p style="margin: 0; font-size: 0.85em;">Outils design, génération de contenu, médias</p>
                    </div>
                    <div style="background: linear-gradient(135deg, rgba(142, 68, 173, 0.1), rgba(255, 107, 53, 0.1)); padding: 15px; border-radius: 8px; border: 1px solid rgba(142, 68, 173, 0.3);">
                        <h5 style="margin: 0 0 8px 0; color: var(--dragon-purple);">⚡ DevOps</h5>
                        <p style="margin: 0; font-size: 0.85em;">CI/CD, monitoring, infrastructure cloud</p>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin: 30px 0; padding: 25px; background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(233, 30, 99, 0.1)); border-radius: 15px; border: 1px solid rgba(255, 107, 53, 0.3);">
                <h3 style="color: var(--accent); margin-bottom: 15px;">🎯 Prêt à Plonger ?</h3>
                <p style="margin-bottom: 20px; color: var(--text-primary);">
                    Explorez les onglets suivants pour maîtriser MCP à travers notre exemple concret !
                </p>
                <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
                    <button onclick="showSection('structure')" style="padding: 10px 20px; background: linear-gradient(135deg, var(--accent), var(--gradient-2)); color: white; border: none; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
                        Commencer par la Structure →
                    </button>
                    <button onclick="showSection('demo')" style="padding: 10px 20px; background: linear-gradient(135deg, var(--gradient-2), var(--gradient-3)); color: white; border: none; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
                        Aller à la Démo →
                    </button>
                </div>
            </div>
        </div>

        <!-- Section Structure -->
        <div id="structure" class="content-section">
            <h2>Structure d'un Serveur MCP</h2>
            
            <div class="endpoint-card">
                <h3>🎯 Notre Exemple : Task Manager Server</h3>
                <p>Un serveur MCP qui gère des tâches (création, lecture, mise à jour, suppression) avec les capacités suivantes :</p>
                <ul style="margin: 15px 0 0 25px; line-height: 1.8;">
                    <li><strong>Tools</strong> : create_task, update_task, delete_task, complete_task</li>
                    <li><strong>Resources</strong> : task://list, task://stats, task://detail/{id}</li>
                    <li><strong>Prompts</strong> : weekly_review, task_prioritization, sprint_planning</li>
                </ul>
            </div>

            <div class="endpoint-card">
                <h3>📦 Structure des Messages JSON-RPC 2.0</h3>
                <p>Tous les messages MCP suivent le format JSON-RPC 2.0 avec cette structure :</p>
                
                <div class="code-block" data-language="JSON">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,  <span class="json-comment">// Version du protocole (toujours "2.0")</span>
  <span class="json-key">"id"</span>: <span class="json-number">1</span>,           <span class="json-comment">// Identifiant unique de la requête</span>
  <span class="json-key">"method"</span>: <span class="json-string">"string"</span>, <span class="json-comment">// Nom de la méthode à appeler</span>
  <span class="json-key">"params"</span>: {}       <span class="json-comment">// Paramètres de la méthode (optionnel)</span>
}</pre>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>� Endpoints MCP : Obligatoires vs Optionnels</h3>
                <p>Un serveur MCP doit implémenter certains endpoints de base pour être conforme au protocole. Voici la classification complète :</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div style="background: rgba(39, 174, 96, 0.1); padding: 20px; border-radius: 12px; border: 2px solid rgba(39, 174, 96, 0.3);">
                        <h4 style="color: #27ae60; margin-bottom: 15px;">🟢 OBLIGATOIRES</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.8;">
                            <li><code>initialize</code></li>
                            <li><code>initialized</code></li>
                            <li><code>ping</code></li>
                        </ul>
                        <p style="margin-top: 10px; font-size: 0.9em; font-style: italic;">Ces 3 endpoints sont le minimum absolu pour un serveur MCP fonctionnel.</p>
                    </div>
                    <div style="background: rgba(255, 107, 53, 0.1); padding: 20px; border-radius: 12px; border: 2px solid rgba(255, 107, 53, 0.3);">
                        <h4 style="color: var(--accent); margin-bottom: 15px;">🟠 CONDITIONNELS</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.8;">
                            <li><code>tools/list</code> + <code>tools/call</code></li>
                            <li><code>resources/list</code> + <code>resources/read</code></li>
                            <li><code>prompts/list</code> + <code>prompts/get</code></li>
                        </ul>
                        <p style="margin-top: 10px; font-size: 0.9em; font-style: italic;">Obligatoires si le serveur annonce ces capacités.</p>
                    </div>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>🔐 Endpoints Obligatoires : Détail Technique</h3>
                
                <h4 style="color: var(--accent); margin: 25px 0 15px 0;">1. 🤝 initialize (OBLIGATOIRE)</h4>
                <p>Premier appel obligatoire pour établir la connexion. Le serveur DOIT répondre à cet endpoint.</p>
                
                <div class="code-block" data-language="JSON Schema Request">
                    <pre>{
  <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
  <span class="json-key">"properties"</span>: {
    <span class="json-key">"protocolVersion"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Version MCP supportée"</span>,
      <span class="json-key">"enum"</span>: [<span class="json-string">"1.0"</span>]
    },
    <span class="json-key">"capabilities"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Capacités du client"</span>,
      <span class="json-key">"properties"</span>: {
        <span class="json-key">"experimental"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"object"</span> },
        <span class="json-key">"sampling"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"object"</span> }
      }
    },
    <span class="json-key">"clientInfo"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
      <span class="json-key">"required"</span>: [<span class="json-string">"name"</span>, <span class="json-string">"version"</span>],
      <span class="json-key">"properties"</span>: {
        <span class="json-key">"name"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
        <span class="json-key">"version"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> }
      }
    }
  },
  <span class="json-key">"required"</span>: [<span class="json-string">"protocolVersion"</span>, <span class="json-string">"clientInfo"</span>]
}</pre>
                </div>

                <div class="code-block" data-language="JSON Schema Response">
                    <pre>{
  <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
  <span class="json-key">"properties"</span>: {
    <span class="json-key">"protocolVersion"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Version MCP du serveur"</span>
    },
    <span class="json-key">"capabilities"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Capacités annoncées par le serveur"</span>,
      <span class="json-key">"properties"</span>: {
        <span class="json-key">"tools"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"object"</span> },
        <span class="json-key">"resources"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"object"</span> },
        <span class="json-key">"prompts"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"object"</span> }
      }
    },
    <span class="json-key">"serverInfo"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
      <span class="json-key">"required"</span>: [<span class="json-string">"name"</span>, <span class="json-string">"version"</span>],
      <span class="json-key">"properties"</span>: {
        <span class="json-key">"name"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
        <span class="json-key">"version"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> }
      }
    }
  },
  <span class="json-key">"required"</span>: [<span class="json-string">"protocolVersion"</span>, <span class="json-string">"capabilities"</span>, <span class="json-string">"serverInfo"</span>]
}</pre>
                </div>

                <h4 style="color: var(--gradient-2); margin: 25px 0 15px 0;">2. ✅ initialized (OBLIGATOIRE)</h4>
                <p>Notification du client confirmant que l'initialisation est terminée. <strong>Pas de réponse attendue</strong> (notification).</p>
                
                <div class="code-block" data-language="JSON Notification">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"method"</span>: <span class="json-string">"initialized"</span>
  <span class="json-comment">// Pas d'id = notification, pas de réponse</span>
}</pre>
                </div>

                <h4 style="color: var(--gradient-3); margin: 25px 0 15px 0;">3. 🏓 ping (OBLIGATOIRE)</h4>
                <p>Endpoint de vérification de l'état du serveur. Utilisé pour le monitoring et la détection de déconnexion.</p>
                
                <div class="code-block" data-language="JSON Schema">
                    <pre>{
  <span class="json-comment">// Request (pas de params requis)</span>
  <span class="json-key">"method"</span>: <span class="json-string">"ping"</span>

  <span class="json-comment">// Response obligatoire</span>
  <span class="json-key">"result"</span>: {} <span class="json-comment">// Objet vide ou métadonnées optionnelles</span>
}</pre>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>⚙️ Endpoints Conditionnels : Selon les Capacités</h3>
                <p>Si votre serveur annonce une capacité dans <code>initialize</code>, il DOIT implémenter les endpoints correspondants :</p>

                <div style="background: var(--bg-secondary); padding: 20px; border-radius: 12px; margin: 20px 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h4 style="color: var(--accent); margin-bottom: 15px;">🔧 Capacité "tools"</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <h5 style="color: var(--text-primary); margin-bottom: 8px;"><code>tools/list</code> - OBLIGATOIRE</h5>
                            <p style="font-size: 0.9em; margin: 0;">Liste tous les outils disponibles avec leurs schémas JSON.</p>
                        </div>
                        <div>
                            <h5 style="color: var(--text-primary); margin-bottom: 8px;"><code>tools/call</code> - OBLIGATOIRE</h5>
                            <p style="font-size: 0.9em; margin: 0;">Exécute un outil spécifique avec validation des paramètres.</p>
                        </div>
                    </div>
                    
                    <div class="code-block" data-language="JSON Schema tools/call" style="margin-top: 15px;">
                        <pre>{
  <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
  <span class="json-key">"properties"</span>: {
    <span class="json-key">"name"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Nom de l'outil à exécuter"</span>
    },
    <span class="json-key">"arguments"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Paramètres selon le schéma de l'outil"</span>
    }
  },
  <span class="json-key">"required"</span>: [<span class="json-string">"name"</span>]
}</pre>
                    </div>
                </div>

                <div style="background: var(--bg-secondary); padding: 20px; border-radius: 12px; margin: 20px 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h4 style="color: var(--gradient-2); margin-bottom: 15px;">📚 Capacité "resources"</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <h5 style="color: var(--text-primary); margin-bottom: 8px;"><code>resources/list</code> - OBLIGATOIRE</h5>
                            <p style="font-size: 0.9em; margin: 0;">Liste toutes les ressources disponibles avec leurs URIs.</p>
                        </div>
                        <div>
                            <h5 style="color: var(--text-primary); margin-bottom: 8px;"><code>resources/read</code> - OBLIGATOIRE</h5>
                            <p style="font-size: 0.9em; margin: 0;">Lit le contenu d'une ressource spécifique.</p>
                        </div>
                    </div>
                    
                    <div class="code-block" data-language="JSON Schema resources/read" style="margin-top: 15px;">
                        <pre>{
  <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
  <span class="json-key">"properties"</span>: {
    <span class="json-key">"uri"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"URI de la ressource à lire"</span>,
      <span class="json-key">"format"</span>: <span class="json-string">"uri"</span>
    }
  },
  <span class="json-key">"required"</span>: [<span class="json-string">"uri"</span>]
}</pre>
                    </div>
                </div>

                <div style="background: var(--bg-secondary); padding: 20px; border-radius: 12px; margin: 20px 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h4 style="color: var(--gradient-3); margin-bottom: 15px;">💬 Capacité "prompts"</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <h5 style="color: var(--text-primary); margin-bottom: 8px;"><code>prompts/list</code> - OBLIGATOIRE</h5>
                            <p style="font-size: 0.9em; margin: 0;">Liste tous les templates de prompts disponibles.</p>
                        </div>
                        <div>
                            <h5 style="color: var(--text-primary); margin-bottom: 8px;"><code>prompts/get</code> - OBLIGATOIRE</h5>
                            <p style="font-size: 0.9em; margin: 0;">Génère un prompt avec les arguments fournis.</p>
                        </div>
                    </div>
                    
                    <div class="code-block" data-language="JSON Schema prompts/get" style="margin-top: 15px;">
                        <pre>{
  <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
  <span class="json-key">"properties"</span>: {
    <span class="json-key">"name"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Nom du prompt à générer"</span>
    },
    <span class="json-key">"arguments"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Arguments selon le schéma du prompt"</span>
    }
  },
  <span class="json-key">"required"</span>: [<span class="json-string">"name"</span>]
}</pre>
                    </div>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>🔄 Séquence d'Initialisation Obligatoire</h3>
                <p>Chaque connexion MCP DOIT suivre cette séquence exacte :</p>
                
                <div class="flow-container">
                    <div class="flow-arrow"></div>
                    <div class="flow-step">
                        <div style="font-size: 1.5em; margin-bottom: 8px;">1️⃣</div>
                        <h4 style="color: var(--accent);">initialize</h4>
                        <p style="margin: 8px 0 0 0; font-size: 0.85em;">Client → Serveur</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.8em; color: var(--text-secondary);">Négociation des capacités</p>
                    </div>
                    <div class="flow-step">
                        <div style="font-size: 1.5em; margin-bottom: 8px;">2️⃣</div>
                        <h4 style="color: var(--gradient-2);">response</h4>
                        <p style="margin: 8px 0 0 0; font-size: 0.85em;">Serveur → Client</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.8em; color: var(--text-secondary);">Capacités confirmées</p>
                    </div>
                    <div class="flow-step">
                        <div style="font-size: 1.5em; margin-bottom: 8px;">3️⃣</div>
                        <h4 style="color: var(--gradient-3);">initialized</h4>
                        <p style="margin: 8px 0 0 0; font-size: 0.85em;">Client → Serveur</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.8em; color: var(--text-secondary);">Handshake terminé</p>
                    </div>
                </div>

                <div style="background: rgba(233, 30, 99, 0.1); padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 4px solid var(--gradient-2);">
                    <h4 style="color: var(--gradient-2); margin: 0 0 10px 0;">⚠️ Règles Importantes</h4>
                    <ul style="margin: 0; padding-left: 20px; line-height: 1.6;">
                        <li>L'ordre de ces 3 étapes est <strong>strictement obligatoire</strong></li>
                        <li>Le serveur ne doit pas accepter d'autres requêtes avant <code>initialized</code></li>
                        <li>Un échec à n'importe quelle étape doit fermer la connexion</li>
                        <li>Les capacités annoncées dans <code>initialize</code> sont un contrat</li>
                    </ul>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>📋 Tableau Récapitulatif des Endpoints Standards</h3>
                <table class="parameter-table">
                    <thead>
                        <tr>
                            <th>Endpoint</th>
                            <th>Statut</th>
                            <th>Direction</th>
                            <th>Description</th>
                            <th>Réponse</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: rgba(39, 174, 96, 0.1);">
                            <td><code>initialize</code></td>
                            <td><span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8em;">OBLIGATOIRE</span></td>
                            <td>Client → Server</td>
                            <td>Initialise la connexion et négocie les capacités</td>
                            <td>✅ Oui</td>
                        </tr>
                        <tr style="background: rgba(39, 174, 96, 0.1);">
                            <td><code>initialized</code></td>
                            <td><span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8em;">OBLIGATOIRE</span></td>
                            <td>Client → Server</td>
                            <td>Confirme que l'initialisation est complète</td>
                            <td>❌ Non (notification)</td>
                        </tr>
                        <tr style="background: rgba(39, 174, 96, 0.1);">
                            <td><code>ping</code></td>
                            <td><span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8em;">OBLIGATOIRE</span></td>
                            <td>Client → Server</td>
                            <td>Vérification de l'état du serveur</td>
                            <td>✅ Oui</td>
                        </tr>
                        <tr style="background: rgba(255, 107, 53, 0.1);">
                            <td><code>tools/list</code></td>
                            <td><span style="background: var(--accent); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8em;">SI TOOLS</span></td>
                            <td>Client → Server</td>
                            <td>Liste tous les outils disponibles</td>
                            <td>✅ Oui</td>
                        </tr>
                        <tr style="background: rgba(255, 107, 53, 0.1);">
                            <td><code>tools/call</code></td>
                            <td><span style="background: var(--accent); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8em;">SI TOOLS</span></td>
                            <td>Client → Server</td>
                            <td>Exécute un outil spécifique</td>
                            <td>✅ Oui</td>
                        </tr>
                        <tr style="background: rgba(233, 30, 99, 0.1);">
                            <td><code>resources/list</code></td>
                            <td><span style="background: var(--gradient-2); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8em;">SI RESOURCES</span></td>
                            <td>Client → Server</td>
                            <td>Liste toutes les ressources disponibles</td>
                            <td>✅ Oui</td>
                        </tr>
                        <tr style="background: rgba(233, 30, 99, 0.1);">
                            <td><code>resources/read</code></td>
                            <td><span style="background: var(--gradient-2); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8em;">SI RESOURCES</span></td>
                            <td>Client → Server</td>
                            <td>Lit le contenu d'une ressource</td>
                            <td>✅ Oui</td>
                        </tr>
                        <tr style="background: rgba(156, 39, 176, 0.1);">
                            <td><code>prompts/list</code></td>
                            <td><span style="background: var(--gradient-3); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8em;">SI PROMPTS</span></td>
                            <td>Client → Server</td>
                            <td>Liste tous les prompts disponibles</td>
                            <td>✅ Oui</td>
                        </tr>
                        <tr style="background: rgba(156, 39, 176, 0.1);">
                            <td><code>prompts/get</code></td>
                            <td><span style="background: var(--gradient-3); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8em;">SI PROMPTS</span></td>
                            <td>Client → Server</td>
                            <td>Récupère un prompt spécifique</td>
                            <td>✅ Oui</td>
                        </tr>
                    </tbody>
                </table>

                <div style="background: var(--bg-primary); padding: 20px; border-radius: 12px; margin: 20px 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h4 style="color: var(--accent); margin-bottom: 15px;">🎯 Points Clés pour les Développeurs</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                        <div>
                            <h5 style="color: var(--text-primary); margin-bottom: 8px;">✅ Validation Obligatoire</h5>
                            <p style="margin: 0; font-size: 0.9em;">Tous les endpoints DOIVENT valider les paramètres selon leurs schémas JSON.</p>
                        </div>
                        <div>
                            <h5 style="color: var(--text-primary); margin-bottom: 8px;">🔒 Gestion d'Erreurs</h5>
                            <p style="margin: 0; font-size: 0.9em;">Retourner des codes d'erreur JSON-RPC 2.0 standardisés en cas de problème.</p>
                        </div>
                        <div>
                            <h5 style="color: var(--text-primary); margin-bottom: 8px;">⚡ Performance</h5>
                            <p style="margin: 0; font-size: 0.9em;">Les endpoints DOIVENT répondre dans un délai raisonnable (< 30s par défaut).</p>
                        </div>
                        <div>
                            <h5 style="color: var(--text-primary); margin-bottom: 8px;">🔄 Idempotence</h5>
                            <p style="margin: 0; font-size: 0.9em;">Les endpoints de lecture DOIVENT être idempotents et sans effet de bord.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>🛠️ Exemples de Validation et Bonnes Pratiques</h3>
                
                <h4 style="color: var(--accent); margin: 20px 0 15px 0;">Exemple : Validation d'un Tool Call</h4>
                <p>Voici comment un serveur MCP doit valider un appel d'outil :</p>
                
                <div class="code-block" data-language="JSON Requête Valide">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">42</span>,
  <span class="json-key">"method"</span>: <span class="json-string">"tools/call"</span>,
  <span class="json-key">"params"</span>: {
    <span class="json-key">"name"</span>: <span class="json-string">"create_task"</span>,
    <span class="json-key">"arguments"</span>: {
      <span class="json-key">"title"</span>: <span class="json-string">"Implémenter l'authentification"</span>,
      <span class="json-key">"priority"</span>: <span class="json-string">"high"</span>,
      <span class="json-key">"due_date"</span>: <span class="json-string">"2024-12-25T23:59:59Z"</span>
    }
  }
}</pre>
                </div>

                <div class="code-block" data-language="JSON Requête Invalide">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">43</span>,
  <span class="json-key">"method"</span>: <span class="json-string">"tools/call"</span>,
  <span class="json-key">"params"</span>: {
    <span class="json-key">"name"</span>: <span class="json-string">"create_task"</span>,
    <span class="json-key">"arguments"</span>: {
      <span class="json-comment">// ❌ Titre manquant (requis)</span>
      <span class="json-key">"priority"</span>: <span class="json-string">"invalid_priority"</span>, <span class="json-comment">// ❌ Valeur non autorisée</span>
      <span class="json-key">"due_date"</span>: <span class="json-string">"25/12/2024"</span> <span class="json-comment">// ❌ Format de date incorrect</span>
    }
  }
}</pre>
                </div>

                <div class="code-block" data-language="JSON Réponse d'Erreur">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">43</span>,
  <span class="json-key">"error"</span>: {
    <span class="json-key">"code"</span>: <span class="json-number">-32602</span>,
    <span class="json-key">"message"</span>: <span class="json-string">"Invalid params"</span>,
    <span class="json-key">"data"</span>: {
      <span class="json-key">"validation_errors"</span>: [
        {
          <span class="json-key">"field"</span>: <span class="json-string">"arguments.title"</span>,
          <span class="json-key">"error"</span>: <span class="json-string">"Required field missing"</span>
        },
        {
          <span class="json-key">"field"</span>: <span class="json-string">"arguments.priority"</span>,
          <span class="json-key">"error"</span>: <span class="json-string">"Must be one of: low, medium, high, urgent"</span>
        },
        {
          <span class="json-key">"field"</span>: <span class="json-string">"arguments.due_date"</span>,
          <span class="json-key">"error"</span>: <span class="json-string">"Must be ISO 8601 format (YYYY-MM-DDTHH:mm:ssZ)"</span>
        }
      ]
    }
  }
}</pre>
                </div>

                <h4 style="color: var(--gradient-2); margin: 25px 0 15px 0;">🏆 Checklist de Conformité MCP</h4>
                <div style="background: var(--bg-primary); padding: 20px; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <h5 style="color: var(--accent); margin-bottom: 12px;">✅ Endpoints Obligatoires</h5>
                            <ul style="margin: 0; padding-left: 20px; line-height: 1.8; font-size: 0.9em;">
                                <li>✅ <code>initialize</code> - Négociation des capacités</li>
                                <li>✅ <code>initialized</code> - Notification de confirmation</li>
                                <li>✅ <code>ping</code> - Vérification d'état</li>
                                <li>✅ Validation des schémas JSON</li>
                                <li>✅ Gestion d'erreurs JSON-RPC 2.0</li>
                            </ul>
                        </div>
                        <div>
                            <h5 style="color: var(--gradient-2); margin-bottom: 12px;">⚡ Bonnes Pratiques</h5>
                            <ul style="margin: 0; padding-left: 20px; line-height: 1.8; font-size: 0.9em;">
                                <li>🔒 Validation stricte des entrées</li>
                                <li>📏 Respect des timeouts (< 30s)</li>
                                <li>🔄 Endpoints de lecture idempotents</li>
                                <li>📊 Logging détaillé des erreurs</li>
                                <li>🎯 Messages d'erreur informatifs</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(233, 30, 99, 0.1)); padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 4px solid var(--accent);">
                    <h4 style="color: var(--accent); margin: 0 0 10px 0;">💡 Conseil de Pro</h4>
                    <p style="margin: 0; font-size: 0.95em;">
                        Utilisez des bibliothèques de validation JSON Schema existantes plutôt que de coder la validation manuellement. 
                        Cela garantit la conformité et réduit les bugs. Exemples : <code>ajv</code> (JavaScript), <code>jsonschema</code> (Python), <code>github.com/xeipuuv/gojsonschema</code> (Go).
                    </p>
                </div>
            </div>
        </div>

        <!-- Section Lifecycle -->
        <div id="lifecycle" class="content-section">
            <h2>Cycle de Vie Complet d'une Session MCP</h2>
            
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-marker">1</div>
                    <div class="timeline-content">
                        <h3>🤝 Handshake Initial</h3>
                        <p>Le client initie la connexion avec le serveur Task Manager.</p>
                        <div class="code-block" data-language="JSON Request">
                            <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">1</span>,
  <span class="json-key">"method"</span>: <span class="json-string">"initialize"</span>,
  <span class="json-key">"params"</span>: {
    <span class="json-key">"protocolVersion"</span>: <span class="json-string">"1.0"</span>,
    <span class="json-key">"capabilities"</span>: {
      <span class="json-key">"experimental"</span>: {},
      <span class="json-key">"sampling"</span>: {}
    },
    <span class="json-key">"clientInfo"</span>: {
      <span class="json-key">"name"</span>: <span class="json-string">"Claude Desktop"</span>,
      <span class="json-key">"version"</span>: <span class="json-string">"1.0.0"</span>
    }
  }
}</pre>
                        </div>
                        <div class="code-block" data-language="JSON Response">
                            <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">1</span>,
  <span class="json-key">"result"</span>: {
    <span class="json-key">"protocolVersion"</span>: <span class="json-string">"1.0"</span>,
    <span class="json-key">"capabilities"</span>: {
      <span class="json-key">"tools"</span>: {},
      <span class="json-key">"resources"</span>: {},
      <span class="json-key">"prompts"</span>: {}
    },
    <span class="json-key">"serverInfo"</span>: {
      <span class="json-key">"name"</span>: <span class="json-string">"task-manager-server"</span>,
      <span class="json-key">"version"</span>: <span class="json-string">"2.1.0"</span>
    }
  }
}</pre>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-marker">2</div>
                    <div class="timeline-content">
                        <h3>✅ Confirmation d'Initialisation</h3>
                        <p>Le client confirme que l'initialisation est terminée.</p>
                        <div class="code-block" data-language="JSON Notification">
                            <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"method"</span>: <span class="json-string">"initialized"</span>
}</pre>
                        </div>
                        <p style="margin-top: 10px;"><em>Note : C'est une notification (pas d'id), donc pas de réponse attendue.</em></p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-marker">3</div>
                    <div class="timeline-content">
                        <h3>🔍 Découverte des Capacités</h3>
                        <p>Le client explore les outils disponibles sur le serveur.</p>
                        <div class="code-block" data-language="JSON Request">
                            <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">2</span>,
  <span class="json-key">"method"</span>: <span class="json-string">"tools/list"</span>
}</pre>
                        </div>
                        <div class="code-block" data-language="JSON Response">
                            <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">2</span>,
  <span class="json-key">"result"</span>: {
    <span class="json-key">"tools"</span>: [
      {
        <span class="json-key">"name"</span>: <span class="json-string">"create_task"</span>,
        <span class="json-key">"description"</span>: <span class="json-string">"Créer une nouvelle tâche"</span>,
        <span class="json-key">"inputSchema"</span>: {
          <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
          <span class="json-key">"properties"</span>: {
            <span class="json-key">"title"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span>, <span class="json-key">"description"</span>: <span class="json-string">"Titre de la tâche"</span> },
            <span class="json-key">"description"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
            <span class="json-key">"priority"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span>, <span class="json-key">"enum"</span>: [<span class="json-string">"low"</span>, <span class="json-string">"medium"</span>, <span class="json-string">"high"</span>] },
            <span class="json-key">"due_date"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span>, <span class="json-key">"format"</span>: <span class="json-string">"date-time"</span> }
          },
          <span class="json-key">"required"</span>: [<span class="json-string">"title"</span>]
        }
      },
      <span class="json-comment">// ... autres outils</span>
    ]
  }
}</pre>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-marker">4</div>
                    <div class="timeline-content">
                        <h3>🚀 Utilisation Active</h3>
                        <p>Le client peut maintenant utiliser les outils, lire les ressources, et exécuter les prompts.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Endpoints -->
        <div id="endpoints" class="content-section">
            <h2>Endpoints Détaillés du Task Manager</h2>
            
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-request">REQUEST</span>
                    <h3>initialize</h3>
                </div>
                <p>Établit la connexion initiale et négocie les capacités entre client et serveur.</p>
                
                <h4 style="margin-top: 20px;">Paramètres d'entrée :</h4>
                <table class="parameter-table">
                    <thead>
                        <tr>
                            <th>Paramètre</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>protocolVersion</td>
                            <td><span class="type-badge">string</span> <span class="required-badge">requis</span></td>
                            <td>Version du protocole MCP (actuellement "1.0")</td>
                        </tr>
                        <tr>
                            <td>capabilities</td>
                            <td><span class="type-badge">object</span></td>
                            <td>Capacités supportées par le client</td>
                        </tr>
                        <tr>
                            <td>clientInfo</td>
                            <td><span class="type-badge">object</span></td>
                            <td>Informations sur le client (name, version)</td>
                        </tr>
                    </tbody>
                </table>

                <div class="example-box">
                    <p>Le serveur Task Manager répond avec ses propres capacités :</p>
                    <ul style="margin: 10px 0 0 20px;">
                        <li>Support des tools (4 outils de gestion)</li>
                        <li>Support des resources (3 types de ressources)</li>
                        <li>Support des prompts (3 templates prédéfinis)</li>
                    </ul>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-request">REQUEST</span>
                    <h3>tools/list</h3>
                </div>
                <p>Retourne la liste complète des outils disponibles avec leurs schémas.</p>
                
                <div class="code-block" data-language="JSON Response">
                    <pre>{
  <span class="json-key">"tools"</span>: [
    {
      <span class="json-key">"name"</span>: <span class="json-string">"create_task"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Créer une nouvelle tâche dans le système"</span>,
      <span class="json-key">"inputSchema"</span>: { <span class="json-comment">// JSON Schema complet</span> }
    },
    {
      <span class="json-key">"name"</span>: <span class="json-string">"update_task"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Mettre à jour une tâche existante"</span>,
      <span class="json-key">"inputSchema"</span>: { <span class="json-comment">// JSON Schema complet</span> }
    },
    {
      <span class="json-key">"name"</span>: <span class="json-string">"complete_task"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Marquer une tâche comme terminée"</span>,
      <span class="json-key">"inputSchema"</span>: { <span class="json-comment">// JSON Schema complet</span> }
    },
    {
      <span class="json-key">"name"</span>: <span class="json-string">"delete_task"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Supprimer une tâche du système"</span>,
      <span class="json-key">"inputSchema"</span>: { <span class="json-comment">// JSON Schema complet</span> }
    }
  ]
}</pre>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-request">REQUEST</span>
                    <h3>resources/list</h3>
                </div>
                <p>Retourne la liste des ressources disponibles pour consultation.</p>
                
                <div class="code-block" data-language="JSON Response">
                    <pre>{
  <span class="json-key">"resources"</span>: [
    {
      <span class="json-key">"uri"</span>: <span class="json-string">"task://list"</span>,
      <span class="json-key">"name"</span>: <span class="json-string">"Liste des tâches"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Toutes les tâches actives"</span>,
      <span class="json-key">"mimeType"</span>: <span class="json-string">"application/json"</span>
    },
    {
      <span class="json-key">"uri"</span>: <span class="json-string">"task://stats"</span>,
      <span class="json-key">"name"</span>: <span class="json-string">"Statistiques"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Statistiques globales des tâches"</span>,
      <span class="json-key">"mimeType"</span>: <span class="json-string">"application/json"</span>
    },
    {
      <span class="json-key">"uri"</span>: <span class="json-string">"task://detail/{id}"</span>,
      <span class="json-key">"name"</span>: <span class="json-string">"Détail d'une tâche"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Informations détaillées d'une tâche spécifique"</span>,
      <span class="json-key">"mimeType"</span>: <span class="json-string">"application/json"</span>
    }
  ]
}</pre>
                </div>
            </div>
        </div>

        <!-- Section Tools -->
        <div id="tools" class="content-section">
            <h2>Tools : Actions sur les Tâches</h2>
            
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-post">TOOL</span>
                    <h3>create_task</h3>
                </div>
                <p>Crée une nouvelle tâche dans le système avec tous ses attributs.</p>
                
                <h4>Schema d'entrée (inputSchema) :</h4>
                <div class="code-block" data-language="JSON Schema">
                    <pre>{
  <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
  <span class="json-key">"properties"</span>: {
    <span class="json-key">"title"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Titre de la tâche"</span>,
      <span class="json-key">"minLength"</span>: <span class="json-number">1</span>,
      <span class="json-key">"maxLength"</span>: <span class="json-number">200</span>
    },
    <span class="json-key">"description"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Description détaillée de la tâche"</span>
    },
    <span class="json-key">"priority"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"enum"</span>: [<span class="json-string">"low"</span>, <span class="json-string">"medium"</span>, <span class="json-string">"high"</span>, <span class="json-string">"urgent"</span>],
      <span class="json-key">"default"</span>: <span class="json-string">"medium"</span>
    },
    <span class="json-key">"due_date"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"format"</span>: <span class="json-string">"date-time"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Date d'échéance (ISO 8601)"</span>
    },
    <span class="json-key">"tags"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"array"</span>,
      <span class="json-key">"items"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
      <span class="json-key">"description"</span>: <span class="json-string">"Liste de tags associés"</span>
    },
    <span class="json-key">"assignee"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Personne assignée à la tâche"</span>
    }
  },
  <span class="json-key">"required"</span>: [<span class="json-string">"title"</span>],
  <span class="json-key">"additionalProperties"</span>: <span class="json-boolean">false</span>
}</pre>
                </div>

                <h4>Exemple d'appel :</h4>
                <div class="code-block" data-language="JSON Request">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">10</span>,
  <span class="json-key">"method"</span>: <span class="json-string">"tools/call"</span>,
  <span class="json-key">"params"</span>: {
    <span class="json-key">"name"</span>: <span class="json-string">"create_task"</span>,
    <span class="json-key">"arguments"</span>: {
      <span class="json-key">"title"</span>: <span class="json-string">"Réviser la documentation API"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Mettre à jour la documentation avec les nouveaux endpoints MCP"</span>,
      <span class="json-key">"priority"</span>: <span class="json-string">"high"</span>,
      <span class="json-key">"due_date"</span>: <span class="json-string">"2024-12-15T17:00:00Z"</span>,
      <span class="json-key">"tags"</span>: [<span class="json-string">"documentation"</span>, <span class="json-string">"api"</span>, <span class="json-string">"mcp"</span>],
      <span class="json-key">"assignee"</span>: <span class="json-string">"alice@example.com"</span>
    }
  }
}</pre>
                </div>

                <h4>Réponse attendue :</h4>
                <div class="code-block" data-language="JSON Response">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">10</span>,
  <span class="json-key">"result"</span>: {
    <span class="json-key">"content"</span>: [
      {
        <span class="json-key">"type"</span>: <span class="json-string">"text"</span>,
        <span class="json-key">"text"</span>: <span class="json-string">"Tâche créée avec succès"</span>
      }
    ],
    <span class="json-key">"task_id"</span>: <span class="json-string">"task-12345"</span>,
    <span class="json-key">"created_at"</span>: <span class="json-string">"2024-11-20T10:30:00Z"</span>,
    <span class="json-key">"status"</span>: <span class="json-string">"pending"</span>
  }
}</pre>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-post">TOOL</span>
                    <h3>complete_task</h3>
                </div>
                <p>Marque une tâche comme complétée et enregistre les métadonnées de complétion.</p>
                
                <div class="code-block" data-language="JSON Request">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">11</span>,
  <span class="json-key">"method"</span>: <span class="json-string">"tools/call"</span>,
  <span class="json-key">"params"</span>: {
    <span class="json-key">"name"</span>: <span class="json-string">"complete_task"</span>,
    <span class="json-key">"arguments"</span>: {
      <span class="json-key">"task_id"</span>: <span class="json-string">"task-12345"</span>,
      <span class="json-key">"completion_notes"</span>: <span class="json-string">"Documentation mise à jour et revue par l'équipe"</span>,
      <span class="json-key">"time_spent"</span>: <span class="json-number">180</span> <span class="json-comment">// en minutes</span>
    }
  }
}</pre>
                </div>
            </div>
        </div>

        <!-- Section Resources -->
        <div id="resources" class="content-section">
            <h2>Resources : Consultation des Données</h2>
            
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-get">RESOURCE</span>
                    <h3>task://list</h3>
                </div>
                <p>Récupère la liste de toutes les tâches actives avec leurs statuts.</p>
                
                <h4>Requête :</h4>
                <div class="code-block" data-language="JSON Request">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">20</span>,
  <span class="json-key">"method"</span>: <span class="json-string">"resources/read"</span>,
  <span class="json-key">"params"</span>: {
    <span class="json-key">"uri"</span>: <span class="json-string">"task://list"</span>
  }
}</pre>
                </div>

                <h4>Réponse :</h4>
                <div class="code-block" data-language="JSON Response">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">20</span>,
  <span class="json-key">"result"</span>: {
    <span class="json-key">"contents"</span>: [
      {
        <span class="json-key">"uri"</span>: <span class="json-string">"task://list"</span>,
        <span class="json-key">"mimeType"</span>: <span class="json-string">"application/json"</span>,
        <span class="json-key">"text"</span>: <span class="json-string">"{\"tasks\": [{\"id\": \"task-12345\", \"title\": \"Réviser la documentation API\", \"status\": \"pending\", \"priority\": \"high\", \"assignee\": \"alice@example.com\"}, {\"id\": \"task-12346\", \"title\": \"Corriger le bug de connexion\", \"status\": \"in_progress\", \"priority\": \"urgent\"}]}"</span>
      }
    ]
  }
}</pre>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-get">RESOURCE</span>
                    <h3>task://stats</h3>
                </div>
                <p>Fournit des statistiques globales sur les tâches du système.</p>
                
                <div class="code-block" data-language="JSON Response Content">
                    <pre>{
  <span class="json-key">"total_tasks"</span>: <span class="json-number">142</span>,
  <span class="json-key">"by_status"</span>: {
    <span class="json-key">"pending"</span>: <span class="json-number">45</span>,
    <span class="json-key">"in_progress"</span>: <span class="json-number">23</span>,
    <span class="json-key">"completed"</span>: <span class="json-number">68</span>,
    <span class="json-key">"cancelled"</span>: <span class="json-number">6</span>
  },
  <span class="json-key">"by_priority"</span>: {
    <span class="json-key">"urgent"</span>: <span class="json-number">5</span>,
    <span class="json-key">"high"</span>: <span class="json-number">18</span>,
    <span class="json-key">"medium"</span>: <span class="json-number">72</span>,
    <span class="json-key">"low"</span>: <span class="json-number">47</span>
  },
  <span class="json-key">"overdue_tasks"</span>: <span class="json-number">8</span>,
  <span class="json-key">"completion_rate"</span>: <span class="json-number">47.9</span>,
  <span class="json-key">"average_completion_time"</span>: <span class="json-number">3.2</span> <span class="json-comment">// en jours</span>
}</pre>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-get">RESOURCE</span>
                    <h3>task://detail/{id}</h3>
                </div>
                <p>Récupère les détails complets d'une tâche spécifique.</p>
                
                <div class="example-box">
                    <p><strong>URI dynamique :</strong> Le {id} est remplacé par l'identifiant réel de la tâche.</p>
                    <p>Exemple : <code>task://detail/task-12345</code></p>
                </div>
            </div>
        </div>

        <!-- Section Prompts -->
        <div id="prompts" class="content-section">
            <h2>Prompts : Templates Prédéfinis</h2>
            
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-notification">PROMPT</span>
                    <h3>weekly_review</h3>
                </div>
                <p>Template pour générer une revue hebdomadaire des tâches.</p>
                
                <h4>Définition du Prompt :</h4>
                <div class="code-block" data-language="JSON">
                    <pre>{
  <span class="json-key">"name"</span>: <span class="json-string">"weekly_review"</span>,
  <span class="json-key">"description"</span>: <span class="json-string">"Génère un rapport de revue hebdomadaire"</span>,
  <span class="json-key">"arguments"</span>: [
    {
      <span class="json-key">"name"</span>: <span class="json-string">"week_number"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Numéro de la semaine à analyser"</span>,
      <span class="json-key">"required"</span>: <span class="json-boolean">false</span>
    },
    {
      <span class="json-key">"name"</span>: <span class="json-string">"team"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Filtrer par équipe spécifique"</span>,
      <span class="json-key">"required"</span>: <span class="json-boolean">false</span>
    }
  ]
}</pre>
                </div>

                <h4>Utilisation du Prompt :</h4>
                <div class="code-block" data-language="JSON Request">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">30</span>,
  <span class="json-key">"method"</span>: <span class="json-string">"prompts/get"</span>,
  <span class="json-key">"params"</span>: {
    <span class="json-key">"name"</span>: <span class="json-string">"weekly_review"</span>,
    <span class="json-key">"arguments"</span>: {
      <span class="json-key">"week_number"</span>: <span class="json-number">47</span>,
      <span class="json-key">"team"</span>: <span class="json-string">"backend"</span>
    }
  }
}</pre>
                </div>

                <h4>Réponse avec les Messages Générés :</h4>
                <div class="code-block" data-language="JSON Response">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">30</span>,
  <span class="json-key">"result"</span>: {
    <span class="json-key">"description"</span>: <span class="json-string">"Revue hebdomadaire de l'équipe backend - Semaine 47"</span>,
    <span class="json-key">"messages"</span>: [
      {
        <span class="json-key">"role"</span>: <span class="json-string">"user"</span>,
        <span class="json-key">"content"</span>: {
          <span class="json-key">"type"</span>: <span class="json-string">"text"</span>,
          <span class="json-key">"text"</span>: <span class="json-string">"Génère une revue détaillée pour la semaine 47 de l'équipe backend avec :\n- Les tâches complétées\n- Les tâches en cours\n- Les blocages identifiés\n- Les métriques de performance"</span>
        }
      },
      {
        <span class="json-key">"role"</span>: <span class="json-string">"assistant"</span>,
        <span class="json-key">"content"</span>: {
          <span class="json-key">"type"</span>: <span class="json-string">"text"</span>,
          <span class="json-key">"text"</span>: <span class="json-string">"Je vais analyser les données de la semaine 47 pour l'équipe backend..."</span>
        }
      }
    ]
  }
}</pre>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-notification">PROMPT</span>
                    <h3>sprint_planning</h3>
                </div>
                <p>Template pour faciliter la planification de sprint avec priorisation automatique.</p>
                
                <div class="example-box">
                    <p>Ce prompt utilise les ressources <code>task://list</code> et <code>task://stats</code> pour :</p>
                    <ul style="margin: 10px 0 0 20px;">
                        <li>Analyser la vélocité de l'équipe</li>
                        <li>Suggérer une répartition optimale des tâches</li>
                        <li>Identifier les dépendances critiques</li>
                        <li>Proposer un planning réaliste</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Section Errors -->
        <div id="errors" class="content-section">
            <h2>Gestion des Erreurs</h2>
            
            <div class="endpoint-card">
                <h3>🚨 Codes d'Erreur Standards JSON-RPC</h3>
                <table class="parameter-table">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Message</th>
                            <th>Signification</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>-32700</code></td>
                            <td>Parse error</td>
                            <td>JSON invalide reçu</td>
                        </tr>
                        <tr>
                            <td><code>-32600</code></td>
                            <td>Invalid Request</td>
                            <td>La requête JSON-RPC est mal formée</td>
                        </tr>
                        <tr>
                            <td><code>-32601</code></td>
                            <td>Method not found</td>
                            <td>La méthode appelée n'existe pas</td>
                        </tr>
                        <tr>
                            <td><code>-32602</code></td>
                            <td>Invalid params</td>
                            <td>Paramètres invalides pour la méthode</td>
                        </tr>
                        <tr>
                            <td><code>-32603</code></td>
                            <td>Internal error</td>
                            <td>Erreur interne du serveur</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="endpoint-card">
                <h3>⚠️ Codes d'Erreur Spécifiques au Task Manager</h3>
                <table class="parameter-table">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Contexte</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>-32000</code></td>
                            <td>Task not found</td>
                            <td>L'ID de tâche spécifié n'existe pas</td>
                        </tr>
                        <tr>
                            <td><code>-32001</code></td>
                            <td>Permission denied</td>
                            <td>Droits insuffisants pour cette action</td>
                        </tr>
                        <tr>
                            <td><code>-32002</code></td>
                            <td>Task already completed</td>
                            <td>Impossible de modifier une tâche terminée</td>
                        </tr>
                        <tr>
                            <td><code>-32003</code></td>
                            <td>Invalid date format</td>
                            <td>Format de date non conforme à ISO 8601</td>
                        </tr>
                        <tr>
                            <td><code>-32004</code></td>
                            <td>Quota exceeded</td>
                            <td>Limite de tâches atteinte</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="endpoint-card">
                <h3>Exemple d'Erreur</h3>
                <div class="code-block" data-language="JSON Error">
                    <pre>{
  <span class="json-key">"jsonrpc"</span>: <span class="json-string">"2.0"</span>,
  <span class="json-key">"id"</span>: <span class="json-number">15</span>,
  <span class="json-key">"error"</span>: {
    <span class="json-key">"code"</span>: <span class="json-number">-32000</span>,
    <span class="json-key">"message"</span>: <span class="json-string">"Task not found"</span>,
    <span class="json-key">"data"</span>: {
      <span class="json-key">"task_id"</span>: <span class="json-string">"task-99999"</span>,
      <span class="json-key">"suggestion"</span>: <span class="json-string">"Vérifiez l'ID ou utilisez task://list pour voir les tâches disponibles"</span>
    }
  }
}</pre>
                </div>
            </div>
        </div>

        <!-- Section Demo -->
        <div id="demo" class="content-section">
            <h2>Démo Interactive : Flux Complet</h2>
            
            <div class="interactive-demo">
                <h3>🎮 Simulateur de Session MCP Task Manager</h3>
                <p>Suivez un flux complet d'interaction avec notre serveur Task Manager :</p>
                
                <div class="demo-controls">
                    <button class="demo-button" onclick="runDemo('init')">1. Initialiser</button>
                    <button class="demo-button" onclick="runDemo('discover')">2. Découvrir</button>
                    <button class="demo-button" onclick="runDemo('create')">3. Créer Tâche</button>
                    <button class="demo-button" onclick="runDemo('list')">4. Lister</button>
                    <button class="demo-button" onclick="runDemo('complete')">5. Compléter</button>
                    <button class="demo-button" onclick="runDemo('stats')">6. Statistiques</button>
                </div>
                
                <div class="demo-output" id="demoOutput">
                    <div style="color: #7f8c8d;">
                        👆 Cliquez sur les boutons dans l'ordre pour simuler une session complète
                    </div>
                </div>
            </div>

            <div class="endpoint-card">
                <h3>📊 Métriques de Performance</h3>
                <div class="flow-container">
                    <div class="flow-arrow"></div>
                    <div class="flow-step">
                        <h4>Latence</h4>
                        <p style="font-size: 2em; color: #27ae60;">~15ms</p>
                        <p>Temps de réponse moyen</p>
                    </div>
                    <div class="flow-step">
                        <h4>Throughput</h4>
                        <p style="font-size: 2em; color: #3498db;">1000 req/s</p>
                        <p>Capacité maximale</p>
                    </div>
                    <div class="flow-step">
                        <h4>Fiabilité</h4>
                        <p style="font-size: 2em; color: #e74c3c;">99.9%</p>
                        <p>Uptime garanti</p>
                    </div>
                </div>
            </div>

            <div class="example-box">
                <h3>🔑 Points Clés à Retenir</h3>
                <ol style="margin: 15px 0 0 25px; line-height: 2;">
                    <li><strong>Structure cohérente</strong> : Tous les messages suivent JSON-RPC 2.0</li>
                    <li><strong>Typage strict</strong> : Chaque endpoint a un schéma JSON défini</li>
                    <li><strong>Séparation des responsabilités</strong> : Tools (actions), Resources (lecture), Prompts (templates)</li>
                    <li><strong>Gestion d'erreurs robuste</strong> : Codes d'erreur standardisés et informatifs</li>
                    <li><strong>Extensibilité</strong> : Facile d'ajouter de nouveaux endpoints</li>
                    <li><strong>Performance</strong> : Communication asynchrone et optimisée</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(sectionId).classList.add('active');
            
            // Find and activate the corresponding tab
            document.querySelectorAll('.tab').forEach(tab => {
                if (tab.onclick && tab.onclick.toString().includes(sectionId)) {
                    tab.classList.add('active');
                }
            });
        }

        function runDemo(step) {
            const output = document.getElementById('demoOutput');
            const buttons = document.querySelectorAll('.demo-button');
            
            // Mark button as active
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const demos = {
                'init': {
                    title: '🤝 Initialisation de la connexion',
                    request: `{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "initialize",
  "params": {
    "protocolVersion": "1.0",
    "clientInfo": {
      "name": "Claude Desktop",
      "version": "1.0.0"
    }
  }
}`,
                    response: `{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "protocolVersion": "1.0",
    "capabilities": {
      "tools": {},
      "resources": {},
      "prompts": {}
    },
    "serverInfo": {
      "name": "task-manager-server",
      "version": "2.1.0"
    }
  }
}`,
                    status: 'success',
                    message: '✅ Connexion établie avec succès'
                },
                'discover': {
                    title: '🔍 Découverte des capacités',
                    request: `{
  "jsonrpc": "2.0",
  "id": 2,
  "method": "tools/list"
}`,
                    response: `{
  "jsonrpc": "2.0",
  "id": 2,
  "result": {
    "tools": [
      {
        "name": "create_task",
        "description": "Créer une nouvelle tâche"
      },
      {
        "name": "update_task",
        "description": "Mettre à jour une tâche"
      },
      {
        "name": "complete_task",
        "description": "Marquer comme terminée"
      },
      {
        "name": "delete_task",
        "description": "Supprimer une tâche"
      }
    ]
  }
}`,
                    status: 'success',
                    message: '✅ 4 outils découverts'
                },
                'create': {
                    title: '➕ Création d\'une nouvelle tâche',
                    request: `{
  "jsonrpc": "2.0",
  "id": 10,
  "method": "tools/call",
  "params": {
    "name": "create_task",
    "arguments": {
      "title": "Implémenter l'authentification OAuth",
      "description": "Ajouter le support OAuth 2.0 pour les connexions externes",
      "priority": "high",
      "due_date": "2024-12-20T17:00:00Z",
      "tags": ["security", "auth", "backend"],
      "assignee": "bob@example.com"
    }
  }
}`,
                    response: `{
  "jsonrpc": "2.0",
  "id": 10,
  "result": {
    "content": [{
      "type": "text",
      "text": "Tâche créée avec succès"
    }],
    "task_id": "task-54321",
    "created_at": "2024-11-20T14:22:15Z",
    "status": "pending"
  }
}`,
                    status: 'success',
                    message: '✅ Tâche task-54321 créée'
                },
                'list': {
                    title: '📋 Récupération de la liste des tâches',
                    request: `{
  "jsonrpc": "2.0",
  "id": 20,
  "method": "resources/read",
  "params": {
    "uri": "task://list"
  }
}`,
                    response: `{
  "jsonrpc": "2.0",
  "id": 20,
  "result": {
    "contents": [{
      "uri": "task://list",
      "mimeType": "application/json",
      "text": "{\\"tasks\\": [{\\"id\\": \\"task-54321\\", \\"title\\": \\"Implémenter l'authentification OAuth\\", \\"status\\": \\"pending\\", \\"priority\\": \\"high\\", \\"assignee\\": \\"bob@example.com\\"}]}"
    }]
  }
}`,
                    status: 'success',
                    message: '✅ 1 tâche active récupérée'
                },
                'complete': {
                    title: '✔️ Marquer la tâche comme terminée',
                    request: `{
  "jsonrpc": "2.0",
  "id": 30,
  "method": "tools/call",
  "params": {
    "name": "complete_task",
    "arguments": {
      "task_id": "task-54321",
      "completion_notes": "OAuth 2.0 implémenté avec support Google et GitHub",
      "time_spent": 480
    }
  }
}`,
                    response: `{
  "jsonrpc": "2.0",
  "id": 30,
  "result": {
    "content": [{
      "type": "text",
      "text": "Tâche complétée"
    }],
    "completed_at": "2024-11-20T22:30:00Z",
    "total_time": 480
  }
}`,
                    status: 'success',
                    message: '✅ Tâche task-54321 complétée (8h de travail)'
                },
                'stats': {
                    title: '📊 Récupération des statistiques',
                    request: `{
  "jsonrpc": "2.0",
  "id": 40,
  "method": "resources/read",
  "params": {
    "uri": "task://stats"
  }
}`,
                    response: `{
  "jsonrpc": "2.0",
  "id": 40,
  "result": {
    "contents": [{
      "uri": "task://stats",
      "mimeType": "application/json",
      "text": "{\\"total_tasks\\": 143, \\"by_status\\": {\\"completed\\": 69, \\"pending\\": 44}, \\"completion_rate\\": 48.3, \\"average_completion_time\\": 3.1}"
    }]
  }
}`,
                    status: 'success',
                    message: '✅ Stats: 143 tâches total, 48.3% complétées'
                }
            };
            
            const demo = demos[step];
            if (!demo) return;
            
            output.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #ff6b35; margin-bottom: 10px;">${demo.title}</h4>
                    <div class="status-indicator status-${demo.status}" style="margin-bottom: 15px;">
                        ${demo.message}
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h5 style="color: #27ae60; margin-bottom: 10px;">📤 Request:</h5>
                        <pre style="background: #1e1e1e; padding: 15px; border-radius: 8px; overflow-x: auto; color: #d4d4d4; font-size: 0.85em; border: 1px solid rgba(255, 255, 255, 0.1);">${demo.request}</pre>
                    </div>
                    <div>
                        <h5 style="color: #e91e63; margin-bottom: 10px;">📥 Response:</h5>
                        <pre style="background: #1e1e1e; padding: 15px; border-radius: 8px; overflow-x: auto; color: #d4d4d4; font-size: 0.85em; border: 1px solid rgba(255, 255, 255, 0.1);">${demo.response}</pre>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>